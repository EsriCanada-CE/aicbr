/*!
 * jQuery JavaScript Library v3.2.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2017-03-20T18:59Z
 */

/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */

/* esri-leaflet - v2.0.8 - Tue Mar 21 2017 16:09:38 GMT-0700 (PDT)
 * Copyright (c) 2017 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */

/* esri-leaflet-geocoder - v2.2.4 - Wed Mar 22 2017 15:48:08 GMT-0700 (PDT)
 * Copyright (c) 2017 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */

//# sourceMappingURL=esri-leaflet-geocoder.js.map;
// https://d3js.org Version 4.9.1. Copyright 2017 Mike Bostock.

/*
 * jQuery mmenu v6.1.0
 * @requires jQuery 1.7.0 or later
 *
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 * www.frebsite.nl
 *
 * License: CC-BY-NC-4.0
 * http://creativecommons.org/licenses/by-nc/4.0/
 */

/*
 * jQuery mmenu offCanvas add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu scrollBugFix add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu screenReader add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu autoHeight add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu backButton add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu columns add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu counters add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu dividers add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu drag add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu dropdown add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu fixedElements add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu iconPanels add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu keyboardNavigation add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu lazySubmenus add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu navbar add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu navbar add-on breadcrumbs content
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu navbar add-on close content
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu navbar add-on next content
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu navbar add-on prev content
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu navbar add-on searchfield content
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu navbar add-on title content
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu pageScroll add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu RTL add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu searchfield add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu sectionIndexer add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu setSelected add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*
 * jQuery mmenu toggles add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */

if(function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e){e=e||nt;var n=e.createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function i(t){var e=!!t&&"length"in t&&t.length,n=pt.type(t);return"function"!==n&&!pt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function o(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function r(t,e,n){return pt.isFunction(e)?pt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?pt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?pt.grep(t,function(t){return at.call(e,t)>-1!==n}):Ct.test(e)?pt.filter(e,t,n):(e=pt.filter(e,t),pt.grep(t,function(t){return at.call(e,t)>-1!==n&&1===t.nodeType}))}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t){var e={};return pt.each(t.match(Pt)||[],function(t,n){e[n]=!0}),e}function u(t){return t}function l(t){throw t}function c(t,e,n,i){var o;try{t&&pt.isFunction(o=t.promise)?o.call(t).done(e).fail(n):t&&pt.isFunction(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function h(){nt.removeEventListener("DOMContentLoaded",h),t.removeEventListener("load",h),pt.ready()}function f(){this.expando=pt.expando+f.uid++}function d(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Dt.test(t)?JSON.parse(t):t)}function p(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Rt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=d(n)}catch(t){}Ot.set(t,e,n)}else n=void 0;return n}function m(t,e,n,i){var o,r=1,s=20,a=i?function(){return i.cur()}:function(){return pt.css(t,e,"")},u=a(),l=n&&n[3]||(pt.cssNumber[e]?"":"px"),c=(pt.cssNumber[e]||"px"!==l&&+u)&&Bt.exec(pt.css(t,e));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do{r=r||".5",c/=r,pt.style(t,e,c+l)}while(r!==(r=a()/u)&&1!==r&&--s)}return n&&(c=+c||+u||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=o)),o}function g(t){var e,n=t.ownerDocument,i=t.nodeName,o=Zt[i];return o||(e=n.body.appendChild(n.createElement(i)),o=pt.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),Zt[i]=o,o)}function v(t,e){for(var n,i,o=[],r=0,s=t.length;r<s;r++)i=t[r],i.style&&(n=i.style.display,e?("none"===n&&(o[r]=zt.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&Ft(i)&&(o[r]=g(i))):"none"!==n&&(o[r]="none",zt.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}function _(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&o(t,e)?pt.merge([t],n):n}function y(t,e){for(var n=0,i=t.length;n<i;n++)zt.set(t[n],"globalEval",!e||zt.get(e[n],"globalEval"))}function b(t,e,n,i,o){for(var r,s,a,u,l,c,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((r=t[d])||0===r)if("object"===pt.type(r))pt.merge(f,r.nodeType?[r]:r);else if(Vt.test(r)){for(s=s||h.appendChild(e.createElement("div")),a=(Ht.exec(r)||["",""])[1].toLowerCase(),u=Gt[a]||Gt._default,s.innerHTML=u[1]+pt.htmlPrefilter(r)+u[2],c=u[0];c--;)s=s.lastChild;pt.merge(f,s.childNodes),s=h.firstChild,s.textContent=""}else f.push(e.createTextNode(r));for(h.textContent="",d=0;r=f[d++];)if(i&&pt.inArray(r,i)>-1)o&&o.push(r);else if(l=pt.contains(r.ownerDocument,r),s=_(h.appendChild(r),"script"),l&&y(s),n)for(c=0;r=s[c++];)Wt.test(r.type||"")&&n.push(r);return h}function x(){return!0}function w(){return!1}function T(){try{return nt.activeElement}catch(t){}}function C(t,e,n,i,o,r){var s,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(a in e)C(t,a,n,i,e[a],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=w;else if(!o)return t;return 1===r&&(s=o,o=function(t){return pt().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=pt.guid++)),t.each(function(){pt.event.add(this,e,o,i,n)})}function M(t,e){return o(t,"table")&&o(11!==e.nodeType?e:e.firstChild,"tr")?pt(">tbody",t)[0]||t:t}function L(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function k(t){var e=ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function S(t,e){var n,i,o,r,s,a,u,l;if(1===e.nodeType){if(zt.hasData(t)&&(r=zt.access(t),s=zt.set(e,r),l=r.events)){delete s.handle,s.events={};for(o in l)for(n=0,i=l[o].length;n<i;n++)pt.event.add(e,o,l[o][n])}Ot.hasData(t)&&(a=Ot.access(t),u=pt.extend({},a),Ot.set(e,u))}}function P(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ut.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function A(t,e,i,o){e=rt.apply([],e);var r,s,a,u,l,c,h=0,f=t.length,d=f-1,p=e[0],m=pt.isFunction(p);if(m||f>1&&"string"==typeof p&&!dt.checkClone&&ee.test(p))return t.each(function(n){var r=t.eq(n);m&&(e[0]=p.call(this,n,r.html())),A(r,e,i,o)});if(f&&(r=b(e,t[0].ownerDocument,!1,t,o),s=r.firstChild,1===r.childNodes.length&&(r=s),s||o)){for(a=pt.map(_(r,"script"),L),u=a.length;h<f;h++)l=r,h!==d&&(l=pt.clone(l,!0,!0),u&&pt.merge(a,_(l,"script"))),i.call(t[h],l,h);if(u)for(c=a[a.length-1].ownerDocument,pt.map(a,k),h=0;h<u;h++)l=a[h],Wt.test(l.type||"")&&!zt.access(l,"globalEval")&&pt.contains(c,l)&&(l.src?pt._evalUrl&&pt._evalUrl(l.src):n(l.textContent.replace(ie,""),c))}return t}function E(t,e,n){for(var i,o=e?pt.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||pt.cleanData(_(i)),i.parentNode&&(n&&pt.contains(i.ownerDocument,i)&&y(_(i,"script")),i.parentNode.removeChild(i));return t}function N(t,e,n){var i,o,r,s,a=t.style;return n=n||se(t),n&&(s=n.getPropertyValue(e)||n[e],""!==s||pt.contains(t.ownerDocument,t)||(s=pt.style(t,e)),!dt.pixelMarginRight()&&re.test(s)&&oe.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function I(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function z(t){if(t in fe)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=he.length;n--;)if((t=he[n]+e)in fe)return t}function O(t){var e=pt.cssProps[t];return e||(e=pt.cssProps[t]=z(t)||t),e}function D(t,e,n){var i=Bt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function R(t,e,n,i,o){var r,s=0;for(r=n===(i?"border":"content")?4:"width"===e?1:0;r<4;r+=2)"margin"===n&&(s+=pt.css(t,n+$t[r],!0,o)),i?("content"===n&&(s-=pt.css(t,"padding"+$t[r],!0,o)),"margin"!==n&&(s-=pt.css(t,"border"+$t[r]+"Width",!0,o))):(s+=pt.css(t,"padding"+$t[r],!0,o),"padding"!==n&&(s+=pt.css(t,"border"+$t[r]+"Width",!0,o)));return s}function j(t,e,n){var i,o=se(t),r=N(t,e,o),s="border-box"===pt.css(t,"boxSizing",!1,o);return re.test(r)?r:(i=s&&(dt.boxSizingReliable()||r===t.style[e]),"auto"===r&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)]),(r=parseFloat(r)||0)+R(t,e,n||(s?"border":"content"),i,o)+"px")}function B(t,e,n,i,o){return new B.prototype.init(t,e,n,i,o)}function $(){pe&&(!1===nt.hidden&&t.requestAnimationFrame?t.requestAnimationFrame($):t.setTimeout($,pt.fx.interval),pt.fx.tick())}function F(){return t.setTimeout(function(){de=void 0}),de=pt.now()}function q(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)n=$t[i],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function Z(t,e,n){for(var i,o=(W.tweeners[e]||[]).concat(W.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function U(t,e,n){var i,o,r,s,a,u,l,c,h="width"in e||"height"in e,f=this,d={},p=t.style,m=t.nodeType&&Ft(t),g=zt.get(t,"fxshow");n.queue||(s=pt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,pt.queue(t,"fx").length||s.empty.fire()})}));for(i in e)if(o=e[i],me.test(o)){if(delete e[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}d[i]=g&&g[i]||pt.style(t,i)}if((u=!pt.isEmptyObject(e))||!pt.isEmptyObject(d)){h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=g&&g.display,null==l&&(l=zt.get(t,"display")),c=pt.css(t,"display"),"none"===c&&(l?c=l:(v([t],!0),l=t.style.display||l,c=pt.css(t,"display"),v([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===pt.css(t,"float")&&(u||(f.done(function(){p.display=l}),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1;for(i in d)u||(g?"hidden"in g&&(m=g.hidden):g=zt.access(t,"fxshow",{display:l}),r&&(g.hidden=!m),m&&v([t],!0),f.done(function(){m||v([t]),zt.remove(t,"fxshow");for(i in d)pt.style(t,i,d[i])})),u=Z(m?g[i]:0,i,f),i in g||(g[i]=u.start,m&&(u.end=u.start,u.start=0))}}function H(t,e){var n,i,o,r,s;for(n in t)if(i=pt.camelCase(n),o=e[i],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(s=pt.cssHooks[i])&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function W(t,e,n){var i,o,r=0,s=W.prefilters.length,a=pt.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var e=de||F(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,r=1-i,s=0,u=l.tweens.length;s<u;s++)l.tweens[s].run(r);return a.notifyWith(t,[l,r,n]),r<1&&u?n:(u||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:pt.extend({},e),opts:pt.extend(!0,{specialEasing:{},easing:pt.easing._default},n),originalProperties:e,originalOptions:n,startTime:de||F(),duration:n.duration,tweens:[],createTween:function(e,n){var i=pt.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(H(c,l.opts.specialEasing);r<s;r++)if(i=W.prefilters[r].call(l,t,c,l.opts))return pt.isFunction(i.stop)&&(pt._queueHooks(l.elem,l.opts.queue).stop=pt.proxy(i.stop,i)),i;return pt.map(c,Z,l),pt.isFunction(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),pt.fx.timer(pt.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}function G(t){return(t.match(Pt)||[]).join(" ")}function V(t){return t.getAttribute&&t.getAttribute("class")||""}function Y(t,e,n,i){var o;if(Array.isArray(e))pt.each(e,function(e,o){n||Le.test(t)?i(t,o):Y(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,n,i)});else if(n||"object"!==pt.type(e))i(t,e);else for(o in e)Y(t+"["+o+"]",e[o],n,i)}function X(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(Pt)||[];if(pt.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function J(t,e,n,i){function o(a){var u;return r[a]=!0,pt.each(t[a]||[],function(t,a){var l=a(e,n,i);return"string"!=typeof l||s||r[l]?s?!(u=l):void 0:(e.dataTypes.unshift(l),o(l),!1)}),u}var r={},s=t===je;return o(e.dataTypes[0])||!r["*"]&&o("*")}function Q(t,e){var n,i,o=pt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&pt.extend(!0,t,i),t}function K(t,e,n){for(var i,o,r,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){u.unshift(o);break}if(u[0]in n)r=u[0];else{for(o in n){if(!u[0]||t.converters[o+" "+u[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==u[0]&&u.unshift(r),n[r]}function tt(t,e,n,i){var o,r,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(r=c.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=r,r=c.shift())if("*"===r)r=u;else if("*"!==u&&u!==r){if(!(s=l[u+" "+r]||l["* "+r]))for(o in l)if(a=o.split(" "),a[1]===r&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[o]:!0!==l[o]&&(r=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+r}}}return{state:"success",data:e}}var et=[],nt=t.document,it=Object.getPrototypeOf,ot=et.slice,rt=et.concat,st=et.push,at=et.indexOf,ut={},lt=ut.toString,ct=ut.hasOwnProperty,ht=ct.toString,ft=ht.call(Object),dt={},pt=function(t,e){return new pt.fn.init(t,e)},mt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gt=/^-ms-/,vt=/-([a-z])/g,_t=function(t,e){return e.toUpperCase()};pt.fn=pt.prototype={jquery:"3.2.1",constructor:pt,length:0,toArray:function(){return ot.call(this)},get:function(t){return null==t?ot.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=pt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return pt.each(this,t)},map:function(t){return this.pushStack(pt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:st,sort:et.sort,splice:et.splice},pt.extend=pt.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||pt.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(l&&i&&(pt.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&pt.isPlainObject(n)?n:{},s[e]=pt.extend(l,r,i)):void 0!==i&&(s[e]=i));return s},pt.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===pt.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=pt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==lt.call(t))&&(!(e=it(t))||"function"==typeof(n=ct.call(e,"constructor")&&e.constructor)&&ht.call(n)===ft)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ut[lt.call(t)]||"object":typeof t},globalEval:function(t){n(t)},camelCase:function(t){return t.replace(gt,"ms-").replace(vt,_t)},each:function(t,e){var n,o=0;if(i(t))for(n=t.length;o<n&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},trim:function(t){return null==t?"":(t+"").replace(mt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?pt.merge(n,"string"==typeof t?[t]:t):st.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:at.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!==s&&i.push(t[o]);return i},map:function(t,e,n){var o,r,s=0,a=[];if(i(t))for(o=t.length;s<o;s++)null!=(r=e(t[s],s,n))&&a.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&a.push(r);return rt.apply([],a)},guid:1,proxy:function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),pt.isFunction(t))return i=ot.call(arguments,2),o=function(){return t.apply(e||this,i.concat(ot.call(arguments)))},o.guid=t.guid=t.guid||pt.guid++,o},now:Date.now,support:dt}),"function"==typeof Symbol&&(pt.fn[Symbol.iterator]=et[Symbol.iterator]),pt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ut["[object "+e+"]"]=e.toLowerCase()});var yt=function(t){function e(t,e,n,i){var o,r,s,a,u,c,f,d=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:B)!==E&&A(e),e=e||E,I)){if(11!==p&&(u=mt.exec(t)))if(o=u[1]){if(9===p){if(!(s=e.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(d&&(s=d.getElementById(o))&&R(e,s)&&s.id===o)return n.push(s),n}else{if(u[2])return X.apply(n,e.getElementsByTagName(t)),n;if((o=u[3])&&b.getElementsByClassName&&e.getElementsByClassName)return X.apply(n,e.getElementsByClassName(o)),n}if(b.qsa&&!U[t+" "]&&(!z||!z.test(t))){if(1!==p)d=e,f=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(yt,bt):e.setAttribute("id",a=j),c=C(t),r=c.length;r--;)c[r]="#"+a+" "+h(c[r]);f=c.join(","),d=gt.test(t)&&l(e.parentNode)||e}if(f)try{return X.apply(n,d.querySelectorAll(f)),n}catch(t){}finally{a===j&&e.removeAttribute("id")}}}return L(t.replace(rt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[j]=!0,t}function o(t){var e=E.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&wt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=e.next,r=o||i,s=n&&"parentNode"===r,a=F++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,o);return!1}:function(e,n,u){var l,c,h,f=[$,a];if(u){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(h=e[j]||(e[j]={}),c=h[e.uniqueID]||(h[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=c[r])&&l[0]===$&&l[1]===a)return f[2]=l[2];if(c[r]=f,f[2]=t(e,n,u))return!0}return!1}}function d(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function p(t,n,i){for(var o=0,r=n.length;o<r;o++)e(t,n[o],i);return i}function m(t,e,n,i,o){for(var r,s=[],a=0,u=t.length,l=null!=e;a<u;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),l&&e.push(a)));return s}function g(t,e,n,o,r,s){return o&&!o[j]&&(o=g(o)),r&&!r[j]&&(r=g(r,s)),i(function(i,s,a,u){var l,c,h,f=[],d=[],g=s.length,v=i||p(e||"*",a.nodeType?[a]:a,[]),_=!t||!i&&e?v:m(v,f,t,a,u),y=n?r||(i?t:g||o)?[]:s:_;if(n&&n(_,y,a,u),o)for(l=m(y,d),o(l,[],a,u),c=l.length;c--;)(h=l[c])&&(y[d[c]]=!(_[d[c]]=h));if(i){if(r||t){if(r){for(l=[],c=y.length;c--;)(h=y[c])&&l.push(_[c]=h);r(null,y=[],l,u)}for(c=y.length;c--;)(h=y[c])&&(l=r?Q(i,h):f[c])>-1&&(i[l]=!(s[l]=h))}}else y=m(y===s?y.splice(g,y.length):y),r?r(null,s,y,u):X.apply(s,y)})}function v(t){for(var e,n,i,o=t.length,r=x.relative[t[0].type],s=r||x.relative[" "],a=r?1:0,u=f(function(t){return t===e},s,!0),l=f(function(t){return Q(e,t)>-1},s,!0),c=[function(t,n,i){var o=!r&&(i||n!==k)||((e=n).nodeType?u(t,n,i):l(t,n,i));return e=null,o}];a<o;a++)if(n=x.relative[t[a].type])c=[f(d(c),n)];else{if(n=x.filter[t[a].type].apply(null,t[a].matches),n[j]){for(i=++a;i<o&&!x.relative[t[i].type];i++);return g(a>1&&d(c),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(rt,"$1"),n,a<i&&v(t.slice(a,i)),i<o&&v(t=t.slice(i)),i<o&&h(t))}c.push(n)}return d(c)}function _(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,u,l){var c,h,f,d=0,p="0",g=i&&[],v=[],_=k,y=i||r&&x.find.TAG("*",l),b=$+=null==_?1:Math.random()||.1,w=y.length;for(l&&(k=s===E||s||l);p!==w&&null!=(c=y[p]);p++){if(r&&c){for(h=0,s||c.ownerDocument===E||(A(c),a=!I);f=t[h++];)if(f(c,s||E,a)){u.push(c);break}l&&($=b)}o&&((c=!f&&c)&&d--,i&&g.push(c))}if(d+=p,o&&p!==d){for(h=0;f=n[h++];)f(g,v,s,a);if(i){if(d>0)for(;p--;)g[p]||v[p]||(v[p]=V.call(u));v=m(v)}X.apply(u,v),l&&!i&&v.length>0&&d+n.length>1&&e.uniqueSort(u)}return l&&($=b,k=_),g};return o?i(s):s}var y,b,x,w,T,C,M,L,k,S,P,A,E,N,I,z,O,D,R,j="sizzle"+1*new Date,B=t.document,$=0,F=0,q=n(),Z=n(),U=n(),H=function(t,e){return t===e&&(P=!0),0},W={}.hasOwnProperty,G=[],V=G.pop,Y=G.push,X=G.push,J=G.slice,Q=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",it=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",ot=new RegExp(tt+"+","g"),rt=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),ut=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),lt=new RegExp(it),ct=new RegExp("^"+et+"$"),ht={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,dt=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),_t=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},yt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,bt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},xt=function(){A()},wt=f(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{X.apply(G=J.call(B.childNodes),B.childNodes),G[B.childNodes.length].nodeType}catch(t){X={apply:G.length?function(t,e){Y.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}b=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},A=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:B;return i!==E&&9===i.nodeType&&i.documentElement?(E=i,N=E.documentElement,I=!T(E),B!==E&&(n=E.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),b.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=o(function(t){return t.appendChild(E.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=pt.test(E.getElementsByClassName),b.getById=o(function(t){return N.appendChild(t).id=j,!E.getElementsByName||!E.getElementsByName(j).length}),b.getById?(x.filter.ID=function(t){var e=t.replace(vt,_t);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&I){var n=e.getElementById(t);return n?[n]:[]}}):(x.filter.ID=function(t){var e=t.replace(vt,_t);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&I){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),x.find.TAG=b.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=b.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&I)return e.getElementsByClassName(t)},O=[],z=[],(b.qsa=pt.test(E.querySelectorAll))&&(o(function(t){N.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&z.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||z.push("\\["+tt+"*(?:value|"+K+")"),t.querySelectorAll("[id~="+j+"-]").length||z.push("~="),t.querySelectorAll(":checked").length||z.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||z.push(".#.+[+~]")}),o(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=E.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&z.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&z.push(":enabled",":disabled"),N.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&z.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),z.push(",.*:")})),(b.matchesSelector=pt.test(D=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){b.disconnectedMatch=D.call(t,"*"),D.call(t,"[s!='']:x"),O.push("!=",it)}),z=z.length&&new RegExp(z.join("|")),O=O.length&&new RegExp(O.join("|")),e=pt.test(N.compareDocumentPosition),R=e||pt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},H=e?function(t,e){if(t===e)return P=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!b.sortDetached&&e.compareDocumentPosition(t)===n?t===E||t.ownerDocument===B&&R(B,t)?-1:e===E||e.ownerDocument===B&&R(B,e)?1:S?Q(S,t)-Q(S,e):0:4&n?-1:1)}:function(t,e){if(t===e)return P=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,a=[t],u=[e];if(!o||!r)return t===E?-1:e===E?1:o?-1:r?1:S?Q(S,t)-Q(S,e):0;if(o===r)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;a[i]===u[i];)i++;return i?s(a[i],u[i]):a[i]===B?-1:u[i]===B?1:0},E):E},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==E&&A(t),n=n.replace(ut,"='$1']"),b.matchesSelector&&I&&!U[n+" "]&&(!O||!O.test(n))&&(!z||!z.test(n)))try{var i=D.call(t,n);if(i||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,E,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==E&&A(t),R(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==E&&A(t);var n=x.attrHandle[e.toLowerCase()],i=n&&W.call(x.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==i?i:b.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(yt,bt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(P=!b.detectDuplicates,S=!b.sortStable&&t.slice(0),t.sort(H),P){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return S=null,t},w=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=w(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=w(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&lt.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ot," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,f,d,p,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!u&&!a,y=!1;if(g){if(r){for(;m;){for(f=e;f=f[m];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&_){for(f=g,h=f[j]||(f[j]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),l=c[t]||[],d=l[0]===$&&l[1],y=d&&l[2],f=d&&g.childNodes[d];f=++d&&f&&f[m]||(y=d=0)||p.pop();)if(1===f.nodeType&&++y&&f===e){c[t]=[$,d,y];break}}else if(_&&(f=e,h=f[j]||(f[j]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),l=c[t]||[],d=l[0]===$&&l[1],y=d),!1===y)for(;(f=++d&&f&&f[m]||(y=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++y||(_&&(h=f[j]||(f[j]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),c[t]=[$,y]),f!==e)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,n){var o,r=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[j]?r(n):r.length>1?(o=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=Q(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=M(t.replace(rt,"$1"));return o[j]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(vt,_t),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:i(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,_t).toLowerCase(),function(e){var n;do{if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase()
;return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return dt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[n<0?n+e:n]}),even:u(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(y);return c.prototype=x.filters=x.pseudos,x.setFilters=new c,C=e.tokenize=function(t,n){var i,o,r,s,a,u,l,c=Z[t+" "];if(c)return n?0:c.slice(0);for(a=t,u=[],l=x.preFilter;a;){i&&!(o=st.exec(a))||(o&&(a=a.slice(o[0].length)||a),u.push(r=[])),i=!1,(o=at.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(rt," ")}),a=a.slice(i.length));for(s in x.filter)!(o=ht[s].exec(a))||l[s]&&!(o=l[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):Z(t,u).slice(0)},M=e.compile=function(t,e){var n,i=[],o=[],r=U[t+" "];if(!r){for(e||(e=C(t)),n=e.length;n--;)r=v(e[n]),r[j]?i.push(r):o.push(r);r=U(t,_(o,i)),r.selector=t}return r},L=e.select=function(t,e,n,i){var o,r,s,a,u,c="function"==typeof t&&t,f=!i&&C(t=c.selector||t);if(n=n||[],1===f.length){if(r=f[0]=f[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&I&&x.relative[r[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(vt,_t),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=ht.needsContext.test(t)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((u=x.find[a])&&(i=u(s.matches[0].replace(vt,_t),gt.test(r[0].type)&&l(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&h(r)))return X.apply(n,i),n;break}}return(c||M(t,f))(i,e,!I,n,!e||gt.test(t)&&l(e.parentNode)||e),n},b.sortStable=j.split("").sort(H).join("")===j,b.detectDuplicates=!!P,A(),b.sortDetached=o(function(t){return 1&t.compareDocumentPosition(E.createElement("fieldset"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(K,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);pt.find=yt,pt.expr=yt.selectors,pt.expr[":"]=pt.expr.pseudos,pt.uniqueSort=pt.unique=yt.uniqueSort,pt.text=yt.getText,pt.isXMLDoc=yt.isXML,pt.contains=yt.contains,pt.escapeSelector=yt.escape;var bt=function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&pt(t).is(n))break;i.push(t)}return i},xt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},wt=pt.expr.match.needsContext,Tt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ct=/^.[^:#\[\.,]*$/;pt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?pt.find.matchesSelector(i,t)?[i]:[]:pt.find.matches(t,pt.grep(e,function(t){return 1===t.nodeType}))},pt.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(pt(t).filter(function(){for(e=0;e<i;e++)if(pt.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)pt.find(t,o[e],n);return i>1?pt.uniqueSort(n):n},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&wt.test(t)?pt(t):t||[],!1).length}});var Mt,Lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(pt.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||Mt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Lt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof pt?e[0]:e,pt.merge(this,pt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:nt,!0)),Tt.test(i[1])&&pt.isPlainObject(e))for(i in e)pt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return o=nt.getElementById(i[2]),o&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):pt.isFunction(t)?void 0!==n.ready?n.ready(t):t(pt):pt.makeArray(t,this)}).prototype=pt.fn,Mt=pt(nt);var kt=/^(?:parents|prev(?:Until|All))/,St={children:!0,contents:!0,next:!0,prev:!0};pt.fn.extend({has:function(t){var e=pt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(pt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,o=this.length,r=[],s="string"!=typeof t&&pt(t);if(!wt.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&pt.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?pt.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?at.call(pt(t),this[0]):at.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(pt.uniqueSort(pt.merge(this.get(),pt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),pt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return bt(t,"parentNode")},parentsUntil:function(t,e,n){return bt(t,"parentNode",n)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return bt(t,"nextSibling")},prevAll:function(t){return bt(t,"previousSibling")},nextUntil:function(t,e,n){return bt(t,"nextSibling",n)},prevUntil:function(t,e,n){return bt(t,"previousSibling",n)},siblings:function(t){return xt((t.parentNode||{}).firstChild,t)},children:function(t){return xt(t.firstChild)},contents:function(t){return o(t,"iframe")?t.contentDocument:(o(t,"template")&&(t=t.content||t),pt.merge([],t.childNodes))}},function(t,e){pt.fn[t]=function(n,i){var o=pt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=pt.filter(i,o)),this.length>1&&(St[t]||pt.uniqueSort(o),kt.test(t)&&o.reverse()),this.pushStack(o)}});var Pt=/[^\x20\t\r\n\f]+/g;pt.Callbacks=function(t){t="string"==typeof t?a(t):pt.extend({},t);var e,n,i,o,r=[],s=[],u=-1,l=function(){for(o=o||t.once,i=e=!0;s.length;u=-1)for(n=s.shift();++u<r.length;)!1===r[u].apply(n[0],n[1])&&t.stopOnFalse&&(u=r.length,n=!1);t.memory||(n=!1),e=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!e&&(u=r.length-1,s.push(n)),function e(n){pt.each(n,function(n,i){pt.isFunction(i)?t.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==pt.type(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return pt.each(arguments,function(t,e){for(var n;(n=pt.inArray(e,r,n))>-1;)r.splice(n,1),n<=u&&u--}),this},has:function(t){return t?pt.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||e||(r=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},pt.extend({Deferred:function(e){var n=[["notify","progress",pt.Callbacks("memory"),pt.Callbacks("memory"),2],["resolve","done",pt.Callbacks("once memory"),pt.Callbacks("once memory"),0,"resolved"],["reject","fail",pt.Callbacks("once memory"),pt.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return pt.Deferred(function(e){pt.each(n,function(n,i){var o=pt.isFunction(t[i[4]])&&t[i[4]];r[i[1]](function(){var t=o&&o.apply(this,arguments);t&&pt.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(e,i,o){function r(e,n,i,o){return function(){var a=this,c=arguments,h=function(){var t,h;if(!(e<s)){if((t=i.apply(a,c))===n.promise())throw new TypeError("Thenable self-resolution");h=t&&("object"==typeof t||"function"==typeof t)&&t.then,pt.isFunction(h)?o?h.call(t,r(s,n,u,o),r(s,n,l,o)):(s++,h.call(t,r(s,n,u,o),r(s,n,l,o),r(s,n,u,n.notifyWith))):(i!==u&&(a=void 0,c=[t]),(o||n.resolveWith)(a,c))}},f=o?h:function(){try{h()}catch(t){pt.Deferred.exceptionHook&&pt.Deferred.exceptionHook(t,f.stackTrace),e+1>=s&&(i!==l&&(a=void 0,c=[t]),n.rejectWith(a,c))}};e?f():(pt.Deferred.getStackHook&&(f.stackTrace=pt.Deferred.getStackHook()),t.setTimeout(f))}}var s=0;return pt.Deferred(function(t){n[0][3].add(r(0,t,pt.isFunction(o)?o:u,t.notifyWith)),n[1][3].add(r(0,t,pt.isFunction(e)?e:u)),n[2][3].add(r(0,t,pt.isFunction(i)?i:l))}).promise()},promise:function(t){return null!=t?pt.extend(t,o):o}},r={};return pt.each(n,function(t,e){var s=e[2],a=e[5];o[e[1]]=s.add,a&&s.add(function(){i=a},n[3-t][2].disable,n[0][2].lock),s.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=s.fireWith}),o.promise(r),e&&e.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),o=ot.call(arguments),r=pt.Deferred(),s=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?ot.call(arguments):n,--e||r.resolveWith(i,o)}};if(e<=1&&(c(t,r.done(s(n)).resolve,r.reject,!e),"pending"===r.state()||pt.isFunction(o[n]&&o[n].then)))return r.then();for(;n--;)c(o[n],s(n),r.reject);return r.promise()}});var At=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&At.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},pt.readyException=function(e){t.setTimeout(function(){throw e})};var Et=pt.Deferred();pt.fn.ready=function(t){return Et.then(t).catch(function(t){pt.readyException(t)}),this},pt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--pt.readyWait:pt.isReady)||(pt.isReady=!0,!0!==t&&--pt.readyWait>0||Et.resolveWith(nt,[pt]))}}),pt.ready.then=Et.then,"complete"===nt.readyState||"loading"!==nt.readyState&&!nt.documentElement.doScroll?t.setTimeout(pt.ready):(nt.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h));var Nt=function(t,e,n,i,o,r,s){var a=0,u=t.length,l=null==n;if("object"===pt.type(n)){o=!0;for(a in n)Nt(t,e,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,pt.isFunction(i)||(s=!0),l&&(s?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(pt(t),n)})),e))for(;a<u;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:l?e.call(t):u?e(t[0],n):r},It=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};f.uid=1,f.prototype={cache:function(t){var e=t[this.expando];return e||(e={},It(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[pt.camelCase(e)]=n;else for(i in e)o[pt.camelCase(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][pt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(pt.camelCase):(e=pt.camelCase(e),e=e in i?[e]:e.match(Pt)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||pt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!pt.isEmptyObject(e)}};var zt=new f,Ot=new f,Dt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Rt=/[A-Z]/g;pt.extend({hasData:function(t){return Ot.hasData(t)||zt.hasData(t)},data:function(t,e,n){return Ot.access(t,e,n)},removeData:function(t,e){Ot.remove(t,e)},_data:function(t,e,n){return zt.access(t,e,n)},_removeData:function(t,e){zt.remove(t,e)}}),pt.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=Ot.get(r),1===r.nodeType&&!zt.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=pt.camelCase(i.slice(5)),p(r,i,o[i])));zt.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){Ot.set(this,t)}):Nt(this,function(e){var n;if(r&&void 0===e){if(void 0!==(n=Ot.get(r,t)))return n;if(void 0!==(n=p(r,t)))return n}else this.each(function(){Ot.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ot.remove(this,t)})}}),pt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=zt.get(t,e),n&&(!i||Array.isArray(n)?i=zt.access(t,e,pt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=pt.queue(t,e),i=n.length,o=n.shift(),r=pt._queueHooks(t,e),s=function(){pt.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return zt.get(t,n)||zt.access(t,n,{empty:pt.Callbacks("once memory").add(function(){zt.remove(t,[e+"queue",n])})})}}),pt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?pt.queue(this[0],t):void 0===e?this:this.each(function(){var n=pt.queue(this,t,e);pt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&pt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){pt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=pt.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=zt.get(r[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var jt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bt=new RegExp("^(?:([+-])=|)("+jt+")([a-z%]*)$","i"),$t=["Top","Right","Bottom","Left"],Ft=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&pt.contains(t.ownerDocument,t)&&"none"===pt.css(t,"display")},qt=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o},Zt={};pt.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ft(this)?pt(this).show():pt(this).hide()})}});var Ut=/^(?:checkbox|radio)$/i,Ht=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Wt=/^$|\/(?:java|ecma)script/i,Gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td;var Vt=/<|&#?\w+;/;!function(){var t=nt.createDocumentFragment(),e=t.appendChild(nt.createElement("div")),n=nt.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),dt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",dt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Yt=nt.documentElement,Xt=/^key/,Jt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qt=/^([^.]*)(?:\.(.+)|)/;pt.event={global:{},add:function(t,e,n,i,o){var r,s,a,u,l,c,h,f,d,p,m,g=zt.get(t);if(g)for(n.handler&&(r=n,n=r.handler,o=r.selector),o&&pt.find.matchesSelector(Yt,o),n.guid||(n.guid=pt.guid++),(u=g.events)||(u=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==pt&&pt.event.triggered!==e.type?pt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Pt)||[""],l=e.length;l--;)a=Qt.exec(e[l])||[],d=m=a[1],p=(a[2]||"").split(".").sort(),d&&(h=pt.event.special[d]||{},d=(o?h.delegateType:h.bindType)||d,h=pt.event.special[d]||{},c=pt.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&pt.expr.match.needsContext.test(o),namespace:p.join(".")},r),(f=u[d])||(f=u[d]=[],f.delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,c):f.push(c),pt.event.global[d]=!0)},remove:function(t,e,n,i,o){var r,s,a,u,l,c,h,f,d,p,m,g=zt.hasData(t)&&zt.get(t);if(g&&(u=g.events)){for(e=(e||"").match(Pt)||[""],l=e.length;l--;)if(a=Qt.exec(e[l])||[],d=m=a[1],p=(a[2]||"").split(".").sort(),d){for(h=pt.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,f=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=f.length;r--;)c=f[r],!o&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(r,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||pt.removeEvent(t,d,g.handle),delete u[d])}else for(d in u)pt.event.remove(t,d+e[l],n,i,!0);pt.isEmptyObject(u)&&zt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,s,a=pt.event.fix(t),u=new Array(arguments.length),l=(zt.get(this,"events")||{})[a.type]||[],c=pt.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=pt.event.handlers.call(this,a,l),e=0;(o=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(i=((pt.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,u))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,o,r,s,a=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(r=[],s={},n=0;n<u;n++)i=e[n],o=i.selector+" ",void 0===s[o]&&(s[o]=i.needsContext?pt(o,this).index(l)>-1:pt.find(o,this,null,[l]).length),s[o]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return l=this,u<e.length&&a.push({elem:l,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(pt.Event.prototype,t,{enumerable:!0,configurable:!0,get:pt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[pt.expando]?t:new pt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&o(this,"input"))return this.click(),!1},_default:function(t){return o(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},pt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},pt.Event=function(t,e){if(!(this instanceof pt.Event))return new pt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?x:w,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&pt.extend(this,e),this.timeStamp=t&&t.timeStamp||pt.now(),this[pt.expando]=!0},pt.Event.prototype={constructor:pt.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=x,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=x,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=x,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},pt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Jt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},pt.event.addProp),pt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){pt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===i||pt.contains(i,o))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),pt.fn.extend({on:function(t,e,n,i){return C(this,t,e,n,i)},one:function(t,e,n,i){return C(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,pt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=w),this.each(function(){pt.event.remove(this,t,n,e)})}});var Kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,te=/<script|<style|<link/i,ee=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^true\/(.*)/,ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pt.extend({htmlPrefilter:function(t){return t.replace(Kt,"<$1></$2>")},clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),u=pt.contains(t.ownerDocument,t);if(!(dt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||pt.isXMLDoc(t)))for(s=_(a),r=_(t),i=0,o=r.length;i<o;i++)P(r[i],s[i]);if(e)if(n)for(r=r||_(t),s=s||_(a),i=0,o=r.length;i<o;i++)S(r[i],s[i]);else S(t,a);return s=_(a,"script"),s.length>0&&y(s,!u&&_(t,"script")),a},cleanData:function(t){for(var e,n,i,o=pt.event.special,r=0;void 0!==(n=t[r]);r++)if(It(n)){if(e=n[zt.expando]){if(e.events)for(i in e.events)o[i]?pt.event.remove(n,i):pt.removeEvent(n,i,e.handle);n[zt.expando]=void 0}n[Ot.expando]&&(n[Ot.expando]=void 0)}}}),pt.fn.extend({detach:function(t){return E(this,t,!0)},remove:function(t){return E(this,t)},text:function(t){return Nt(this,function(t){return void 0===t?pt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return A(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){M(this,t).appendChild(t)}})},prepend:function(){return A(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=M(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(pt.cleanData(_(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return pt.clone(this,t,e)})},html:function(t){return Nt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!te.test(t)&&!Gt[(Ht.exec(t)||["",""])[1].toLowerCase()]){t=pt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(pt.cleanData(_(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return A(this,arguments,function(e){var n=this.parentNode;pt.inArray(this,t)<0&&(pt.cleanData(_(this)),n&&n.replaceChild(e,this))},t)}}),pt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){pt.fn[t]=function(t){for(var n,i=[],o=pt(t),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),pt(o[s])[e](n),st.apply(i,n.get());return this.pushStack(i)}});var oe=/^margin/,re=new RegExp("^("+jt+")(?!px)[a-z%]+$","i"),se=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Yt.appendChild(s);var e=t.getComputedStyle(a);n="1%"!==e.top,r="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",o="4px"===e.marginRight,Yt.removeChild(s),a=null}}var n,i,o,r,s=nt.createElement("div"),a=nt.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",dt.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),pt.extend(dt,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),o},reliableMarginLeft:function(){return e(),r}}))}();var ae=/^(none|table(?!-c[ea]).+)/,ue=/^--/,le={position:"absolute",visibility:"hidden",display:"block"},ce={letterSpacing:"0",fontWeight:"400"},he=["Webkit","Moz","ms"],fe=nt.createElement("div").style;pt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=N(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=pt.camelCase(e),u=ue.test(e),l=t.style;if(u||(e=O(a)),s=pt.cssHooks[e]||pt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e];r=typeof n,"string"===r&&(o=Bt.exec(n))&&o[1]&&(n=m(t,e,o),r="number"),null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(pt.cssNumber[a]?"":"px")),dt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var o,r,s,a=pt.camelCase(e);return ue.test(e)||(e=O(a)),s=pt.cssHooks[e]||pt.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=N(t,e,i)),"normal"===o&&e in ce&&(o=ce[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),pt.each(["height","width"],function(t,e){pt.cssHooks[e]={get:function(t,n,i){if(n)return!ae.test(pt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?j(t,e,i):qt(t,le,function(){return j(t,e,i)})},set:function(t,n,i){var o,r=i&&se(t),s=i&&R(t,e,i,"border-box"===pt.css(t,"boxSizing",!1,r),r);return s&&(o=Bt.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=pt.css(t,e)),D(t,n,s)}}}),pt.cssHooks.marginLeft=I(dt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(N(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),pt.each({margin:"",padding:"",border:"Width"},function(t,e){pt.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+$t[i]+e]=r[i]||r[i-2]||r[0];return o}},oe.test(t)||(pt.cssHooks[t+e].set=D)}),pt.fn.extend({css:function(t,e){return Nt(this,function(t,e,n){var i,o,r={},s=0;if(Array.isArray(e)){for(i=se(t),o=e.length;s<o;s++)r[e[s]]=pt.css(t,e[s],!1,i);return r}return void 0!==n?pt.style(t,e,n):pt.css(t,e)},t,e,arguments.length>1)}}),pt.Tween=B,B.prototype={constructor:B,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||pt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(pt.cssNumber[n]?"":"px")},cur:function(){var t=B.propHooks[this.prop];return t&&t.get?t.get(this):B.propHooks._default.get(this)},run:function(t){var e,n=B.propHooks[this.prop];return this.options.duration?this.pos=e=pt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=pt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){pt.fx.step[t.prop]?pt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[pt.cssProps[t.prop]]&&!pt.cssHooks[t.prop]?t.elem[t.prop]=t.now:pt.style(t.elem,t.prop,t.now+t.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},pt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},pt.fx=B.prototype.init,pt.fx.step={};var de,pe,me=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;pt.Animation=pt.extend(W,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return m(n.elem,t,Bt.exec(e),n),n}]},tweener:function(t,e){pt.isFunction(t)?(e=t,t=["*"]):t=t.match(Pt);for(var n,i=0,o=t.length;i<o;i++)n=t[i],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(e)},prefilters:[U],prefilter:function(t,e){e?W.prefilters.unshift(t):W.prefilters.push(t)}}),pt.speed=function(t,e,n){var i=t&&"object"==typeof t?pt.extend({},t):{complete:n||!n&&e||pt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!pt.isFunction(e)&&e};return pt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in pt.fx.speeds?i.duration=pt.fx.speeds[i.duration]:i.duration=pt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){pt.isFunction(i.old)&&i.old.call(this),i.queue&&pt.dequeue(this,i.queue)},i},pt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ft).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=pt.isEmptyObject(t),r=pt.speed(e,n,i),s=function(){var e=W(this,pt.extend({},t),r);(o||zt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=pt.timers,s=zt.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&ge.test(o)&&i(s[o])
;for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||pt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=zt.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=pt.timers,s=i?i.length:0;for(n.finish=!0,pt.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),pt.each(["toggle","show","hide"],function(t,e){var n=pt.fn[e];pt.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(q(e,!0),t,i,o)}}),pt.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){pt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),pt.timers=[],pt.fx.tick=function(){var t,e=0,n=pt.timers;for(de=pt.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||pt.fx.stop(),de=void 0},pt.fx.timer=function(t){pt.timers.push(t),pt.fx.start()},pt.fx.interval=13,pt.fx.start=function(){pe||(pe=!0,$())},pt.fx.stop=function(){pe=null},pt.fx.speeds={slow:600,fast:200,_default:400},pt.fn.delay=function(e,n){return e=pt.fx?pt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var o=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(o)}})},function(){var t=nt.createElement("input"),e=nt.createElement("select"),n=e.appendChild(nt.createElement("option"));t.type="checkbox",dt.checkOn=""!==t.value,dt.optSelected=n.selected,t=nt.createElement("input"),t.value="t",t.type="radio",dt.radioValue="t"===t.value}();var ve,_e=pt.expr.attrHandle;pt.fn.extend({attr:function(t,e){return Nt(this,pt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){pt.removeAttr(this,t)})}}),pt.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?pt.prop(t,e,n):(1===r&&pt.isXMLDoc(t)||(o=pt.attrHooks[e.toLowerCase()]||(pt.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void pt.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:(i=pt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!dt.radioValue&&"radio"===e&&o(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(Pt);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?pt.removeAttr(t,n):t.setAttribute(n,n),n}},pt.each(pt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=_e[e]||pt.find.attr;_e[e]=function(t,e,i){var o,r,s=e.toLowerCase();return i||(r=_e[s],_e[s]=o,o=null!=n(t,e,i)?s:null,_e[s]=r),o}});var ye=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;pt.fn.extend({prop:function(t,e){return Nt(this,pt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[pt.propFix[t]||t]})}}),pt.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&pt.isXMLDoc(t)||(e=pt.propFix[e]||e,o=pt.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=pt.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),dt.optSelected||(pt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),pt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pt.propFix[this.toLowerCase()]=this}),pt.fn.extend({addClass:function(t){var e,n,i,o,r,s,a,u=0;if(pt.isFunction(t))return this.each(function(e){pt(this).addClass(t.call(this,e,V(this)))});if("string"==typeof t&&t)for(e=t.match(Pt)||[];n=this[u++];)if(o=V(n),i=1===n.nodeType&&" "+G(o)+" "){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=G(i),o!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,o,r,s,a,u=0;if(pt.isFunction(t))return this.each(function(e){pt(this).removeClass(t.call(this,e,V(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Pt)||[];n=this[u++];)if(o=V(n),i=1===n.nodeType&&" "+G(o)+" "){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=G(i),o!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):pt.isFunction(t)?this.each(function(n){pt(this).toggleClass(t.call(this,n,V(this),e),e)}):this.each(function(){var e,i,o,r;if("string"===n)for(i=0,o=pt(this),r=t.match(Pt)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||(e=V(this),e&&zt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":zt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+G(V(n))+" ").indexOf(e)>-1)return!0;return!1}});var xe=/\r/g;pt.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=pt.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,pt(this).val()):t,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=pt.map(o,function(t){return null==t?"":t+""})),(e=pt.valHooks[this.type]||pt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return(e=pt.valHooks[o.type]||pt.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(xe,""):null==n?"":n)}}}),pt.extend({valHooks:{option:{get:function(t){var e=pt.find.attr(t,"value");return null!=e?e:G(pt.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,a="select-one"===t.type,u=a?null:[],l=a?s+1:r.length;for(i=s<0?l:a?s:0;i<l;i++)if(n=r[i],(n.selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!o(n.parentNode,"optgroup"))){if(e=pt(n).val(),a)return e;u.push(e)}return u},set:function(t,e){for(var n,i,o=t.options,r=pt.makeArray(e),s=o.length;s--;)i=o[s],(i.selected=pt.inArray(pt.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),pt.each(["radio","checkbox"],function(){pt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=pt.inArray(pt(t).val(),e)>-1}},dt.checkOn||(pt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we=/^(?:focusinfocus|focusoutblur)$/;pt.extend(pt.event,{trigger:function(e,n,i,o){var r,s,a,u,l,c,h,f=[i||nt],d=ct.call(e,"type")?e.type:e,p=ct.call(e,"namespace")?e.namespace.split("."):[];if(s=a=i=i||nt,3!==i.nodeType&&8!==i.nodeType&&!we.test(d+pt.event.triggered)&&(d.indexOf(".")>-1&&(p=d.split("."),d=p.shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,e=e[pt.expando]?e:new pt.Event(d,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:pt.makeArray(n,[e]),h=pt.event.special[d]||{},o||!h.trigger||!1!==h.trigger.apply(i,n))){if(!o&&!h.noBubble&&!pt.isWindow(i)){for(u=h.delegateType||d,we.test(u+d)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(i.ownerDocument||nt)&&f.push(a.defaultView||a.parentWindow||t)}for(r=0;(s=f[r++])&&!e.isPropagationStopped();)e.type=r>1?u:h.bindType||d,c=(zt.get(s,"events")||{})[e.type]&&zt.get(s,"handle"),c&&c.apply(s,n),(c=l&&s[l])&&c.apply&&It(s)&&(e.result=c.apply(s,n),!1===e.result&&e.preventDefault());return e.type=d,o||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),n)||!It(i)||l&&pt.isFunction(i[d])&&!pt.isWindow(i)&&(a=i[l],a&&(i[l]=null),pt.event.triggered=d,i[d](),pt.event.triggered=void 0,a&&(i[l]=a)),e.result}},simulate:function(t,e,n){var i=pt.extend(new pt.Event,n,{type:t,isSimulated:!0});pt.event.trigger(i,null,e)}}),pt.fn.extend({trigger:function(t,e){return this.each(function(){pt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return pt.event.trigger(t,e,n,!0)}}),pt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){pt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),pt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),dt.focusin="onfocusin"in t,dt.focusin||pt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){pt.event.simulate(e,t.target,pt.event.fix(t))};pt.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=zt.access(i,e);o||i.addEventListener(t,n,!0),zt.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=zt.access(i,e)-1;o?zt.access(i,e,o):(i.removeEventListener(t,n,!0),zt.remove(i,e))}}});var Te=t.location,Ce=pt.now(),Me=/\?/;pt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||pt.error("Invalid XML: "+e),n};var Le=/\[\]$/,ke=/\r?\n/g,Se=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;pt.param=function(t,e){var n,i=[],o=function(t,e){var n=pt.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!pt.isPlainObject(t))pt.each(t,function(){o(this.name,this.value)});else for(n in t)Y(n,t[n],e,o);return i.join("&")},pt.fn.extend({serialize:function(){return pt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=pt.prop(this,"elements");return t?pt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!pt(this).is(":disabled")&&Pe.test(this.nodeName)&&!Se.test(t)&&(this.checked||!Ut.test(t))}).map(function(t,e){var n=pt(this).val();return null==n?null:Array.isArray(n)?pt.map(n,function(t){return{name:e.name,value:t.replace(ke,"\r\n")}}):{name:e.name,value:n.replace(ke,"\r\n")}}).get()}});var Ae=/%20/g,Ee=/#.*$/,Ne=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,ze=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Oe=/^(?:GET|HEAD)$/,De=/^\/\//,Re={},je={},Be="*/".concat("*"),$e=nt.createElement("a");$e.href=Te.href,pt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:ze.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Q(Q(t,pt.ajaxSettings),e):Q(pt.ajaxSettings,t)},ajaxPrefilter:X(Re),ajaxTransport:X(je),ajax:function(e,n){function i(e,n,i,a){var l,f,d,b,x,w=n;c||(c=!0,u&&t.clearTimeout(u),o=void 0,s=a||"",T.readyState=e>0?4:0,l=e>=200&&e<300||304===e,i&&(b=K(p,T,i)),b=tt(p,b,T,l),l?(p.ifModified&&(x=T.getResponseHeader("Last-Modified"),x&&(pt.lastModified[r]=x),(x=T.getResponseHeader("etag"))&&(pt.etag[r]=x)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=b.state,f=b.data,d=b.error,l=!d)):(d=w,!e&&w||(w="error",e<0&&(e=0))),T.status=e,T.statusText=(n||w)+"",l?v.resolveWith(m,[f,w,T]):v.rejectWith(m,[T,w,d]),T.statusCode(y),y=void 0,h&&g.trigger(l?"ajaxSuccess":"ajaxError",[T,p,l?f:d]),_.fireWith(m,[T,w]),h&&(g.trigger("ajaxComplete",[T,p]),--pt.active||pt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var o,r,s,a,u,l,c,h,f,d,p=pt.ajaxSetup({},n),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?pt(m):pt.event,v=pt.Deferred(),_=pt.Callbacks("once memory"),y=p.statusCode||{},b={},x={},w="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Ie.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)T.always(t[T.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||w;return o&&o.abort(e),i(0,e),this}};if(v.promise(T),p.url=((e||p.url||Te.href)+"").replace(De,Te.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Pt)||[""],null==p.crossDomain){l=nt.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=$e.protocol+"//"+$e.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=pt.param(p.data,p.traditional)),J(Re,p,n,T),c)return T;h=pt.event&&p.global,h&&0==pt.active++&&pt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Oe.test(p.type),r=p.url.replace(Ee,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ae,"+")):(d=p.url.slice(r.length),p.data&&(r+=(Me.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Ne,"$1"),d=(Me.test(r)?"&":"?")+"_="+Ce+++d),p.url=r+d),p.ifModified&&(pt.lastModified[r]&&T.setRequestHeader("If-Modified-Since",pt.lastModified[r]),pt.etag[r]&&T.setRequestHeader("If-None-Match",pt.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Be+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)T.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(m,T,p)||c))return T.abort();if(w="abort",_.add(p.complete),T.done(p.success),T.fail(p.error),o=J(je,p,n,T)){if(T.readyState=1,h&&g.trigger("ajaxSend",[T,p]),c)return T;p.async&&p.timeout>0&&(u=t.setTimeout(function(){T.abort("timeout")},p.timeout));try{c=!1,o.send(b,i)}catch(t){if(c)throw t;i(-1,t)}}else i(-1,"No Transport");return T},getJSON:function(t,e,n){return pt.get(t,e,n,"json")},getScript:function(t,e){return pt.get(t,void 0,e,"script")}}),pt.each(["get","post"],function(t,e){pt[e]=function(t,n,i,o){return pt.isFunction(n)&&(o=o||i,i=n,n=void 0),pt.ajax(pt.extend({url:t,type:e,dataType:o,data:n,success:i},pt.isPlainObject(t)&&t))}}),pt._evalUrl=function(t){return pt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},pt.fn.extend({wrapAll:function(t){var e;return this[0]&&(pt.isFunction(t)&&(t=t.call(this[0])),e=pt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return pt.isFunction(t)?this.each(function(e){pt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=pt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=pt.isFunction(t);return this.each(function(n){pt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){pt(this).replaceWith(this.childNodes)}),this}}),pt.expr.pseudos.hidden=function(t){return!pt.expr.pseudos.visible(t)},pt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},pt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Fe={0:200,1223:204},qe=pt.ajaxSettings.xhr();dt.cors=!!qe&&"withCredentials"in qe,dt.ajax=qe=!!qe,pt.ajaxTransport(function(e){var n,i;if(dt.cors||qe&&!e.crossDomain)return{send:function(o,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)a.setRequestHeader(s,o[s]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Fe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),pt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),pt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return pt.globalEval(t),t}}}),pt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),pt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,o){e=pt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),nt.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ze=[],Ue=/(=)\?(?=&|$)|\?\?/;pt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ze.pop()||pt.expando+"_"+Ce++;return this[t]=!0,t}}),pt.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,s,a=!1!==e.jsonp&&(Ue.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ue.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=pt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ue,"$1"+o):!1!==e.jsonp&&(e.url+=(Me.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||pt.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},i.always(function(){void 0===r?pt(t).removeProp(o):t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,Ze.push(o)),s&&pt.isFunction(r)&&r(s[0]),s=r=void 0}),"script"}),dt.createHTMLDocument=function(){var t=nt.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),pt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,o,r;return e||(dt.createHTMLDocument?(e=nt.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=nt.location.href,e.head.appendChild(i)):e=nt),o=Tt.exec(t),r=!n&&[],o?[e.createElement(o[1])]:(o=b([t],e,r),r&&r.length&&pt(r).remove(),pt.merge([],o.childNodes))},pt.fn.load=function(t,e,n){var i,o,r,s=this,a=t.indexOf(" ");return a>-1&&(i=G(t.slice(a)),t=t.slice(0,a)),pt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&pt.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?pt("<div>").append(pt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},pt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){pt.fn[e]=function(t){return this.on(e,t)}}),pt.expr.pseudos.animated=function(t){return pt.grep(pt.timers,function(e){return t===e.elem}).length},pt.offset={setOffset:function(t,e,n){var i,o,r,s,a,u,l,c=pt.css(t,"position"),h=pt(t),f={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=pt.css(t,"top"),u=pt.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(r+u).indexOf("auto")>-1,l?(i=h.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(u)||0),pt.isFunction(e)&&(e=e.call(t,n,pt.extend({},a))),null!=e.top&&(f.top=e.top-a.top+s),null!=e.left&&(f.left=e.left-a.left+o),"using"in e?e.using.call(t,f):h.css(f)}},pt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){pt.offset.setOffset(this,t,e)});var e,n,i,o,r=this[0];if(r)return r.getClientRects().length?(i=r.getBoundingClientRect(),e=r.ownerDocument,n=e.documentElement,o=e.defaultView,{top:i.top+o.pageYOffset-n.clientTop,left:i.left+o.pageXOffset-n.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===pt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),o(t[0],"html")||(i=t.offset()),i={top:i.top+pt.css(t[0],"borderTopWidth",!0),left:i.left+pt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-pt.css(n,"marginTop",!0),left:e.left-i.left-pt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===pt.css(t,"position");)t=t.offsetParent;return t||Yt})}}),pt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;pt.fn[t]=function(i){return Nt(this,function(t,i,o){var r;if(pt.isWindow(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):t[i]=o},t,i,arguments.length)}}),pt.each(["top","left"],function(t,e){pt.cssHooks[e]=I(dt.pixelPosition,function(t,n){if(n)return n=N(t,e),re.test(n)?pt(t).position()[e]+"px":n})}),pt.each({Height:"height",Width:"width"},function(t,e){pt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){pt.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return Nt(this,function(e,n,o){var r;return pt.isWindow(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?pt.css(e,n,a):pt.style(e,n,o,a)},e,s?o:void 0,s)}})}),pt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),pt.holdReady=function(t){t?pt.readyWait++:pt.ready(!0)},pt.isArray=Array.isArray,pt.parseJSON=JSON.parse,pt.nodeName=o,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pt});var He=t.jQuery,We=t.$;return pt.noConflict=function(e){return t.$===pt&&(t.$=We),e&&t.jQuery===pt&&(t.jQuery=He),pt},e||(t.jQuery=t.$=pt),pt}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("leaflet",["exports"],e):e(t.L=t.L||{})}(this,function(t){"use strict";function e(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++){o=arguments[n];for(e in o)t[e]=o[e]}return t}function n(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}function i(t){return t._leaflet_id=t._leaflet_id||++fe,t._leaflet_id}function o(t,e,n){var i,o,r,s;return s=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function r(t,e,n){var i=e[1],o=e[0],r=i-o;return t===i&&n?t:((t-o)%r+r)%r+o}function s(){return!1}function a(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function l(t){return u(t).split(/\s+/)}function c(t,e){t.hasOwnProperty("options")||(t.options=t.options?he(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function h(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}function f(t,e){return t.replace(de,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}function d(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function m(t){var e=+new Date,n=Math.max(0,16-(e-ge));return ge=e+n,window.setTimeout(t,n)}function g(t,e,i){return i&&ve===m?void t.call(e):ve.call(window,n(t,e))}function v(t){t&&_e.call(window,t)}function _(){}function y(t){if(L&&L.Mixin){t=pe(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function b(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}function x(t,e,n){return t instanceof b?t:pe(t)?new b(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new b(t.x,t.y):new b(t,e,n)}function w(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function T(t,e){return!t||t instanceof w?t:new w(t,e)}function C(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function M(t,e){return t instanceof C?t:new C(t,e)}function k(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function S(t,e,n){return t instanceof k?t:pe(t)&&"object"!=typeof t[0]?3===t.length?new k(t[0],t[1],t[2]):2===t.length?new k(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new k(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new k(t,e,n)}function P(t,e,n,i){return pe(t)?(this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3])):(this._a=t,this._b=e,this._c=n,void(this._d=i))}function A(t,e,n,i){return new P(t,e,n,i)}function E(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t,e){var n,i,o,r,s,a,u="";for(n=0,o=t.length;n<o;n++){for(s=t[n],i=0,r=s.length;i<r;i++)a=s[i],u+=(i?"L":"M")+a.x+" "+a.y;u+=e?sn?"z":"x":""}return u||"M0 0"}function I(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function z(t,e,n,i){return"touchstart"===e?D(t,n,i):"touchmove"===e?F(t,n,i):"touchend"===e&&q(t,n,i),this}function O(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(ln,i,!1):"touchmove"===e?t.removeEventListener(cn,i,!1):"touchend"===e&&(t.removeEventListener(hn,i,!1),t.removeEventListener(fn,i,!1)),this}function D(t,e,i){var o=n(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(dn.indexOf(t.target.tagName)<0))return;Q(t)}$(t,e)});t["_leaflet_touchstart"+i]=o,t.addEventListener(ln,o,!1),mn||(document.documentElement.addEventListener(ln,R,!0),document.documentElement.addEventListener(cn,j,!0),document.documentElement.addEventListener(hn,B,!0),document.documentElement.addEventListener(fn,B,!0),mn=!0)}function R(t){pn[t.pointerId]=t,gn++}function j(t){pn[t.pointerId]&&(pn[t.pointerId]=t)}function B(t){delete pn[t.pointerId],gn--}function $(t,e){t.touches=[];for(var n in pn)t.touches.push(pn[n]);t.changedTouches=[t],e(t)}function F(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&$(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(cn,i,!1)}function q(t,e,n){var i=function(t){$(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(hn,i,!1),t.addEventListener(fn,i,!1)}function Z(t,e,n){function i(t){var e;if(Ke){if(!ze||"mouse"===t.pointerType)return;e=gn}else e=t.touches.length;if(!(e>1)){var n=Date.now(),i=n-(r||n);s=t.touches?t.touches[0]:t,a=i>0&&i<=u,r=n}}function o(t){if(a&&!s.cancelBubble){if(Ke){if(!ze||"mouse"===t.pointerType)return;var n,i,o={};for(i in s)n=s[i],o[i]=n&&n.bind?n.bind(s):n;s=o}s.type="dblclick",e(s),r=null}}var r,s,a=!1,u=250;return t[yn+vn+n]=i,t[yn+_n+n]=o,t[yn+"dblclick"+n]=e,t.addEventListener(vn,i,!1),t.addEventListener(_n,o,!1),t.addEventListener("dblclick",e,!1),this}function U(t,e){var n=t[yn+vn+e],i=t[yn+_n+e],o=t[yn+"dblclick"+e];return t.removeEventListener(vn,n,!1),t.removeEventListener(_n,i,!1),ze||t.removeEventListener("dblclick",o,!1),this}function H(t,e,n,i){if("object"==typeof e)for(var o in e)G(t,o,e[o],n);else{e=l(e);for(var r=0,s=e.length;r<s;r++)G(t,e[r],n,i)}return this}function W(t,e,n,i){if("object"==typeof e)for(var o in e)V(t,o,e[o],n);else if(e){e=l(e);for(var r=0,s=e.length;r<s;r++)V(t,e[r],n,i)}else{for(var a in t[bn])V(t,a,t[bn][a]);delete t[bn]}}function G(t,e,n,o){var r=e+i(n)+(o?"_"+i(o):"");if(t[bn]&&t[bn][r])return this;var s=function(e){return n.call(o||t,e||window.event)},a=s;Ke&&0===e.indexOf("touch")?z(t,e,s,r):!tn||"dblclick"!==e||!Z||Ke&&Be?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,ot(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1)):("click"===e&&De&&(s=function(t){rt(t,a)}),t.addEventListener(e,s,!1)):"attachEvent"in t&&t.attachEvent("on"+e,s):Z(t,s,r),t[bn]=t[bn]||{},t[bn][r]=s}function V(t,e,n,o){var r=e+i(n)+(o?"_"+i(o):""),s=t[bn]&&t[bn][r];return s?(Ke&&0===e.indexOf("touch")?O(t,e,r):tn&&"dblclick"===e&&U?U(t,r):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),void(t[bn][r]=null)):this}function Y(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,it(t),this}function X(t){return G(t,"mousewheel",Y)}function J(t){return H(t,"mousedown touchstart dblclick",Y),G(t,"click",nt),this}function Q(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function K(t){return Q(t),Y(t),this}function tt(t,e){if(!e)return new b(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new b(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}function et(t){return ze?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/xn:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function nt(t){wn[t.type]=!0}function it(t){var e=wn[t.type];return wn[t.type]=!1,e}function ot(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}function rt(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=Me&&n-Me;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?void K(t):(Me=n,void e(t))}function st(t){return"string"==typeof t?document.getElementById(t):t}function at(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ut(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function lt(t){var e=t.parentNode;e&&e.removeChild(t)}function ct(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ht(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function ft(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function dt(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=vt(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function pt(t,e){
if(void 0!==t.classList)for(var n=l(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!dt(t,e)){var r=vt(t);gt(t,(r?r+" ":"")+e)}}function mt(t,e){void 0!==t.classList?t.classList.remove(e):gt(t,u((" "+vt(t)+" ").replace(" "+e+" "," ")))}function gt(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function vt(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function _t(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&yt(t,e)}function yt(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}function bt(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function xt(t,e,n){var i=e||new b(0,0);t.style[Cn]=(He?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function wt(t,e){t._leaflet_pos=e,Ve?xt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Tt(t){return t._leaflet_pos||new b(0,0)}function Ct(){H(window,"dragstart",Q)}function Mt(){W(window,"dragstart",Q)}function Lt(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(kt(),Sn=t,Pn=t.style.outline,t.style.outline="none",H(window,"keydown",kt))}function kt(){Sn&&(Sn.style.outline=Pn,Sn=void 0,Pn=void 0,W(window,"keydown",kt))}function St(t,e){return new Nn(t,e)}function Pt(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=zt(t,n),t=Nt(t,n)}function At(t,e,n){return Math.sqrt(Bt(t,e,n,!0))}function Et(t,e,n){return Bt(t,e,n)}function Nt(t,e){var n=t.length,i=typeof Uint8Array!=void 0+""?Uint8Array:Array,o=new i(n);o[0]=o[n-1]=1,It(t,o,e,0,n-1);var r,s=[];for(r=0;r<n;r++)o[r]&&s.push(t[r]);return s}function It(t,e,n,i,o){var r,s,a,u=0;for(s=i+1;s<=o-1;s++)(a=Bt(t[s],t[i],t[o],!0))>u&&(r=s,u=a);u>n&&(e[r]=1,It(t,e,n,i,r),It(t,e,n,r,o))}function zt(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)jt(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n}function Ot(t,e,n,i,o){var r,s,a,u=i?Zn:Rt(t,n),l=Rt(e,n);for(Zn=l;;){if(!(u|l))return[t,e];if(u&l)return!1;r=u||l,s=Dt(t,e,r,n,o),a=Rt(s,n),r===u?(t=s,u=a):(e=s,l=a)}}function Dt(t,e,n,i,o){var r,s,a=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(r=t.x+a*(c.y-t.y)/u,s=c.y):4&n?(r=t.x+a*(l.y-t.y)/u,s=l.y):2&n?(r=c.x,s=t.y+u*(c.x-t.x)/a):1&n&&(r=l.x,s=t.y+u*(l.x-t.x)/a),new b(r,s,o)}function Rt(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function jt(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function Bt(t,e,n,i){var o,r=e.x,s=e.y,a=n.x-r,u=n.y-s,l=a*a+u*u;return l>0&&(o=((t.x-r)*a+(t.y-s)*u)/l,o>1?(r=n.x,s=n.y):o>0&&(r+=a*o,s+=u*o)),a=t.x-r,u=t.y-s,i?a*a+u*u:new b(r,s)}function $t(t){return!pe(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Ft(t,e,n){var i,o,r,s,a,u,l,c,h,f=[1,4,2,8];for(o=0,l=t.length;o<l;o++)t[o]._code=Rt(t[o],e);for(s=0;s<4;s++){for(c=f[s],i=[],o=0,l=t.length,r=l-1;o<l;r=o++)a=t[o],u=t[r],a._code&c?u._code&c||(h=Dt(u,a,c,e,n),h._code=Rt(h,e),i.push(h)):(u._code&c&&(h=Dt(u,a,c,e,n),h._code=Rt(h,e),i.push(h)),i.push(a));t=i}return t}function qt(t){return new ci(t)}function Zt(t,e){return new di(t,e)}function Ut(t,e){return new mi(t,e)}function Ht(t,e,n){return new gi(t,e,n)}function Wt(t,e){return new vi(t,e)}function Gt(t,e){return new _i(t,e)}function Vt(t,e){var n,i,o,r,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Yt;if(!a&&!s)return null;switch(s.type){case"Point":return n=c(a),l?l(t,n):new di(n);case"MultiPoint":for(o=0,r=a.length;o<r;o++)n=c(a[o]),u.push(l?l(t,n):new di(n));return new ui(u);case"LineString":case"MultiLineString":return i=Xt(a,"LineString"===s.type?0:1,c),new vi(i,e);case"Polygon":case"MultiPolygon":return i=Xt(a,"Polygon"===s.type?1:2,c),new _i(i,e);case"GeometryCollection":for(o=0,r=s.geometries.length;o<r;o++){var h=Vt({geometry:s.geometries[o],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new ui(u);default:throw new Error("Invalid GeoJSON object.")}}function Yt(t){return new k(t[1],t[0],t[2])}function Xt(t,e,n){for(var i,o=[],r=0,s=t.length;r<s;r++)i=e?Xt(t[r],e-1,n):(n||Yt)(t[r]),o.push(i);return o}function Jt(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Qt(t,e,n,i){for(var o=[],r=0,s=t.length;r<s;r++)o.push(e?Qt(t[r],e-1,n,i):Jt(t[r],i));return!e&&n&&o.push(o[0]),o}function Kt(t,n){return t.feature?e({},t.feature,{geometry:n}):te(n)}function te(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function ee(t,e){return new yi(t,e)}function ne(t,e,n){return new Ci(t,e,n)}function ie(t){return new Ai(t)}function oe(t){return new Ei(t)}function re(t,e){return new Ni(t,e)}function se(t,e){return new Ii(t,e)}function ae(t){return rn?new Oi(t):null}function ue(t){return sn||an?new Bi(t):null}function le(t,e){return new $i(t,e)}function ce(){return window.L=Vi,this}var he=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),fe=0,de=/\{ *([\w_\-]+) *\}/g,pe=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},me="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",ge=0,ve=window.requestAnimationFrame||p("RequestAnimationFrame")||m,_e=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},ye=(Object.freeze||Object)({extend:e,create:he,bind:n,lastId:fe,stamp:i,throttle:o,wrapNum:r,falseFn:s,formatNum:a,trim:u,splitWords:l,setOptions:c,getParamString:h,template:f,isArray:pe,indexOf:d,emptyImageUrl:me,requestFn:ve,cancelFn:_e,requestAnimFrame:g,cancelAnimFrame:v});_.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=n.__super__=this.prototype,o=he(i);o.constructor=n,n.prototype=o;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&"__super__"!==r&&(n[r]=this[r]);return t.statics&&(e(n,t.statics),delete t.statics),t.includes&&(y(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(he(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},n},_.include=function(t){return e(this.prototype,t),this},_.mergeOptions=function(t){return e(this.prototype.options,t),this},_.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var be={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else{t=l(t);for(var o=0,r=t.length;o<r;o++)this._on(t[o],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=l(t);for(var o=0,r=t.length;o<r;o++)this._off(t[o],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},r=i,s=0,a=r.length;s<a;s++)if(r[s].fn===e&&r[s].ctx===n)return;r.push(o)},_off:function(t,e,n){var i,o,r;if(this._events&&(i=this._events[t])){if(!e){for(o=0,r=i.length;o<r;o++)i[o].fn=s;return void delete this._events[t]}if(n===this&&(n=void 0),i)for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===e)return a.fn=s,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}},fire:function(t,n,i){if(!this.listens(t,i))return this;var o=e({},n,{type:t,target:this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var s=0,a=r.length;s<a;s++){var u=r[s];u.fn.call(u.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var r=n(function(){this.off(t,e,i).off(t,r,i)},this);return this.on(t,e,i).on(t,r,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[i(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[i(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target},t),!0)}};be.addEventListener=be.on,be.removeEventListener=be.clearAllEventListeners=be.off,be.addOneTimeEventListener=be.once,be.fireEvent=be.fire,be.hasEventListeners=be.listens;var xe=_.extend(be);b.prototype={clone:function(){return new b(this.x,this.y)},add:function(t){return this.clone()._add(x(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(x(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new b(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new b(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=x(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=x(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=x(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},w.prototype={extend:function(t){return t=x(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new b((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new b(this.min.x,this.max.y)},getTopRight:function(){return new b(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof b?x(t):T(t),t instanceof w?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=T(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,s=o.y>=e.y&&i.y<=n.y;return r&&s},overlaps:function(t){t=T(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,s=o.y>e.y&&i.y<n.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},C.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof k)e=t,n=t;else{if(!(t instanceof C))return t?this.extend(S(t)||M(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new k(e.lat,e.lng),this._northEast=new k(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new C(new k(e.lat-i,e.lng-o),new k(n.lat+i,n.lng+o))},getCenter:function(){return new k((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new k(this.getNorth(),this.getWest())},getSouthEast:function(){return new k(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof k||"lat"in t?S(t):M(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof C?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=M(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,s=o.lng>=e.lng&&i.lng<=n.lng;return r&&s},overlaps:function(t){t=M(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,s=o.lng>e.lng&&i.lng<n.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=M(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},k.prototype={equals:function(t,e){return!!t&&(t=S(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return Te.distance(this,S(t))},wrap:function(){return Te.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return M([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new k(this.lat,this.lng,this.alt)}};var we={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new w(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?r(t.lng,this.wrapLng,!0):t.lng;return new k(this.wrapLat?r(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var r=t.getSouthWest(),s=t.getNorthEast();return new C(new k(r.lat-i,r.lng-o),new k(s.lat-i,s.lng-o))}},Te=e({},we,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(r,1))}}),Ce={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new b(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new k((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new w([-t,-t],[t,t])}()};P.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new b((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Me,Le,ke,Se,Pe=e({},Te,{code:"EPSG:3857",projection:Ce,transformation:function(){var t=.5/(Math.PI*Ce.R);return A(t,.5,-t,.5)}()}),Ae=e({},Pe,{code:"EPSG:900913"}),Ee=document.documentElement.style,Ne="ActiveXObject"in window,Ie=Ne&&!document.addEventListener,ze="msLaunchUri"in navigator&&!("documentMode"in document),Oe=I("webkit"),De=I("android"),Re=I("android 2")||I("android 3"),je=!!window.opera,Be=I("chrome"),$e=I("gecko")&&!Oe&&!je&&!Ne,Fe=!Be&&I("safari"),qe=I("phantom"),Ze="OTransition"in Ee,Ue=0===navigator.platform.indexOf("Win"),He=Ne&&"transition"in Ee,We="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Re,Ge="MozPerspective"in Ee,Ve=!window.L_DISABLE_3D&&(He||We||Ge)&&!Ze&&!qe,Ye="undefined"!=typeof orientation||I("mobile"),Xe=Ye&&Oe,Je=Ye&&We,Qe=!window.PointerEvent&&window.MSPointerEvent,Ke=!(!window.PointerEvent&&!Qe),tn=!window.L_NO_TOUCH&&(Ke||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),en=Ye&&je,nn=Ye&&$e,on=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,rn=function(){return!!document.createElement("canvas").getContext}(),sn=!(!document.createElementNS||!E("svg").createSVGRect),an=!sn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),un=(Object.freeze||Object)({ie:Ne,ielt9:Ie,edge:ze,webkit:Oe,android:De,android23:Re,opera:je,chrome:Be,gecko:$e,safari:Fe,phantom:qe,opera12:Ze,win:Ue,ie3d:He,webkit3d:We,gecko3d:Ge,any3d:Ve,mobile:Ye,mobileWebkit:Xe,mobileWebkit3d:Je,msPointer:Qe,pointer:Ke,touch:tn,mobileOpera:en,mobileGecko:nn,retina:on,canvas:rn,svg:sn,vml:an}),ln=Qe?"MSPointerDown":"pointerdown",cn=Qe?"MSPointerMove":"pointermove",hn=Qe?"MSPointerUp":"pointerup",fn=Qe?"MSPointerCancel":"pointercancel",dn=["INPUT","SELECT","OPTION"],pn={},mn=!1,gn=0,vn=Qe?"MSPointerDown":Ke?"pointerdown":"touchstart",_n=Qe?"MSPointerUp":Ke?"pointerup":"touchend",yn="_leaflet_",bn="_leaflet_events",xn=Ue&&Be?2*window.devicePixelRatio:$e?window.devicePixelRatio:1,wn={},Tn=(Object.freeze||Object)({on:H,off:W,stopPropagation:Y,disableScrollPropagation:X,disableClickPropagation:J,preventDefault:Q,stop:K,getMousePosition:tt,getWheelDelta:et,fakeStop:nt,skipped:it,isExternalTarget:ot,addListener:H,removeListener:W}),Cn=bt(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),Mn=bt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ln="webkitTransition"===Mn||"OTransition"===Mn?Mn+"End":"transitionend";if("onselectstart"in document)Le=function(){H(window,"selectstart",Q)},ke=function(){W(window,"selectstart",Q)};else{var kn=bt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Le=function(){if(kn){var t=document.documentElement.style;Se=t[kn],t[kn]="none"}},ke=function(){kn&&(document.documentElement.style[kn]=Se,Se=void 0)}}var Sn,Pn,An=(Object.freeze||Object)({TRANSFORM:Cn,TRANSITION:Mn,TRANSITION_END:Ln,get:st,getStyle:at,create:ut,remove:lt,empty:ct,toFront:ht,toBack:ft,hasClass:dt,addClass:pt,removeClass:mt,setClass:gt,getClass:vt,setOpacity:_t,testProp:bt,setTransform:xt,setPosition:wt,getPosition:Tt,disableTextSelection:Le,enableTextSelection:ke,disableImageDrag:Ct,enableImageDrag:Mt,preventOutline:Lt,restoreOutline:kt}),En=xe.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Tt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=g(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),wt(this._el,n),this.fire("step")},_complete:function(){v(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Nn=xe.extend({options:{crs:Pe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=c(this,e),this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(S(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=Mn&&Ve&&!en&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),H(this._proxy,Ln,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){if(n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(S(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i){void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan));if(this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(t,n),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Ve?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Ve?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof b?t:this.latLngToContainerPoint(t),s=r.subtract(o).multiplyBy(1-1/i),a=this.containerPointToLatLng(o.add(s));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():M(t);var n=x(e.paddingTopLeft||e.padding||[0,0]),i=x(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(s.add(a).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(t=M(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=x(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new En,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){pt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function i(t){var e=t?-1:1,n=t?v:m,i=v*v-m*m+e*b*b*_*_,o=2*n*b*_,r=i/o,s=Math.sqrt(r*r+1)-r;return s<1e-9?-18:Math.log(s)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function s(t){return o(t)/r(t)}function a(t){return m*(r(x)/r(x+y*t))}function u(t){return m*(r(x)*s(x+y*t)-o(x))/b}function l(t){return 1-Math.pow(1-t,1.5)}function c(){var n=(Date.now()-w)/C,i=l(n)*T;n<=1?(this._flyToFrame=g(c,this),this._move(this.unproject(h.add(f.subtract(h).multiplyBy(u(i)/_)),p),this.getScaleZoom(m/a(i),p),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},!1===n.animate||!Ve)return this.setView(t,e,n);this._stop();var h=this.project(this.getCenter()),f=this.project(t),d=this.getSize(),p=this._zoom;t=S(t),e=void 0===e?p:e;var m=Math.max(d.x,d.y),v=m*this.getZoomScale(p,e),_=f.distanceTo(h)||1,y=1.42,b=y*y,x=i(0),w=Date.now(),T=(i(1)-x)/y,C=n.duration?1e3*n.duration:1e3*T*.8;return this._moveStart(!0),c.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=M(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,M(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=i.divideBy(2).round(),s=o.divideBy(2).round(),a=r.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),o=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new k(e,n),o=i.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var s=this.getBoundsZoom(o);this.setView(i,r.maxZoom?Math.min(s,r.maxZoom):s)}var a={latlng:i,bounds:o,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(a[u]=t.coords[u]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)lt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=ut("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new C(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=M(t),n=x(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),l=T(this.project(a,i),this.project(s,i)).getSize(),c=Ve?this.options.zoomSnap:1,h=u.x/l.x,f=u.y/l.y,d=e?Math.max(h,f):Math.min(h,f);return i=this.getScaleZoom(d,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(o,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new b(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new w(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(S(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(x(t),e)},layerPointToLatLng:function(t){var e=x(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(S(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(S(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(M(t))},distance:function(t,e){return this.options.crs.distance(S(t),S(e))},containerPointToLayerPoint:function(t){return x(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return x(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(x(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(S(t)))},mouseEventToContainerPoint:function(t){return tt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=st(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");H(e,"scroll",this._onScroll,this),this._containerId=i(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve,pt(t,"leaflet-container"+(tn?" leaflet-touch":"")+(on?" leaflet-retina":"")+(Ie?" leaflet-oldie":"")+(Fe?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=at(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wt(this._mapPane,new b(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),
this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(t.markerPane,"leaflet-zoom-hide"),pt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){wt(this._mapPane,new b(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return v(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){wt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[i(this._container)]=this;var e=t?W:H;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Ve&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){v(this._resizeRequest),this._resizeRequest=g(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,o=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[i(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!ot(s,t))break;if(o.push(n),r)break}if(s===this._container)break;s=s.parentNode}return o.length||a||r||!ot(s,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!it(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Lt(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var o=e({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n)),i.length)){var r=i[0];"contextmenu"===n&&r.listens(n,!0)&&Q(t);var s={originalEvent:t};if("keypress"!==t.type){var a=r.options&&"icon"in r.options;s.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?r.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(n,s,!0),s.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==d(this._mouseEvents,n))return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Tt(this._mapPane)||new b(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return T([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new w(i.subtract(o),i.add(o)),s=this._getBoundsOffset(r,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new w(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=T(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),r=i.max.subtract(t.max);return new b(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=Ve?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ut("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Cn,n=this._proxy.style[e];xt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();xt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(g(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,i,o){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(n(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),g(function(){this._moveEnd(!0)},this))}}),In=_.extend({options:{position:"topright"},initialize:function(t){c(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return pt(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),zn=function(t){return new In(t)};Nn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var r=n+t+" "+n+o;e[t+o]=ut("div",r,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=ut("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)lt(this._controlCorners[t]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var On=In.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){c(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return In.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(i(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(pt(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):mt(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ut("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),J(e),X(e);var o=this._form=ut("form",t+"-list");i&&(this._map.on("click",this.collapse,this),De||H(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ut("a",t+"-toggle",e);r.href="#",r.title="Layers",tn?(H(r,"click",K),H(r,"click",this.expand,this)):H(r,"focus",this.expand,this),H(o,"click",function(){setTimeout(n(this._onInputClick,this),0)},this),i||this.expand(),this._baseLayersList=ut("div",t+"-base",o),this._separator=ut("div",t+"-separator",o),this._overlaysList=ut("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&i(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(L.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ct(this._baseLayersList),ct(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(i(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),this._layerControlInputs.push(e),e.layerId=i(t.layer),H(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var s=document.createElement("div");return n.appendChild(s),s.appendChild(e),s.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,i=this._layerControlInputs,o=[],r=[];this._handlingClick=!0;for(var s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?o.push(e):!t.checked&&n&&r.push(e);for(s=0;s<r.length;s++)this._map.removeLayer(r[s]);for(s=0;s<o.length;s++)this._map.addLayer(o[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Dn=function(t,e,n){return new On(t,e,n)},Rn=In.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ut("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var r=ut("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),J(r),H(r,"click",K),H(r,"click",o,this),H(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";mt(this._zoomInButton,e),mt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&pt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&pt(this._zoomInButton,e)}});Nn.mergeOptions({zoomControl:!0}),Nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Rn,this.addControl(this.zoomControl))});var jn=function(t){return new Rn(t)},Bn=In.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ut("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ut("div",e,n)),t.imperial&&(this._iScale=ut("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),$n=function(t){return new Bn(t)},Fn=In.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){c(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ut("div","leaflet-control-attribution"),J(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Nn.mergeOptions({attributionControl:!0}),Nn.addInitHook(function(){this.options.attributionControl&&(new Fn).addTo(this)});var qn=function(t){return new Fn(t)};In.Layers=On,In.Zoom=Rn,In.Scale=Bn,In.Attribution=Fn,zn.layers=Dn,zn.zoom=jn,zn.scale=$n,zn.attribution=qn;var Zn,Un=_.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),Hn={Events:be},Wn=!1,Gn=tn?"touchstart mousedown":"mousedown",Vn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Yn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Xn=xe.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){c(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(H(this._dragStartTarget,Gn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(L.Draggable._dragging===this&&this.finishDrag(),W(this._dragStartTarget,Gn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!dt(this._element,"leaflet-zoom-anim")&&!(Wn||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(Wn=this,this._preventOutline&&Lt(this._element),Ct(),Le(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new b(e.clientX,e.clientY),H(document,Yn[t.type],this._onMove,this),H(document,Vn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new b(e.clientX,e.clientY),i=n.subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(Q(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Tt(this._element).subtract(i),pt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,v(this._animRequest),this._lastEvent=t,this._animRequest=g(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),wt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in Yn)W(document,Yn[t],this._onMove,this),W(document,Vn[t],this._onUp,this);Mt(),ke(),this._moved&&this._moving&&(v(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Wn=!1}}),Jn=(Object.freeze||Object)({simplify:Pt,pointToSegmentDistance:At,closestPointOnSegment:Et,clipSegment:Ot,_getEdgeIntersection:Dt,_getBitCode:Rt,_sqClosestPointOnSegment:Bt,_flat:$t}),Qn=(Object.freeze||Object)({clipPolygon:Ft}),Kn={project:function(t){return new b(t.lng,t.lat)},unproject:function(t){return new k(t.y,t.x)},bounds:new w([-180,-90],[180,90])},ti={R:6378137,R_MINOR:6356752.314245179,bounds:new w([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),s=r*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),r/2);return i=-n*Math.log(Math.max(a,1e-10)),new b(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=r*Math.sin(a),e=Math.pow((1-e)/(1+e),r/2),l=Math.PI/2-2*Math.atan(s*e)-a,a+=l;return new k(a*n,t.x*n/i)}},ei=(Object.freeze||Object)({LonLat:Kn,Mercator:ti,SphericalMercator:Ce}),ni=e({},Te,{code:"EPSG:3395",projection:ti,transformation:function(){var t=.5/(Math.PI*ti.R);return A(t,.5,-t,.5)}()}),ii=e({},Te,{code:"EPSG:4326",projection:Kn,transformation:A(1/180,1,-1/180,.5)}),oi=e({},we,{projection:Kn,transformation:A(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});we.Earth=Te,we.EPSG3395=ni,we.EPSG3857=Pe,we.EPSG900913=Ae,we.EPSG4326=ii,we.Simple=oi;var ri=xe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[i(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[i(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Nn.include({addLayer:function(t){var e=i(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=i(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&i(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?pe(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[i(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=i(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var si=ri.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return i(t)}}),ai=function(t){return new si(t)},ui=si.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),si.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),si.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new C;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),li=function(t){return new ui(t)},ci=_.extend({initialize:function(t){c(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=x(i),r=x("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return on&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),hi=ci.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return hi.imagePath||(hi.imagePath=this._detectIconPath()),(this.options.imagePath||hi.imagePath)+ci.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ut("div","leaflet-default-icon-path",document.body),e=at(t,"background-image")||at(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,"")}}),fi=Un.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,i=Tt(e._icon),o=e._map.layerPointToLatLng(i);n&&wt(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),di=ri.extend({options:{icon:new hi,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){c(this,e),this._latlng=S(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=S(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),pt(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(pt(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(t){wt(this._icon,t),this._shadow&&wt(this._shadow,t),
this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;_t(this._icon,t),this._shadow&&_t(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),pi=ri.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return c(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(tn?10:0)}}),mi=pi.extend({options:{fill:!0,radius:10},initialize:function(t,e){c(this,e),this._latlng=S(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=S(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return pi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new w(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),gi=mi.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),c(this,n),this._latlng=S(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new C(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:pi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===Te.distance){var o=Math.PI/180,r=this._mRadius/Te.R/o,s=n.project([e+r,t]),a=n.project([e-r,t]),u=s.add(a).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(l*o))/(Math.cos(e*o)*Math.cos(l*o)))/o;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(u.x-n.project([l,t-c]).x),1),this._radiusY=Math.max(Math.round(u.y-s.y),1)}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),vi=pi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){c(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,r=Bt,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],l=1,c=u.length;l<c;l++){e=u[l-1],n=u[l];var h=r(t,e,n,!0);h<i&&(i=h,o=r(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,s,a=this._rings[0],u=a.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<u-1;t++)if(o=a[t],r=a[t+1],n=o.distanceTo(r),(i+=n)>e)return s=(i-e)/n,this._map.layerPointToLatLng([r.x-s*(r.x-o.x),r.y-s*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=S(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new C,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return $t(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=$t(t),i=0,o=t.length;i<o;i++)n?(e[i]=S(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new w;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new b(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,o,r=t[0]instanceof k,s=t.length;if(r){for(o=[],i=0;i<s;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,i,o,r,s,a,u=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(a=this._rings[e],n=0,r=a.length;n<r-1;n++)(s=Ot(a[n],a[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===a[n+1]&&n!==r-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=Pt(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,o,r,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(a=this._parts[n],i=0,s=a.length,o=s-1;i<s;o=i++)if((e||0!==i)&&At(t,a[o],a[i])<=u)return!0;return!1}}),_i=vi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,s,a,u,l=this._rings[0],c=l.length;if(!c)return null;for(r=s=a=0,t=0,e=c-1;t<c;e=t++)n=l[t],i=l[e],o=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*o,a+=(n.y+i.y)*o,r+=3*o;return u=0===r?l[0]:[s/r,a/r],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=vi.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof k&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){vi.prototype._setLatLngs.call(this,t),$t(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $t(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new b(e,e);if(t=new w(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var i,o=0,r=this._rings.length;o<r;o++)i=Ft(this._rings[o],t,!0),i.length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,o,r,s,a,u,l=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(e=this._parts[o],r=0,u=e.length,s=u-1;r<u;s=r++)n=e[r],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||vi.prototype._containsPoint.call(this,t,!0)}}),yi=ui.extend({initialize:function(t,e){c(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=pe(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)i=o[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var s=Vt(t,r);return s?(s.feature=te(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),bi={toGeoJSON:function(t){return Kt(this,{type:"Point",coordinates:Jt(this.getLatLng(),t)})}};di.include(bi),gi.include(bi),mi.include(bi),vi.include({toGeoJSON:function(t){var e=!$t(this._latlngs),n=Qt(this._latlngs,e?1:0,!1,t);return Kt(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),_i.include({toGeoJSON:function(t){var e=!$t(this._latlngs),n=e&&!$t(this._latlngs[0]),i=Qt(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Kt(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),si.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Kt(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(n)i.push(o.geometry);else{var r=te(o);"FeatureCollection"===r.type?i.push.apply(i,r.features):i.push(r)}}}),n?Kt(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var xi=ee,wi=ri.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=M(e),c(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ht(this._image),this},bringToBack:function(){return this._map&&ft(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=ut("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":"")+(this.options.className||""));t.onselectstart=s,t.onmousemove=s,t.onload=n(this.fire,this,"load"),t.onerror=n(this._overlayOnError,this,"error"),this.options.crossOrigin&&(t.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;xt(this._image,n,e)},_reset:function(){var t=this._image,e=new w(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();wt(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){_t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ti=function(t,e,n){return new wi(t,e,n)},Ci=wi.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t=this._image=ut("video","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=s,t.onmousemove=s,t.onloadeddata=n(this.fire,this,"load"),pe(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var e=0;e<this._url.length;e++){var i=ut("source");i.src=this._url[e],t.appendChild(i)}}}),Mi=ri.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){c(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&_t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&_t(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(_t(this._container,0),this._removeTimeout=setTimeout(n(lt,void 0,this._container),200)):lt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=S(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ht(this._container),this},bringToBack:function(){return this._map&&ft(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=x(this.options.offset),n=this._getAnchor();this._zoomAnimated?wt(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),Li=Mi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Mi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof pi||this._source.on("preclick",Y))},onRemove:function(t){Mi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof pi||this._source.off("preclick",Y))},getEvents:function(){var t=Mi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ut("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ut("div",t+"-content-wrapper",e);if(this._contentNode=ut("div",t+"-content",n),J(n),X(this._contentNode),H(n,"contextmenu",Y),this._tipContainer=ut("div",t+"-tip-container",e),this._tip=ut("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ut("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",H(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",pt(t,r)):mt(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();wt(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(at(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new b(this._containerLeft,-n-this._containerBottom);o._add(Tt(this._container));var r=t.layerPointToContainerPoint(o),s=x(this.options.autoPanPadding),a=x(this.options.autoPanPaddingTopLeft||s),u=x(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),c=0,h=0;r.x+i+u.x>l.x&&(c=r.x+i-l.x+u.x),r.x-c-a.x<0&&(c=r.x-a.x),r.y+n+u.y>l.y&&(h=r.y+n-l.y+u.y),r.y-h-a.y<0&&(h=r.y-a.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),K(t)},_getAnchor:function(){return x(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ki=function(t,e){return new Li(t,e)};Nn.mergeOptions({closePopupOnClick:!0}),Nn.include({openPopup:function(t,e,n){return t instanceof Li||(t=new Li(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),ri.include({bindPopup:function(t,e){return t instanceof Li?(c(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Li(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof ri||(e=t,t=this),t instanceof ui)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return K(t),e instanceof pi?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Si=Mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Mi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Mi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Mi.prototype.getEvents.call(this);return tn&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ut("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,s=n.offsetWidth,a=n.offsetHeight,u=x(this.options.offset),l=this._getAnchor();"top"===r?t=t.add(x(-s/2+u.x,-a+u.y+l.y,!0)):"bottom"===r?t=t.subtract(x(s/2-u.x,-u.y,!0)):"center"===r?t=t.subtract(x(s/2+u.x,a/2-l.y+u.y,!0)):"right"===r||"auto"===r&&o.x<i.x?(r="right",t=t.add(x(u.x+l.x,l.y-a/2+u.y,!0))):(r="left",t=t.subtract(x(s+l.x-u.x,a/2-l.y-u.y,!0))),mt(n,"leaflet-tooltip-right"),mt(n,"leaflet-tooltip-left"),mt(n,"leaflet-tooltip-top"),mt(n,"leaflet-tooltip-bottom"),pt(n,"leaflet-tooltip-"+r),wt(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&_t(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return x(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pi=function(t,e){return new Si(t,e)};Nn.include({openTooltip:function(t,e,n){return t instanceof Si||(t=new Si(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),ri.include({bindTooltip:function(t,e){return t instanceof Si?(c(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Si(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),tn&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof ri||(e=t,t=this),t instanceof ui)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(pt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(mt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Ai=ci.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=x(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});ci.Default=hi;var Ei=ri.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ye,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){c(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),lt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(ht(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ft(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof b?t:new b(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie){_t(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);_t(o.el,r),r<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this))}},_onOpaqueTile:s,_initContainer:function(){this._container||(this._container=ut("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(lt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||(i=this._levels[t]={},i.el=ut("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:s,_onRemoveLevel:s,_onCreateLevel:s,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)lt(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),r=Math.floor(e/2),s=n-1,a=new b(+o,+r);a.z=+s;var u=this._tileCoordsToKey(a),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),s>i&&this._retainParent(o,r,s,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var s=new b(o,r);s.z=n+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(o,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();Ve?xt(t.el,o,i):wt(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new w(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){
var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),r=o.getCenter(),s=[],a=this.options.keepBuffer,u=new w(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new b(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var h=o.min.y;h<=o.max.y;h++)for(var f=o.min.x;f<=o.max.x;f++){var d=new b(f,h);d.z=this._tileZoom,this._isValidTile(d)&&(this._tiles[this._tileCoordsToKey(d)]||s.push(d))}if(s.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var p=document.createDocumentFragment();for(f=0;f<s.length;f++)this._addTile(s[f],p);this._level.el.appendChild(p)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return M(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n),r=e.unproject(i,t.z),s=e.unproject(o,t.z),a=new C(r,s);return this.options.noWrap||e.wrapLatLngBounds(a),a},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new b(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(lt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=s,t.onmousemove=s,Ie&&this.options.opacity<1&&_t(t,this.options.opacity),De&&!Re&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),o=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&g(n(this._tileReady,this,t,null,r)),wt(r,i),this._tiles[o]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var o=this._tileCoordsToKey(t);(i=this._tiles[o])&&(i.loaded=+new Date,this._map._fadeAnimated?(_t(i.el,0),v(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(pt(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie||!this._map._fadeAnimated?g(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new b(this._wrapX?r(t.x,this._wrapX):t.x,this._wrapY?r(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new w(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Ni=Ei.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=c(this,e),e.detectRetina&&on&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),De||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return H(i,"load",n(this._tileOnLoad,this,e,i)),H(i,"error",n(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var n={r:on?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return f(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Ie?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.src!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=s,e.onerror=s,e.complete||(e.src=me,lt(e)))}}),Ii=Ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var o in n)o in this.options||(i[o]=n[o]);n=c(this,n),i.width=i.height=n.tileSize*(n.detectRetina&&on?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ni.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),i=this._crs.project(e.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===ii?[i.y,n.x,n.y,i.x]:[n.x,i.y,i.x,n.y]).join(","),r=Ni.prototype.getTileUrl.call(this,t);return r+h(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});Ni.WMS=Ii,re.wms=se;var zi=ri.extend({options:{padding:.1},initialize:function(t){c(this,t),i(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=Tt(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),s=this._map.project(t,e),a=s.subtract(r),u=o.multiplyBy(-n).add(i).add(o).subtract(a);Ve?xt(this._container,u,n):wt(this._container,u)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new w(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Oi=zi.extend({getEvents:function(){var t=zi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");H(t,"mousemove",o(this._onMouseMove,32,this),this),H(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),H(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,lt(this._container),W(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},zi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=on?2:1;wt(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",on&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[i(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||g(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new w,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,r,s=t._parts,a=s.length,u=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<a;n++){for(i=0,o=s[n].length;i<o;i++)r=s[n][i],u[i?"lineTo":"moveTo"](r.x,r.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=t._radius,o=(t._radiusY||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)e=o.layer,e.options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(nt(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(mt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,o=this._drawFirst;o;o=o.next)n=o.layer,n.options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(pt(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),Di=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Ri={_initContainer:function(){this._container=ut("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Di("shape");pt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Di("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;lt(e),t.removeInteractiveTarget(e),delete this._layers[i(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=Di("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=pe(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=Di("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ht(t._container)},_bringToBack:function(t){ft(t._container)}},ji=an?Di:E,Bi=zi.extend({getEvents:function(){var t=zi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=ji("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ji("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),W(this._container),delete this._container,delete this._rootGroup},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){zi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),wt(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ji("path");t.options.className&&pt(e,t.options.className),t.options.interactive&&pt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){lt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[i(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,N(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,i=t._radiusY||n,o="a"+n+","+i+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+o+2*n+",0 "+o+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ht(t._path)},_bringToBack:function(t){ft(t._path)}});an&&Bi.include(Ri),Nn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&ae()||ue()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=Bi&&ue({pane:t})||Oi&&ae({pane:t}),this._paneRenderers[t]=e),e}});var $i=_i.extend({initialize:function(t,e){_i.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=M(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Bi.create=ji,Bi.pointsToPath=N,yi.geometryToLayer=Vt,yi.coordsToLatLng=Yt,yi.coordsToLatLngs=Xt,yi.latLngToCoords=Jt,yi.latLngsToCoords=Qt,yi.getFeature=Kt,yi.asFeature=te,Nn.mergeOptions({boxZoom:!0});var Fi=Un.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){H(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){W(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._clearDeferredResetState(),this._resetState(),Le(),Ct(),this._startPoint=this._map.mouseEventToContainerPoint(t),void H(document,{contextmenu:K,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ut("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new w(this._point,this._startPoint),n=e.getSize();wt(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(lt(this._box),mt(this._container,"leaflet-crosshair")),ke(),Mt(),W(document,{contextmenu:K,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new C(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Nn.addInitHook("addHandler","boxZoom",Fi),Nn.mergeOptions({doubleClickZoom:!0});var qi=Un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Nn.addInitHook("addHandler","doubleClickZoom",qi),Nn.mergeOptions({dragging:!0,inertia:!Re,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zi=Un.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Xn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=M(this._map.options.maxBounds);this._offsetLimit=T(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=o.multiplyBy(s/r),u=a.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=a.multiplyBy(l/u),h=l/(n.inertiaDeceleration*s),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),g(function(){e.panBy(f,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Nn.addInitHook("addHandler","dragging",Zi),Nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ui=Un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),H(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),W(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){H(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){W(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=x(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup)return;i.closePopup()}K(t)}}});Nn.addInitHook("addHandler","keyboard",Ui),Nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Hi=Un.extend({addHooks:function(){H(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){W(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=et(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),o),K(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,s=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Nn.addInitHook("addHandler","scrollWheelZoom",Hi),Nn.mergeOptions({tap:!0,tapTolerance:15});var Wi=Un.extend({addHooks:function(){H(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){W(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Q(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new b(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&pt(i,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),H(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),W(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&mt(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new b(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});tn&&!Ke&&Nn.addInitHook("addHandler","tap",Wi),Nn.mergeOptions({touchZoom:tn&&!Re,bounceAtZoomLimits:!0});var Gi=Un.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),H(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),W(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),H(document,"touchmove",this._onTouchMove,this),H(document,"touchend",this._onTouchEnd,this),Q(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),r=i.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var s=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),v(this._animRequest);var a=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=g(a,this,!0),Q(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,v(this._animRequest),W(document,"touchmove",this._onTouchMove),W(document,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}});Nn.addInitHook("addHandler","touchZoom",Gi),Nn.BoxZoom=Fi,Nn.DoubleClickZoom=qi,Nn.Drag=Zi,Nn.Keyboard=Ui,Nn.ScrollWheelZoom=Hi,Nn.Tap=Wi,Nn.TouchZoom=Gi;var Vi=window.L;window.L=t,t.version="1.1.0",t.noConflict=ce,t.Control=In,t.control=zn,t.Browser=un,t.Evented=xe,t.Mixin=Hn,t.Util=ye,t.Class=_,t.Handler=Un,t.extend=e,t.bind=n,t.stamp=i,t.setOptions=c,t.DomEvent=Tn,t.DomUtil=An,t.PosAnimation=En,t.Draggable=Xn,t.LineUtil=Jn,t.PolyUtil=Qn,t.Point=b,t.point=x,t.Bounds=w,t.bounds=T,t.Transformation=P,t.transformation=A,t.Projection=ei,t.LatLng=k,t.latLng=S,t.LatLngBounds=C,t.latLngBounds=M,t.CRS=we,t.GeoJSON=yi,t.geoJSON=ee,t.geoJson=xi,t.Layer=ri,t.LayerGroup=si,t.layerGroup=ai,t.FeatureGroup=ui,t.featureGroup=li,t.ImageOverlay=wi,t.imageOverlay=Ti,t.VideoOverlay=Ci,t.videoOverlay=ne,t.DivOverlay=Mi,t.Popup=Li,t.popup=ki,t.Tooltip=Si,t.tooltip=Pi,t.Icon=ci,t.icon=qt,t.DivIcon=Ai,t.divIcon=ie,t.Marker=di,t.marker=Zt,t.TileLayer=Ni,t.tileLayer=re,t.GridLayer=Ei,t.gridLayer=oe,t.SVG=Bi,t.svg=ue,
t.Renderer=zi,t.Canvas=Oi,t.canvas=ae,t.Path=pi,t.CircleMarker=mi,t.circleMarker=Ut,t.Circle=gi,t.circle=Ht,t.Polyline=vi,t.polyline=Wt,t.Polygon=_i,t.polygon=Gt,t.Rectangle=$i,t.rectangle=le,t.Map=Nn,t.map=St}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("leaflet")):"function"==typeof define&&define.amd?define("esri-leaflet",["exports","leaflet"],e):e((t.L=t.L||{},t.L.esri=t.L.esri||{}),t.L)}(this,function(t,e){"use strict";function n(t){var e="";t.f=t.f||"json";for(var n in t)if(t.hasOwnProperty(n)){var i,o=t[n],r=Object.prototype.toString.call(o);e.length&&(e+="&"),i="[object Array]"===r?"[object Object]"===Object.prototype.toString.call(o[0])?JSON.stringify(o):o.join(","):"[object Object]"===r?JSON.stringify(o):"[object Date]"===r?o.valueOf():o,e+=encodeURIComponent(n)+"="+encodeURIComponent(i)}return e}function i(t,n){var i=new window.XMLHttpRequest;return i.onerror=function(o){i.onreadystatechange=e.Util.falseFn,t.call(n,{error:{code:500,message:"XMLHttpRequest error"}},null)},i.onreadystatechange=function(){var o,r;if(4===i.readyState){try{o=JSON.parse(i.responseText)}catch(t){o=null,r={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!r&&o.error&&(r=o.error,o=null),i.onerror=e.Util.falseFn,t.call(n,r,o)}},i.ontimeout=function(){this.onerror()},i}function o(t,e,o,r){var s=i(o,r);return s.open("POST",t),void 0!==r&&null!==r&&void 0!==r.options&&(s.timeout=r.options.timeout),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(n(e)),s}function r(t,e,o,r){var s=i(o,r);return s.open("GET",t+"?"+n(e),!0),void 0!==r&&null!==r&&void 0!==r.options&&(s.timeout=r.options.timeout),s.send(null),s}function s(t,e,o,r){var s=n(e),u=i(o,r),l=(t+"?"+s).length;if(l<=2e3&&et.cors?u.open("GET",t+"?"+s):l>2e3&&et.cors&&(u.open("POST",t),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),void 0!==r&&null!==r&&void 0!==r.options&&(u.timeout=r.options.timeout),l<=2e3&&et.cors)u.send(null);else{if(!(l>2e3&&et.cors))return l<=2e3&&!et.cors?a(t,e,o,r):void E("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");u.send(s)}return u}function a(t,i,o,r){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var s="c"+it;i.callback="window._EsriLeafletCallbacks."+s,window._EsriLeafletCallbacks[s]=function(t){if(!0!==window._EsriLeafletCallbacks[s]){var e,n=Object.prototype.toString.call(t);"[object Object]"!==n&&"[object Array]"!==n&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),o.call(r,e,t),window._EsriLeafletCallbacks[s]=!0}};var a=e.DomUtil.create("script",null,document.body);return a.type="text/javascript",a.src=t+"?"+n(i),a.id=s,it++,{id:s,url:a.src,abort:function(){window._EsriLeafletCallbacks._callback[s]({code:0,message:"Request aborted."})}}}function u(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function l(t){return u(t[0],t[t.length-1])||t.push(t[0]),t}function c(t){var e,n=0,i=0,o=t.length,r=t[i];for(i;i<o-1;i++)e=t[i+1],n+=(e[0]-r[0])*(e[1]+r[1]),r=e;return n>=0}function h(t,e,n,i){var o=(i[0]-n[0])*(t[1]-n[1])-(i[1]-n[1])*(t[0]-n[0]),r=(e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]),s=(i[1]-n[1])*(e[0]-t[0])-(i[0]-n[0])*(e[1]-t[1]);if(0!==s){var a=o/s,u=r/s;if(a>=0&&a<=1&&u>=0&&u<=1)return!0}return!1}function f(t,e){for(var n=0;n<t.length-1;n++)for(var i=0;i<e.length-1;i++)if(h(t[n],t[n+1],e[i],e[i+1]))return!0;return!1}function d(t,e){for(var n=!1,i=-1,o=t.length,r=o-1;++i<o;r=i)(t[i][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[i][1])&&e[0]<(t[r][0]-t[i][0])*(e[1]-t[i][1])/(t[r][1]-t[i][1])+t[i][0]&&(n=!n);return n}function p(t,e){var n=f(t,e),i=d(t,e[0]);return!(n||!i)}function m(t){for(var e,n,i,o=[],r=[],s=0;s<t.length;s++){var a=l(t[s].slice(0));if(!(a.length<4))if(c(a)){var u=[a];o.push(u)}else r.push(a)}for(var h=[];r.length;){i=r.pop();var d=!1;for(e=o.length-1;e>=0;e--)if(n=o[e][0],p(n,i)){o[e].push(i),d=!0;break}d||h.push(i)}for(;h.length;){i=h.pop();var m=!1;for(e=o.length-1;e>=0;e--)if(n=o[e][0],f(n,i)){o[e].push(i),m=!0;break}m||o.push([i.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}function g(t){var e=[],n=t.slice(0),i=l(n.shift().slice(0));if(i.length>=4){c(i)||i.reverse(),e.push(i);for(var o=0;o<n.length;o++){var r=l(n[o].slice(0));r.length>=4&&(c(r)&&r.reverse(),e.push(r))}}return e}function v(t){for(var e=[],n=0;n<t.length;n++)for(var i=g(t[n]),o=i.length-1;o>=0;o--){var r=i[o].slice(0);e.push(r)}return e}function _(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function y(t,e){var n={};return"number"==typeof t.x&&"number"==typeof t.y&&(n.type="Point",n.coordinates=[t.x,t.y]),t.points&&(n.type="MultiPoint",n.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(n.type="LineString",n.coordinates=t.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=t.paths.slice(0))),t.rings&&(n=m(t.rings.slice(0))),(t.geometry||t.attributes)&&(n.type="Feature",n.geometry=t.geometry?y(t.geometry):null,n.properties=t.attributes?_(t.attributes):null,t.attributes&&(n.id=t.attributes[e]||t.attributes.OBJECTID||t.attributes.FID)),n}function b(t,e){e=e||"OBJECTID";var n,i={wkid:4326},o={};switch(t.type){case"Point":o.x=t.coordinates[0],o.y=t.coordinates[1],o.spatialReference=i;break;case"MultiPoint":o.points=t.coordinates.slice(0),o.spatialReference=i;break;case"LineString":o.paths=[t.coordinates.slice(0)],o.spatialReference=i;break;case"MultiLineString":o.paths=t.coordinates.slice(0),o.spatialReference=i;break;case"Polygon":o.rings=g(t.coordinates.slice(0)),o.spatialReference=i;break;case"MultiPolygon":o.rings=v(t.coordinates.slice(0)),o.spatialReference=i;break;case"Feature":t.geometry&&(o.geometry=b(t.geometry,e)),o.attributes=t.properties?_(t.properties):{},t.id&&(o.attributes[e]=t.id);break;case"FeatureCollection":for(o=[],n=0;n<t.features.length;n++)o.push(b(t.features[n],e));break;case"GeometryCollection":for(o=[],n=0;n<t.geometries.length;n++)o.push(b(t.geometries[n],e))}return o}function x(t,e){return b(t,e)}function w(t,e){return y(t,e)}function T(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function C(t){if("NaN"!==t.xmin&&"NaN"!==t.ymin&&"NaN"!==t.xmax&&"NaN"!==t.ymax){var n=e.latLng(t.ymin,t.xmin),i=e.latLng(t.ymax,t.xmax);return e.latLngBounds(n,i)}return null}function M(t){return t=e.latLngBounds(t),{xmin:t.getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}function k(t,e){var n,i=t.features||t.results,o=i.length;if(e)n=e;else if(t.objectIdFieldName)n=t.objectIdFieldName;else if(t.fields){for(var r=0;r<=t.fields.length-1;r++)if("esriFieldTypeOID"===t.fields[r].type){n=t.fields[r].name;break}}else if(o)for(var s in i[0].attributes)if(s.match(/^(OBJECTID|FID|OID|ID)$/i)){n=s;break}var a={type:"FeatureCollection",features:[]};if(o)for(var u=i.length-1;u>=0;u--){var l=w(i[u],n);a.features.push(l)}return a}function S(t){return t=e.Util.trim(t),"/"!==t[t.length-1]&&(t+="/"),t}function P(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function A(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":e="esriGeometryPolygon";break;case"MultiPolygon":e="esriGeometryPolygon"}return e}function E(){console&&console.warn&&console.warn.apply(console,arguments)}function N(t){return t.getSize().x-nt.attributionWidthOffset+"px"}function I(t){if(t.attributionControl&&!t.attributionControl._esriAttributionAdded){t.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>');var n=document.createElement("style");n.type="text/css",n.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(n),e.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution:hover");var i=document.createElement("style");i.type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+N(t)+";}",document.getElementsByTagName("head")[0].appendChild(i),e.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution"),t.on("resize",function(e){t.attributionControl._container.style.maxWidth=N(e.target)}),t.attributionControl._esriAttributionAdded=!0}}function z(t,n){a(t,{},e.Util.bind(function(t,i){if(!t){n._esriAttributions=[];for(var o=0;o<i.contributors.length;o++)for(var r=i.contributors[o],s=0;s<r.coverageAreas.length;s++){var a=r.coverageAreas[s],u=e.latLng(a.bbox[0],a.bbox[1]),l=e.latLng(a.bbox[2],a.bbox[3]);n._esriAttributions.push({attribution:r.attribution,score:a.score,bounds:e.latLngBounds(u,l),minZoom:a.zoomMin,maxZoom:a.zoomMax})}n._esriAttributions.sort(function(t,e){return e.score-t.score});O({target:n})}},this))}function O(t){var n=t.target,i=n._esriAttributions;if(n&&n.attributionControl&&i){for(var o="",r=n.getBounds(),s=e.latLngBounds(r.getSouthWest().wrap(),r.getNorthEast().wrap()),a=n.getZoom(),u=0;u<i.length;u++){var l=i[u],c=l.attribution;!o.match(c)&&l.bounds.intersects(s)&&a>=l.minZoom&&a<=l.maxZoom&&(o+=", "+c)}o=o.substr(2);var h=n.attributionControl._container.querySelector(".esri-dynamic-attribution");h.innerHTML=o,h.style.maxWidth=N(n),n.fire("attributionupdated",{attribution:o})}}function D(t){return new at(t)}function R(t){return new ut(t)}function j(t){return new lt(t)}function B(t){return new ct(t)}function $(t){return new ht(t)}function F(t){return new ft(t)}function q(t){return new dt(t)}function Z(t){return new pt(t)}function U(t){return new mt(t)}function H(t){return new gt(t)}function W(t,e){return new _t(t,e)}function G(t,e){return new yt(t,e)}function V(t,e){return new wt(t,e)}function Y(t,e){return new Tt(t,e)}function X(t){this.values=[].concat(t||[])}function J(t){return new Lt(t)}var Q="default"in e?e.default:e,K=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,tt=""===document.documentElement.style.pointerEvents,et={cors:K,pointerEvents:tt},nt={attributionWidthOffset:55},it=0,ot=et.cors?r:a;ot.CORS=r,ot.JSONP=a;var rt={request:s,get:ot,post:o},st={shallowClone:T,warn:E,cleanUrl:S,isArcgisOnline:P,geojsonTypeToArcGIS:A,responseToFeatureCollection:k,geojsonToArcGIS:x,arcgisToGeoJSON:w,boundsToExtent:M,extentToBounds:C,calcAttributionWidth:N,setEsriAttribution:I,_getAttributionData:z,_updateMapAttribution:O},at=e.Class.extend({options:{proxy:!1,useCors:K},generateSetter:function(t,n){return e.Util.bind(function(e){return this.params[t]=e,this},n)},initialize:function(t){if(t.request&&t.options?(this._service=t,e.Util.setOptions(this,t.options)):(e.Util.setOptions(this,t),this.options.url=S(t.url)),this.params=e.Util.extend({},this.params||{}),this.setters)for(var n in this.setters){var i=this.setters[n];this[n]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},request:function(t,e){return this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,n,i,o){var r=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?rt[t](r,n,i,o):rt.get.JSONP(r,n,i,o)}}),ut=at.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSr:4326,outFields:"*"},within:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,n){return t=e.latLng(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=n,this.params.inSr=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(t,e){return this._cleanParams(),this.options.isModern||P(this.options.url)?(this.params.f="geojson",this.request(function(n,i){this._trapSQLerrors(n),t.call(e,n,i,i)},this)):this.request(function(n,i){this._trapSQLerrors(n),t.call(e,n,i&&k(i),i)},this)},count:function(t,e){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(e,n){t.call(this,e,n&&n.count,n)},e)},ids:function(t,e){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(e,n){t.call(this,e,n&&n.objectIds,n)},e)},bounds:function(t,e){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(n,i){i&&i.extent&&C(i.extent)?t.call(e,n,C(i.extent),i):(n={message:"Invalid Bounds"},t.call(e,n,null,i))},e)},pixelSize:function(t){var n=e.point(t);return this.params.pixelSize=[n.x,n.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&E("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometry:function(t){return this.params.inSr=4326,t instanceof e.LatLngBounds?(this.params.geometry=M(t),void(this.params.geometryType="esriGeometryEnvelope")):(t.getLatLng&&(t=t.getLatLng()),t instanceof e.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof e.GeoJSON&&(t=t.getLayers()[0].feature.geometry,this.params.geometry=x(t),this.params.geometryType=A(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(this.params.geometry=x(t),void(this.params.geometryType=A(t.type))):void E("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}}),lt=at.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},run:function(t,e){return this.request(function(n,i){t.call(e,n,i&&k(i),i)},e)}}),ct=at.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}}),ht=ct.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=M(t.getBounds()),n=t.getSize();return this.params.imageDisplay=[n.x,n.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return t=e.latLng(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},run:function(t,e){return this.request(function(n,i){if(n)return void t.call(e,n,void 0,i);var o=k(i);i.results=i.results.reverse();for(var r=0;r<o.features.length;r++){o.features[r].layerId=i.results[r].layerId}t.call(e,void 0,o,i)})}}),ft=ct.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=e.latLng(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(t,e){return this.request(function(n,i){t.call(e,n,i&&this._responseToGeoJSON(i),i)},this)},_responseToGeoJSON:function(t){var e=t.location,n=t.catalogItems,i=t.catalogItemVisibilities,o={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(o.pixel.properties.values=t.properties.Values),n&&n.features&&(o.catalogItems=k(n),i&&i.length===o.catalogItems.features.length))for(var r=i.length-1;r>=0;r--)o.catalogItems.features[r].properties.catalogItemVisibility=i[r];return o}}),dt=e.Evented.extend({options:{proxy:!1,useCors:K,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,e.Util.setOptions(this,t),this.options.url=S(this.options.url)},get:function(t,e,n,i){return this._request("get",t,e,n,i)},post:function(t,e,n,i){return this._request("post",t,e,n,i)},request:function(t,e,n,i){return this._request("request",t,e,n,i)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,n,i,o){this.fire("requeststart",{url:this.options.url+e,params:n,method:t},!0);var r=this._createServiceCallback(t,e,n,i,o);if(this.options.token&&(n.token=this.options.token),this._authenticating)return void this._requestQueue.push([t,e,n,i,o]);var s=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?rt[t](s,n,r,o):rt.get.JSONP(s,n,r,o)},_createServiceCallback:function(t,n,i,o,r){return e.Util.bind(function(s,a){!s||499!==s.code&&498!==s.code||(this._authenticating=!0,this._requestQueue.push([t,n,i,o,r]),this.fire("authenticationrequired",{authenticate:e.Util.bind(this.authenticate,this)},!0),s.authenticate=e.Util.bind(this.authenticate,this)),o.call(r,s,a),s?this.fire("requesterror",{url:this.options.url+n,params:i,message:s.message,code:s.code,method:t},!0):this.fire("requestsuccess",{url:this.options.url+n,params:i,response:a,method:t},!0),this.fire("requestend",{url:this.options.url+n,params:i,method:t},!0)},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;t>=0;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}}),pt=dt.extend({identify:function(){return $(this)},find:function(){return j(this)},query:function(){return R(this)}}),mt=dt.extend({query:function(){return R(this)},identify:function(){return F(this)}}),gt=dt.extend({options:{idAttribute:"OBJECTID"},query:function(){return R(this)},addFeature:function(t,e,n){return delete t.id,t=x(t),this.post("addFeatures",{features:[t]},function(t,i){var o=i&&i.addResults?i.addResults[0]:void 0;e&&e.call(n,t||i.addResults[0].error,o)},n)},updateFeature:function(t,e,n){return t=x(t,this.options.idAttribute),this.post("updateFeatures",{features:[t]},function(t,i){var o=i&&i.updateResults?i.updateResults[0]:void 0;e&&e.call(n,t||i.updateResults[0].error,o)},n)},deleteFeature:function(t,e,n){return this.post("deleteFeatures",{objectIds:t},function(t,i){var o=i&&i.deleteResults?i.deleteResults[0]:void 0;e&&e.call(n,t||i.deleteResults[0].error,o)},n)},deleteFeatures:function(t,e,n){return this.post("deleteFeatures",{objectIds:t},function(t,i){var o=i&&i.deleteResults?i.deleteResults:void 0;e&&e.call(n,t||i.deleteResults[0].error,o)},n)}}),vt="https:"!==window.location.protocol?"http:":"https:",_t=e.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:vt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:vt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:tt?"esri-labels":"tilePane"}},NationalGeographic:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:tt?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:tt?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community"}},ImageryLabels:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:tt?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:tt?"esri-labels":"tilePane"}},ShadedRelief:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:tt?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:tt?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:vt+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}}}},initialize:function(t,n){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!_t.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=_t.TILES[t]}var o=e.Util.extend(i.options,n);e.Util.setOptions(this,o),this.options.token&&(i.urlTemplate+="?token="+this.options.token),e.TileLayer.prototype.initialize.call(this,i.urlTemplate,o)},onAdd:function(t){I(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&z(this.options.attributionUrl,t),t.on("moveend",O),e.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){t.off("moveend",O),e.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var t=this._map.createPane(this.options.pane);t.style.pointerEvents="none",t.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return t}}),yt=e.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t.url=S(t.url),t=e.Util.setOptions(this,t),this.tileUrl=t.url+"tile/{z}/{y}/{x}",this.service=Z(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),e.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var n=this._getZoomForUrl();return e.Util.template(this.tileUrl,e.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[n]?this._lodMap[n]:n},this.options))},createTile:function(t,e){var n=document.createElement("img");return L.DomEvent.on(n,"load",L.bind(this._tileOnLoad,this,e,n)),L.DomEvent.on(n,"error",L.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?n.src=this.getTileUrl(t):this.once("lodmap",function(){n.src=this.getTileUrl(t)},this),n},onAdd:function(t){I(t),this._lodMap||this.metadata(function(e,n){if(!e&&n.spatialReference){var i=n.spatialReference.latestWkid||n.spatialReference.wkid;if(!this.options.attribution&&t.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,t.attributionControl.addAttribution(this.getAttribution())),t.options.crs===L.CRS.EPSG3857&&102100===i||3857===i){this._lodMap={};for(var o=n.tileInfo.lods,r=yt.MercatorZoomLevels,s=0;s<o.length;s++){var a=o[s];for(var u in r){var l=r[u];if(this._withinPercentage(a.resolution,l,this.options.zoomOffsetAllowance)){this._lodMap[u]=a.level;break}}}this.fire("lodmap")}else proj4||E("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html")}},this),e.TileLayer.prototype.onAdd.call(this,t)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,n){return Math.abs(t/e-1)<n}}),bt=e.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,e.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===e.CRS.EPSG3857?e.ImageOverlay.prototype._reset.call(this):e.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),xt=e.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:K,attribution:null,interactive:!1,alt:""},onAdd:function(t){I(t),this._update=e.Util.throttle(this._update,this.options.updateInterval,this),t.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(e,n){!e&&!this.options.attribution&&t.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(t){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,n){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=e.popup(n),this._popupFunction=t,
this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,e,n){if(this._map){n&&(t="data:"+n+";base64,"+t);new bt(t,e,{opacity:0,crossOrigin:this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map).once("load",function(t){if(this._map){var n=t.target,i=this._currentImage;n._bounds.equals(e)&&n._bounds.equals(this._map.getBounds())?(this._currentImage=n,"front"===this.options.position?this.bringToFront():this.bringToBack(),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),i&&this._map&&this._map.removeLayer(i),i&&i._map&&i._map.removeLayer(i)):this._map.removeLayer(n)}this.fire("load",{bounds:e})},this),this.fire("loading",{bounds:e})}},_update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress)){if(t>this.options.maxZoom||t<this.options.minZoom)return void(this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null));var n=this._buildExportParams();this._requestExport(n,e)}}},_renderPopup:function(t,n,i,o){if(t=e.latLng(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var r=this._popupFunction(n,i,o);r&&this._popup.setLatLng(t).setContent(r).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng}}),wt=xt.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"json"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t.url=S(t.url),this.service=U(t),this.service.addEventParent(this),e.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return e.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,n){return e.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),n&&(this.options.noDataInterpretation=n),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(t){var n=e.Util.bind(function(n,i,o){n||setTimeout(e.Util.bind(function(){this._renderPopup(t.latlng,n,i,o)},this),300)},this),i=this.identify().at(t.latlng);this.options.mosaicRule&&i.setMosaicRule(this.options.mosaicRule),i.run(n),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=this._map.getBounds(),e=this._map.getSize(),n=this._map.options.crs.project(t._northEast),i=this._map.options.crs.project(t._southWest),o=this._map.latLngToLayerPoint(t._northEast),r=this._map.latLngToLayerPoint(t._southWest);(o.y>0||r.y<e.y)&&(e.y=r.y-o.y);var s=parseInt(this._map.options.crs.code.split(":")[1],10),a={bbox:[i.x,i.y,n.x,n.y].join(","),size:e.x+","+e.y,format:this.options.format,transparent:this.options.transparent,bboxSR:s,imageSR:s};return this.options.from&&this.options.to&&(a.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(a.pixelType=this.options.pixelType),this.options.interpolation&&(a.interpolation=this.options.interpolation),this.options.compressionQuality&&(a.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(a.bandIds=this.options.bandIds),this.options.noData&&(a.noData=this.options.noData),this.options.noDataInterpretation&&(a.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(a.token=this.service.options.token),this.options.renderingRule&&(a.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(a.mosaicRule=JSON.stringify(this.options.mosaicRule)),a},_requestExport:function(t,n){"json"===this.options.f?this.service.request("exportImage",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this._renderImage(e.href,n))},this):(t.f="image",this._renderImage(this.options.url+"exportImage"+e.Util.getParamString(t),n))}}),Tt=xt.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png24",transparent:!0,f:"json"},initialize:function(t){t.url=S(t.url),this.service=Z(t),this.service.addEventParent(this),(t.proxy||t.token)&&"json"!==t.f&&(t.f="json"),e.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(t){var n=e.Util.bind(function(n,i,o){n||setTimeout(e.Util.bind(function(){this._renderPopup(t.latlng,n,i,o)},this),300)},this),i=this.identify().on(this._map).at(t.latlng);i.simplify(this._map,.5),this.options.layers?i.layers("visible:"+this.options.layers.join(",")):i.layers("visible"),i.run(n),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=this._map.getBounds(),e=this._map.getSize(),n=this._map.options.crs.project(t.getNorthEast()),i=this._map.options.crs.project(t.getSouthWest()),o=parseInt(this._map.options.crs.code.split(":")[1],10),r=this._map.latLngToLayerPoint(t._northEast),s=this._map.latLngToLayerPoint(t._southWest);(r.y>0||s.y<e.y)&&(e.y=s.y-r.y);var a={bbox:[i.x,i.y,n.x,n.y].join(","),size:e.x+","+e.y,dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:o,imageSR:o};return this.options.dynamicLayers&&(a.dynamicLayers=this.options.dynamicLayers),this.options.layers&&(a.layers="show:"+this.options.layers.join(",")),this.options.layerDefs&&(a.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(a.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(a.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(a.token=this.service.options.token),this.options.proxy&&(a.proxy=this.options.proxy),a},_requestExport:function(t,n){"json"===this.options.f?this.service.request("export",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this.options.proxy&&(e.href=this.options.proxy+"?"+e.href),e.href?this._renderImage(e.href,n):this._renderImage(e.imageData,n,e.contentType))},this):(t.f="image",this._renderImage(this.options.url+"export"+e.Util.getParamString(t),n))}}),Ct=Q.Layer.extend({options:{cellSize:512,updateInterval:150},initialize:function(t){t=Q.setOptions(this,t),this._zooming=!1},onAdd:function(t){this._map=t,this._update=Q.Util.throttle(this._update,this.options.updateInterval,this),this._reset(),this._update()},onRemove:function(){this._map.removeEventListener(this.getEvents(),this),this._removeCells()},getEvents:function(){return{moveend:this._update,zoomstart:this._zoomstart,zoomend:this._reset}},addTo:function(t){return t.addLayer(this),this},removeFrom:function(t){return t.removeLayer(this),this},_zoomstart:function(){this._zooming=!0},_reset:function(){this._removeCells(),this._cells={},this._activeCells={},this._cellsToLoad=0,this._cellsTotal=0,this._cellNumBounds=this._getCellNumBounds(),this._resetWrap(),this._zooming=!1},_resetWrap:function(){var t=this._map,e=t.options.crs;if(!e.infinite){var n=this._getCellSize();e.wrapLng&&(this._wrapLng=[Math.floor(t.project([0,e.wrapLng[0]]).x/n),Math.ceil(t.project([0,e.wrapLng[1]]).x/n)]),e.wrapLat&&(this._wrapLat=[Math.floor(t.project([e.wrapLat[0],0]).y/n),Math.ceil(t.project([e.wrapLat[1],0]).y/n)])}},_getCellSize:function(){return this.options.cellSize},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._getCellSize(),n=Q.bounds(t.min.divideBy(e).floor(),t.max.divideBy(e).floor());this._removeOtherCells(n),this._addCells(n),this.fire("cellsupdated")}},_addCells:function(t){var e,n,i,o=[],r=t.getCenter(),s=this._map.getZoom();for(e=t.min.y;e<=t.max.y;e++)for(n=t.min.x;n<=t.max.x;n++)i=Q.point(n,e),i.z=s,this._isValidCell(i)&&o.push(i);var a=o.length;if(0!==a)for(this._cellsToLoad+=a,this._cellsTotal+=a,o.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),n=0;n<a;n++)this._addCell(o[n])},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._cellNumBounds;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._cellCoordsToBounds(t);return Q.latLngBounds(this.options.bounds).intersects(i)},_cellCoordsToBounds:function(t){var e=this._map,n=this.options.cellSize,i=t.multiplyBy(n),o=i.add([n,n]),r=e.wrapLatLng(e.unproject(i,t.z)),s=e.wrapLatLng(e.unproject(o,t.z));return Q.latLngBounds(r,s)},_cellCoordsToKey:function(t){return t.x+":"+t.y},_keyToCellCoords:function(t){var e=t.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10);return Q.point(n,i)},_removeOtherCells:function(t){for(var e in this._cells)t.contains(this._keyToCellCoords(e))||this._removeCell(e)},_removeCell:function(t){var e=this._activeCells[t];e&&(delete this._activeCells[t],this.cellLeave&&this.cellLeave(e.bounds,e.coords),this.fire("cellleave",{bounds:e.bounds,coords:e.coords}))},_removeCells:function(){for(var t in this._cells){var e=this._cells[t].bounds,n=this._cells[t].coords;this.cellLeave&&this.cellLeave(e,n),this.fire("cellleave",{bounds:e,coords:n})}},_addCell:function(t){this._wrapCoords(t);var e=this._cellCoordsToKey(t),n=this._cells[e];n&&!this._activeCells[e]&&(this.cellEnter&&this.cellEnter(n.bounds,t),this.fire("cellenter",{bounds:n.bounds,coords:t}),this._activeCells[e]=n),n||(n={coords:t,bounds:this._cellCoordsToBounds(t)},this._cells[e]=n,this._activeCells[e]=n,this.createCell&&this.createCell(n.bounds,t),this.fire("cellcreate",{bounds:n.bounds,coords:t}))},_wrapCoords:function(t){t.x=this._wrapLng?Q.Util.wrapNum(t.x,this._wrapLng):t.x,t.y=this._wrapLat?Q.Util.wrapNum(t.y,this._wrapLat):t.y},_getCellNumBounds:function(){var t=this._map.getPixelWorldBounds(),e=this._getCellSize();return t?Q.bounds(t.min.divideBy(e).floor(),t.max.divideBy(e).ceil().subtract([1,1])):null}});X.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},X.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,n,i=0,o=this.values.length-1;i<=o;)if(e=(i+o)/2|0,n=this.values[Math.round(e)],+n.value<+t)i=e+1;else{if(!(+n.value>+t))return e;o=e-1}return Math.abs(~o)},X.prototype.between=function(t,e){var n=this.getIndex(t),i=this.getIndex(e);if(0===n&&0===i)return[];for(;this.values[n-1]&&this.values[n-1].value===t;)n--;for(;this.values[i+1]&&this.values[i+1].value===e;)i++;return this.values[i]&&this.values[i].value===e&&this.values[i+1]&&i++,this.values.slice(n,i)},X.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},X.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},X.prototype.sort=function(){return this.values.sort(function(t,e){return+e.value-+t.value}).reverse(),this.dirty=!1,this};var Mt=Ct.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6},initialize:function(t){if(Ct.prototype.initialize.call(this,t),t.url=S(t.url),t=e.setOptions(this,t),this.service=H(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var n=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(n=!0);!1===n&&E("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new X,this._endTimeIndex=new X):this.options.timeField&&(this._timeIndex=new X),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(t){return I(t),this.service.metadata(function(e,n){if(!e){var i=n.supportedQueryFormats,o=!1;!1===this.service.options.isModern&&(o=!0),!o&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),!this.options.attribution&&t.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}},this),t.on("zoomend",this._handleZoomChange,this),Ct.prototype.onAdd.call(this,t)},onRemove:function(t){return t.off("zoomend",this._handleZoomChange,this),Ct.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(t,n,i){return this._activeRequests++,1===this._activeRequests&&this.fire("loading",{bounds:t},!0),this._buildQuery(t).run(function(o,r,s){s&&s.exceededTransferLimit&&this.fire("drawlimitexceeded"),!o&&r&&r.features.length&&e.Util.requestAnimFrame(e.Util.bind(function(){this._addFeatures(r.features,n),this._postProcessFeatures(t)},this)),o||!r||r.features.length||this._postProcessFeatures(t),o&&this._postProcessFeatures(t),i&&i.call(this,o,r)},this)},_postProcessFeatures:function(t){--this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var n=this._cacheKey(e);this._cache[n]=this._cache[n]||[];for(var i=t.length-1;i>=0;i--){var o=t[i].id;-1===this._currentSnapshot.indexOf(o)&&this._currentSnapshot.push(o),-1===this._cache[n].indexOf(o)&&this._cache[n].push(o)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t){var e=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.simplifyFactor&&e.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&e.between(this.options.from,this.options.to),e},setWhere:function(t,n,i){this.options.where=t&&t.length?t:"1=1";for(var o=[],r=[],s=0,a=null,u=e.Util.bind(function(t,u){if(t&&(a=t),u)for(var l=u.features.length-1;l>=0;l--)r.push(u.features[l].id);--s<=0&&(this._currentSnapshot=r,e.Util.requestAnimFrame(e.Util.bind(function(){this.removeLayers(o),this.addLayers(r),n&&n.call(i,a)},this)))},this),l=this._currentSnapshot.length-1;l>=0;l--)o.push(this._currentSnapshot[l]);for(var c in this._activeCells){s++;var h=this._keyToCellCoords(c),f=this._cellCoordsToBounds(h);this._requestFeatures(f,c,u)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,n,i,o){var r=this.options.from,s=this.options.to,a=0,u=null,l=e.Util.bind(function(e){e&&(u=e),this._filterExistingFeatures(r,s,t,n),a--,i&&a<=0&&i.call(o,u)},this);if(this.options.from=t,this.options.to=n,this._filterExistingFeatures(r,s,t,n),"server"===this.options.timeFilterMode)for(var c in this._activeCells){a++;var h=this._keyToCellCoords(c),f=this._cellCoordsToBounds(h);this._requestFeatures(f,c,l)}return this},refresh:function(){for(var t in this._activeCells){var e=this._keyToCellCoords(t),n=this._cellCoordsToBounds(e);this._requestFeatures(n,t)}this.redraw&&this.once("load",function(){this.eachFeature(function(t){this._redraw(t.feature.id)},this)},this)},_filterExistingFeatures:function(t,n,i,o){var r=t&&n?this._getFeaturesInTimeRange(t,n):this._currentSnapshot,s=this._getFeaturesInTimeRange(i,o);if(s.indexOf)for(var a=0;a<s.length;a++){var u=r.indexOf(s[a]);u>=0&&r.splice(u,1)}e.Util.requestAnimFrame(e.Util.bind(function(){this.removeLayers(r),this.addLayers(s)},this))},_getFeaturesInTimeRange:function(t,e){var n,i=[];if(this.options.timeField.start&&this.options.timeField.end){var o=this._startTimeIndex.between(t,e),r=this._endTimeIndex.between(t,e);n=o.concat(r)}else n=this._timeIndex.between(t,e);for(var s=n.length-1;s>=0;s--)i.push(n[s].id);return i},_buildTimeIndexes:function(t){var e,n;if(this.options.timeField.start&&this.options.timeField.end){var i=[],o=[];for(e=t.length-1;e>=0;e--)n=t[e],i.push({id:n.id,value:new Date(n.properties[this.options.timeField.start])}),o.push({id:n.id,value:new Date(n.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(o)}else{var r=[];for(e=t.length-1;e>=0;e--)n=t[e],r.push({id:n.id,value:new Date(n.properties[this.options.timeField])});this._timeIndex.bulkAdd(r)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),n=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var i=+t.properties[this.options.timeField];return i>=e&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){var o=+t.properties[this.options.timeField.start],r=+t.properties[this.options.timeField.end];return o>=e&&o<=n||r>=e&&r<=n}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._activeCells){var e=this._activeCells[t].coords,n=this._cacheKey(e);this._cache[n]&&this.addLayers(this._cache[n])}else this.removeLayers(this._currentSnapshot),this._currentSnapshot=[]},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(t){if(this._metadata){t(void 0,this._metadata)}else this.metadata(e.Util.bind(function(e,n){this._metadata=n,t(e,this._metadata)},this))},addFeature:function(t,n,i){this._getMetadata(e.Util.bind(function(o,r){return o?void(n&&n.call(this,o,null)):void this.service.addFeature(t,e.Util.bind(function(e,o){e||(t.properties[r.objectIdField]=o.objectId,t.id=o.objectId,this.createLayers([t])),n&&n.call(i,e,o)},this))},this))},updateFeature:function(t,e,n){this.service.updateFeature(t,function(i,o){i||(this.removeLayers([t.id],!0),this.createLayers([t])),e&&e.call(n,i,o)},this)},deleteFeature:function(t,e,n){this.service.deleteFeature(t,function(t,i){!t&&i.objectId&&this.removeLayers([i.objectId],!0),e&&e.call(n,t,i)},this)},deleteFeatures:function(t,e,n){return this.service.deleteFeatures(t,function(t,i){if(!t&&i.length>0)for(var o=0;o<i.length;o++)this.removeLayers([i[o].objectId],!0);e&&e.call(n,t,i)},this)}}),Lt=Mt.extend({options:{cacheLayers:!0},initialize:function(t){Mt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return Mt.prototype.onRemove.call(this,t)},createNewLayer:function(t){var n=e.GeoJSON.geometryToLayer(t,this.options);return n.defaultOptions=n.options,n},_updateLayer:function(t,n){var i=[],o=this.options.coordsToLatLng||e.GeoJSON.coordsToLatLng;switch(n.properties&&(t.feature.properties=n.properties),n.geometry.type){case"Point":i=e.GeoJSON.coordsToLatLng(n.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=e.GeoJSON.coordsToLatLngs(n.geometry.coordinates,0,o),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=e.GeoJSON.coordsToLatLngs(n.geometry.coordinates,1,o),t.setLatLngs(i);break;case"MultiPolygon":i=e.GeoJSON.coordsToLatLngs(n.geometry.coordinates,2,o),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;e>=0;e--){var n,i=t[e],o=this._layers[i.id];this._visibleZoom()&&o&&!this._map.hasLayer(o)&&(this._map.addLayer(o),this.fire("addfeature",{feature:o.feature},!0)),o&&this.options.simplifyFactor>0&&(o.setLatLngs||o.setLatLng)&&this._updateLayer(o,i),o||(n=this.createNewLayer(i),n.feature=i,n.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(n.feature,n),this._layers[n.feature.id]=n,this.setFeatureStyle(n.feature.id,this.options.style),this.fire("createfeature",{feature:n.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(i))&&this._map.addLayer(n))}},addLayers:function(t){for(var e=t.length-1;e>=0;e--){var n=this._layers[t[e]];n&&this._map.addLayer(n)}},removeLayers:function(t,e){for(var n=t.length-1;n>=0;n--){var i=t[n],o=this._layers[i];o&&(this.fire("removefeature",{feature:o.feature,permanent:e},!0),this._map.removeLayer(o)),o&&e&&delete this._layers[i]}},cellEnter:function(t,n){this._visibleZoom()&&!this._zooming&&this._map&&e.Util.requestAnimFrame(e.Util.bind(function(){var t=this._cacheKey(n),e=this._cellCoordsToKey(n),i=this._cache[t];this._activeCells[e]&&i&&this.addLayers(i)},this))},cellLeave:function(t,n){this._zooming||e.Util.requestAnimFrame(e.Util.bind(function(){if(this._map){var t=this._cacheKey(n),e=this._cellCoordsToKey(n),i=this._cache[t],o=this._map.getBounds();if(!this._activeCells[e]&&i){for(var r=!0,s=0;s<i.length;s++){var a=this._layers[i[s]];a&&a.getBounds&&o.intersects(a.getBounds())&&(r=!1)}r&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(t){this.resetFeatureStyle(t.feature.id)},this),this},setStyle:function(t){return this.options.style=t,this.eachFeature(function(e){this.setFeatureStyle(e.feature.id,t)},this),this},resetFeatureStyle:function(t){var n=this._layers[t],i=this._originalStyle||L.Path.prototype.options;return n&&(e.Util.extend(n.options,n.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){var n=this._layers[t];return"function"==typeof e&&(e=e(n.feature)),n.setStyle&&n.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var n=this._map.getBounds();for(var i in this._layers)n.intersects(this._layers[i].getBounds())&&-1!==this._currentSnapshot.indexOf(this._layers[i].feature.id)&&t.call(e,this._layers[i])}return this},eachFeature:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var n=this._layers[t],i=n.feature;if(n&&n.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var o=this.options.pointToLayer(i,e.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0])),r=o.options.icon;n.setIcon(r)}if(n&&n.setStyle&&this.options.pointToLayer){var s=this.options.pointToLayer(i,e.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0])),a=s.options;this.setFeatureStyle(i.id,a)}n&&n.setStyle&&this.options.style&&this.resetStyle(i.id)}});t.VERSION="2.0.8",t.Support=et,t.options=nt,t.Util=st,t.get=ot,t.post=o,t.request=s,t.Task=at,t.task=D,t.Query=ut,t.query=R,t.Find=lt,t.find=j,t.Identify=ct,t.identify=B,t.IdentifyFeatures=ht,t.identifyFeatures=$,t.IdentifyImage=ft,t.identifyImage=F,t.Service=dt,t.service=q,t.MapService=pt,t.mapService=Z,t.ImageService=mt,t.imageService=U,t.FeatureLayerService=gt,t.featureLayerService=H,t.BasemapLayer=_t,t.basemapLayer=W,t.TiledMapLayer=yt,t.tiledMapLayer=G,t.RasterLayer=xt,t.ImageMapLayer=wt,t.imageMapLayer=V,t.DynamicMapLayer=Tt,t.dynamicMapLayer=Y,t.FeatureManager=Mt,t.FeatureLayer=Lt,t.featureLayer=J}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("leaflet"),require("esri-leaflet")):"function"==typeof define&&define.amd?define("esri-leaflet-geocoder",["exports","leaflet","esri-leaflet"],e):e((t.L=t.L||{},t.L.esri=t.L.esri||{},t.L.esri.Geocoding=t.L.esri.Geocoding||{}),t.L,t.L.esri)}(this,function(t,e,n){"use strict";function i(t){return new d(t)}function o(t){return new p(t)}function r(t){return new m(t)}function s(t){return new g(t)}function a(t,e){return new v(t,e)}function u(t){return new _(t)}function l(t){return new y(t)}function c(t){return new b(t)}function h(t){return new x(t)}function f(t){return new w(t)}e="default"in e?e.default:e;var d=n.Task.extend({path:"findAddressCandidates",params:{outSr:4326,forStorage:!1,outFields:"*",maxLocations:20},setters:{address:"address",neighborhood:"neighborhood",city:"city",subregion:"subregion",region:"region",postal:"postal",country:"country",text:"singleLine",category:"category",token:"token",key:"magicKey",fields:"outFields",forStorage:"forStorage",maxLocations:"maxLocations"},initialize:function(t){t=t||{},t.url=t.url||T,n.Task.prototype.initialize.call(this,t)},within:function(t){return t=e.latLngBounds(t),this.params.searchExtent=n.Util.boundsToExtent(t),this},nearby:function(t,n){return t=e.latLng(t),this.params.location=t.lng+","+t.lat,this.params.distance=Math.min(Math.max(n,2e3),5e4),this},run:function(t,e){return this.options.customParam&&(this.params[this.options.customParam]=this.params.singleLine,delete this.params.singleLine),this.request(function(n,i){var o=this._processGeocoderResponse,r=n?void 0:o(i);t.call(e,n,{results:r},i)},this)},_processGeocoderResponse:function(t){for(var i=[],o=0;o<t.candidates.length;o++){var r=t.candidates[o];if(r.extent)var s=n.Util.extentToBounds(r.extent);i.push({text:r.address,bounds:s,score:r.score,latlng:e.latLng(r.location.y,r.location.x),properties:r.attributes})}return i}}),p=n.Task.extend({path:"reverseGeocode",params:{outSR:4326,returnIntersection:!1},setters:{distance:"distance",language:"langCode",intersection:"returnIntersection"},initialize:function(t){t=t||{},t.url=t.url||T,n.Task.prototype.initialize.call(this,t)},latlng:function(t){return t=e.latLng(t),this.params.location=t.lng+","+t.lat,this},run:function(t,n){return this.request(function(i,o){var r;r=i?void 0:{latlng:e.latLng(o.location.y,o.location.x),address:o.address},t.call(n,i,r,o)},this)}}),m=n.Task.extend({path:"suggest",params:{},setters:{text:"text",category:"category",countries:"countryCode",maxSuggestions:"maxSuggestions"},initialize:function(t){t=t||{},t.url||(t.url=T,t.supportsSuggest=!0),n.Task.prototype.initialize.call(this,t)},within:function(t){t=e.latLngBounds(t),t=t.pad(.5);var i=t.getCenter(),o=t.getNorthWest();return this.params.location=i.lng+","+i.lat,this.params.distance=Math.min(Math.max(i.distanceTo(o),2e3),5e4),this.params.searchExtent=n.Util.boundsToExtent(t),this},nearby:function(t,n){return t=e.latLng(t),this.params.location=t.lng+","+t.lat,this.params.distance=Math.min(Math.max(n,2e3),5e4),this},run:function(t,e){if(this.options.supportsSuggest)return this.request(function(n,i){t.call(e,n,i,i)},this);console.warn("this geocoding service does not support asking for suggestions")}}),g=n.Service.extend({initialize:function(t){t=t||{},t.url?(n.Service.prototype.initialize.call(this,t),this._confirmSuggestSupport()):(t.url=T,t.supportsSuggest=!0,n.Service.prototype.initialize.call(this,t))},geocode:function(){return i(this)},reverse:function(){return o(this)},suggest:function(){return r(this)},_confirmSuggestSupport:function(){this.metadata(function(t,e){t||(e.capabilities?e.capabilities.indexOf("Suggest")>-1?this.options.supportsSuggest=!0:this.options.supportsSuggest=!1:(this.options.supportsSuggest=!1,this.options.customParam=e.singleLineAddressField.name))},this)}}),v=e.Evented.extend({options:{zoomToResult:!0,useMapBounds:12,searchBounds:null},initialize:function(t,n){if(e.Util.setOptions(this,n),this._control=t,!n||!n.providers||!n.providers.length)throw new Error("You must specify at least one provider");this._providers=n.providers},_geocode:function(t,n,i){var o,r=0,s=[],a=e.Util.bind(function(e,n){r--,e||(n&&(s=s.concat(n)),r<=0&&(o=this._boundsFromResults(s),this.fire("results",{results:s,bounds:o,latlng:o?o.getCenter():void 0,text:t},!0),this.options.zoomToResult&&o&&this._control._map.fitBounds(o),this.fire("load")))},this);if(n)r++,i.results(t,n,this._searchBounds(),a);else for(var u=0;u<this._providers.length;u++)r++,this._providers[u].results(t,n,this._searchBounds(),a)},_suggest:function(t){var n=this._providers.length,i=e.Util.bind(function(t,i){return e.Util.bind(function(e,o){if(!e){var r;if(n-=1,t.length<2)return this._suggestions.innerHTML="",void(this._suggestions.style.display="none");if(o.length)for(r=0;r<o.length;r++)o[r].provider=i;else this._control._renderSuggestions(o);if(i._lastRender!==t&&i.nodes){for(r=0;r<i.nodes.length;r++)i.nodes[r].parentElement&&this._control._suggestions.removeChild(i.nodes[r]);i.nodes=[]}o.length&&this._control._input.value===t&&(this._control.clearSuggestions(i.nodes),i._lastRender=t,i.nodes=this._control._renderSuggestions(o),this._control._nodes=[])}},this)},this);this._pendingSuggestions=[];for(var o=0;o<this._providers.length;o++){var r=this._providers[o],s=r.suggestions(t,this._searchBounds(),i(t,r));this._pendingSuggestions.push(s)}},_searchBounds:function(){return null!==this.options.searchBounds?this.options.searchBounds:!1===this.options.useMapBounds?null:!0===this.options.useMapBounds?this._control._map.getBounds():this.options.useMapBounds<=this._control._map.getZoom()?this._control._map.getBounds():null},_boundsFromResults:function(t){if(t.length){for(var n=e.latLngBounds([0,0],[0,0]),i=[],o=[],r=t.length-1;r>=0;r--){var s=t[r];o.push(s.latlng),s.bounds&&s.bounds.isValid()&&!s.bounds.equals(n)&&i.push(s.bounds)}for(var a=e.latLngBounds(o),u=0;u<i.length;u++)a.extend(i[u]);return a}},_getAttribution:function(){for(var t=[],e=this._providers,n=0;n<e.length;n++)e[n].options.attribution&&t.push(e[n].options.attribution);return t.join(", ")}}),_=g.extend({options:{label:"Places and Addresses",maxResults:5},suggestions:function(t,e,n){var i=this.suggest().text(t);return e&&i.within(e),this.options.countries&&i.countries(this.options.countries),this.options.categories&&i.category(this.options.categories),i.maxSuggestions(this.options.maxResults),i.run(function(t,e,i){var o=[];if(!t)for(;i.suggestions.length&&o.length<=this.options.maxResults-1;){var r=i.suggestions.shift()
;r.isCollection||o.push({text:r.text,magicKey:r.magicKey})}n(t,o)},this)},results:function(t,e,n,i){var o=this.geocode().text(t);return e&&o.key(e),o.maxLocations(this.options.maxResults),n&&o.within(n),this.options.forStorage&&o.forStorage(!0),o.run(function(t,e){i(t,e.results)},this)}}),y=e.Control.extend({includes:e.Mixin.Events,options:{position:"topleft",collapseAfterResult:!0,expanded:!1,allowMultipleResults:!0,placeholder:"Search for places or addresses",title:"Location Search"},initialize:function(t){e.Util.setOptions(this,t),t&&t.providers&&t.providers.length||(t||(t={}),t.providers=[u()]),this._geosearchCore=a(this,t),this._geosearchCore._providers=t.providers,this._geosearchCore.addEventParent(this);for(var n=0;n<this._geosearchCore._providers.length;n++)this._geosearchCore._providers[n].addEventParent(this);this._geosearchCore._pendingSuggestions=[],e.Control.prototype.initialize.call(t)},_renderSuggestions:function(t){var n;t.length>0&&(this._suggestions.style.display="block"),this._suggestions.style.maxHeight=this._map.getSize().y-this._suggestions.offsetTop-this._wrapper.offsetTop-10+"px";for(var i,o,r=[],s=[],a=0;a<t.length;a++){var u=t[a];if(!o&&this._geosearchCore._providers.length>1&&n!==u.provider.options.label&&(o=e.DomUtil.create("span","geocoder-control-header",this._suggestions),o.textContent=u.provider.options.label,o.innerText=u.provider.options.label,n=u.provider.options.label,r.push(o)),i||(i=e.DomUtil.create("ul","geocoder-control-list",this._suggestions)),-1===s.indexOf(u.text)){var l=e.DomUtil.create("li","geocoder-control-suggestion",i);l.innerHTML=u.text,l.provider=u.provider,l["data-magic-key"]=u.magicKey}else for(var c=0;c<i.childNodes.length;c++)i.childNodes[c].innerHTML===u.text&&(i.childNodes[c]["data-magic-key"]+=","+u.magicKey);s.push(u.text)}return e.DomUtil.removeClass(this._input,"geocoder-control-loading"),r.push(i),r},_boundsFromResults:function(t){if(t.length){for(var n=e.latLngBounds([0,0],[0,0]),i=[],o=[],r=t.length-1;r>=0;r--){var s=t[r];o.push(s.latlng),s.bounds&&s.bounds.isValid()&&!s.bounds.equals(n)&&i.push(s.bounds)}for(var a=e.latLngBounds(o),u=0;u<i.length;u++)a.extend(i[u]);return a}},clear:function(){this._suggestions.innerHTML="",this._suggestions.style.display="none",this._input.value="",this.options.collapseAfterResult&&(this._input.placeholder="",e.DomUtil.removeClass(this._wrapper,"geocoder-control-expanded")),!this._map.scrollWheelZoom.enabled()&&this._map.options.scrollWheelZoom&&this._map.scrollWheelZoom.enable()},clearSuggestions:function(){if(this._nodes)for(var t=0;t<this._nodes.length;t++)this._nodes[t].parentElement&&this._suggestions.removeChild(this._nodes[t])},_setupClick:function(){e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded"),this._input.focus()},disable:function(){this._input.disabled=!0,e.DomUtil.addClass(this._input,"geocoder-control-input-disabled"),e.DomEvent.removeListener(this._wrapper,"click",this._setupClick,this)},enable:function(){this._input.disabled=!1,e.DomUtil.removeClass(this._input,"geocoder-control-input-disabled"),e.DomEvent.addListener(this._wrapper,"click",this._setupClick,this)},getAttribution:function(){for(var t=[],e=0;e<this._providers.length;e++)this._providers[e].options.attribution&&t.push(this._providers[e].options.attribution);return t.join(", ")},onAdd:function(t){n.Util.setEsriAttribution(t),this._map=t,this._wrapper=e.DomUtil.create("div","geocoder-control"),this._input=e.DomUtil.create("input","geocoder-control-input leaflet-bar",this._wrapper),this._input.title=this.options.title,this.options.expanded&&(e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded"),this._input.placeholder=this.options.placeholder),this._suggestions=e.DomUtil.create("div","geocoder-control-suggestions leaflet-bar",this._wrapper);var i=this._geosearchCore._getAttribution();return t.attributionControl.addAttribution(i),e.DomEvent.addListener(this._input,"focus",function(t){this._input.placeholder=this.options.placeholder,e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded")},this),e.DomEvent.addListener(this._wrapper,"click",this._setupClick,this),e.DomEvent.addListener(this._suggestions,"mousedown",function(t){var e=t.target||t.srcElement;this._geosearchCore._geocode(e.innerHTML,e["data-magic-key"],e.provider),this.clear()},this),e.DomEvent.addListener(this._input,"blur",function(t){this.clear()},this),e.DomEvent.addListener(this._input,"keydown",function(t){var n=(t.target||t.srcElement).value;e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded");for(var i,o=this._suggestions.querySelectorAll(".geocoder-control-suggestion"),r=this._suggestions.querySelectorAll(".geocoder-control-selected")[0],s=0;s<o.length;s++)if(o[s]===r){i=s;break}switch(t.keyCode){case 13:r?(this._geosearchCore._geocode(r.innerHTML,r["data-magic-key"],r.provider),this.clear()):this.options.allowMultipleResults&&n.length>=2?(this._geosearchCore._geocode(this._input.value,void 0),this.clear()):1===o.length?(e.DomUtil.addClass(o[0],"geocoder-control-selected"),this._geosearchCore._geocode(o[0].innerHTML,o[0]["data-magic-key"],o[0].provider)):(this.clear(),this._input.blur()),e.DomEvent.preventDefault(t);break;case 38:r&&e.DomUtil.removeClass(r,"geocoder-control-selected");var a=o[i-1];r&&a?e.DomUtil.addClass(a,"geocoder-control-selected"):e.DomUtil.addClass(o[o.length-1],"geocoder-control-selected"),e.DomEvent.preventDefault(t);break;case 40:r&&e.DomUtil.removeClass(r,"geocoder-control-selected");var u=o[i+1];r&&u?e.DomUtil.addClass(u,"geocoder-control-selected"):e.DomUtil.addClass(o[0],"geocoder-control-selected"),e.DomEvent.preventDefault(t);break;default:for(var l=0;l<this._geosearchCore._pendingSuggestions.length;l++){var c=this._geosearchCore._pendingSuggestions[l];c&&c.abort&&!c.id&&c.abort()}}},this),e.DomEvent.addListener(this._input,"keyup",e.Util.throttle(function(t){var n=t.which||t.keyCode,i=(t.target||t.srcElement).value;return i.length<2?(this._suggestions.innerHTML="",this._suggestions.style.display="none",void e.DomUtil.removeClass(this._input,"geocoder-control-loading")):27===n?(this._suggestions.innerHTML="",void(this._suggestions.style.display="none")):void(13!==n&&38!==n&&40!==n&&this._input.value!==this._lastValue&&(this._lastValue=this._input.value,e.DomUtil.addClass(this._input,"geocoder-control-loading"),this._geosearchCore._suggest(i)))},50,this),this),e.DomEvent.disableClickPropagation(this._wrapper),e.DomEvent.addListener(this._suggestions,"mouseover",function(e){t.scrollWheelZoom.enabled()&&t.options.scrollWheelZoom&&t.scrollWheelZoom.disable()}),e.DomEvent.addListener(this._suggestions,"mouseout",function(e){!t.scrollWheelZoom.enabled()&&t.options.scrollWheelZoom&&t.scrollWheelZoom.enable()}),this._geosearchCore.on("load",function(t){e.DomUtil.removeClass(this._input,"geocoder-control-loading"),this.clear(),this._input.blur()},this),this._wrapper}}),b=n.FeatureLayerService.extend({options:{label:"Feature Layer",maxResults:5,bufferRadius:1e3,formatSuggestion:function(t){return t.properties[this.options.searchFields[0]]}},initialize:function(t){n.FeatureLayerService.prototype.initialize.call(this,t),"string"==typeof this.options.searchFields&&(this.options.searchFields=[this.options.searchFields]),this._suggestionsQuery=this.query(),this._resultsQuery=this.query()},suggestions:function(t,e,n){var i=this._suggestionsQuery.where(this._buildQuery(t)).returnGeometry(!1);return e&&i.intersects(e),this.options.idField&&i.fields([this.options.idField].concat(this.options.searchFields)),i.run(function(t,e,i){if(t)n(t,[]);else{this.options.idField=i.objectIdFieldName;for(var o=[],r=e.features.length-1;r>=0;r--){var s=e.features[r];o.push({text:this.options.formatSuggestion.call(this,s),magicKey:s.id})}n(t,o.slice(0,this.options.maxResults))}},this)},results:function(t,n,i,o){var r=this._resultsQuery;return n?(delete r.params.where,r.featureIds([n])):r.where(this._buildQuery(t)),i&&r.within(i),r.run(e.Util.bind(function(t,e){for(var n=[],i=0;i<e.features.length;i++){var r=e.features[i];if(r){var s=this._featureBounds(r),a={latlng:s.getCenter(),bounds:s,text:this.options.formatSuggestion.call(this,r),properties:r.properties,geojson:r};n.push(a),delete this._resultsQuery.params.objectIds}}o(t,n)},this))},orderBy:function(t,e){this._suggestionsQuery.orderBy(t,e)},_buildQuery:function(t){for(var e=[],n=this.options.searchFields.length-1;n>=0;n--){var i='upper("'+this.options.searchFields[n]+'")';e.push(i+" LIKE upper('%"+t+"%')")}return this.options.where?this.options.where+" AND ("+e.join(" OR ")+")":e.join(" OR ")},_featureBounds:function(t){var n=e.geoJson(t);if("Point"===t.geometry.type){var i=n.getBounds().getCenter(),o=this.options.bufferRadius/40075017*360/Math.cos(180/Math.PI*i.lat),r=this.options.bufferRadius/40075017*360;return e.latLngBounds([i.lat-r,i.lng-o],[i.lat+r,i.lng+o])}return n.getBounds()}}),x=n.MapService.extend({options:{layers:[0],label:"Map Service",bufferRadius:1e3,maxResults:5,formatSuggestion:function(t){return t.properties[t.displayFieldName]+" <small>"+t.layerName+"</small>"}},initialize:function(t){n.MapService.prototype.initialize.call(this,t),this._getIdFields()},suggestions:function(t,e,n){return this.find().text(t).fields(this.options.searchFields).returnGeometry(!1).layers(this.options.layers).run(function(t,e,i){var o=[];if(!t){var r=Math.min(this.options.maxResults,e.features.length);i.results=i.results.reverse();for(var s=0;s<r;s++){var a=e.features[s],u=i.results[s],l=u.layerId,c=this._idFields[l];a.layerId=l,a.layerName=this._layerNames[l],a.displayFieldName=this._displayFields[l],c&&o.push({text:this.options.formatSuggestion.call(this,a),magicKey:u.attributes[c]+":"+l})}}n(t,o.reverse())},this)},results:function(t,e,n,i){var o,r=[];if(e){var s=e.split(":")[0],a=e.split(":")[1];o=this.query().layer(a).featureIds(s)}else o=this.find().text(t).fields(this.options.searchFields).layers(this.options.layers);return o.run(function(t,e,n){if(!t){n.results&&(n.results=n.results.reverse());for(var o=0;o<e.features.length;o++){var s=e.features[o];if(a=a||n.results[o].layerId,s&&void 0!==a){var u=this._featureBounds(s);s.layerId=a,s.layerName=this._layerNames[a],s.displayFieldName=this._displayFields[a];var l={latlng:u.getCenter(),bounds:u,text:this.options.formatSuggestion.call(this,s),properties:s.properties,geojson:s};r.push(l)}}}i(t,r.reverse())},this)},_featureBounds:function(t){var n=e.geoJson(t);if("Point"===t.geometry.type){var i=n.getBounds().getCenter(),o=this.options.bufferRadius/40075017*360/Math.cos(180/Math.PI*i.lat),r=this.options.bufferRadius/40075017*360;return e.latLngBounds([i.lat-r,i.lng-o],[i.lat+r,i.lng+o])}return n.getBounds()},_layerMetadataCallback:function(t){return e.Util.bind(function(e,n){if(!e){this._displayFields[t]=n.displayField,this._layerNames[t]=n.name;for(var i=0;i<n.fields.length;i++){var o=n.fields[i];if("esriFieldTypeOID"===o.type){this._idFields[t]=o.name;break}}}},this)},_getIdFields:function(){this._idFields={},this._displayFields={},this._layerNames={};for(var t=0;t<this.options.layers.length;t++){var e=this.options.layers[t];this.get(e,{},this._layerMetadataCallback(e))}}}),w=g.extend({options:{label:"Geocode Server",maxResults:5},suggestions:function(t,e,n){if(this.options.supportsSuggest){var i=this.suggest().text(t);return e&&i.within(e),i.run(function(t,e,i){var o=[];if(!t)for(;i.suggestions.length&&o.length<=this.options.maxResults-1;){var r=i.suggestions.shift();r.isCollection||o.push({text:r.text,magicKey:r.magicKey})}n(t,o)},this)}return n(void 0,[]),!1},results:function(t,e,n,i){var o=this.geocode().text(t);return o.maxLocations(this.options.maxResults),n&&o.within(n),o.run(function(t,e){i(t,e.results)},this)}}),T="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/";t.WorldGeocodingServiceUrl=T,t.VERSION="2.2.4",t.Geocode=d,t.geocode=i,t.ReverseGeocode=p,t.reverseGeocode=o,t.Suggest=m,t.suggest=r,t.GeocodeService=g,t.geocodeService=s,t.Geosearch=y,t.geosearch=l,t.GeosearchCore=v,t.geosearchCore=a,t.ArcgisOnlineProvider=_,t.arcgisOnlineProvider=u,t.FeatureLayerProvider=b,t.featureLayerProvider=c,t.MapServiceProvider=x,t.mapServiceProvider=h,t.GeocodeServiceProvider=w,t.geocodeServiceProvider=f}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("d3",["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(e,n){return Ul(t(e),n)}}function n(t,e){return[t,e]}function i(t,e,n){var i=(e-t)/Math.max(0,n),o=Math.floor(Math.log(i)/Math.LN10),r=i/Math.pow(10,o);return o>=0?(r>=uc?10:r>=lc?5:r>=cc?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(r>=uc?10:r>=lc?5:r>=cc?2:1)}function o(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),r=i/o;return r>=uc?o*=10:r>=lc?o*=5:r>=cc&&(o*=2),e<t?-o:o}function r(t){return t.length}function s(t){return"translate("+(t+.5)+",0)"}function a(t){return"translate(0,"+(t+.5)+")"}function u(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function l(){return!this.__axis}function c(t,e){function n(n){var s=null==o?e.ticks?e.ticks.apply(e,i):e.domain():o,a=null==r?e.tickFormat?e.tickFormat.apply(e,i):Pc:r,g=Math.max(c,0)+f,v=e.range(),_=v[0]+.5,y=v[v.length-1]+.5,b=(e.bandwidth?u:Pc)(e.copy()),x=n.selection?n.selection():n,w=x.selectAll(".domain").data([null]),T=x.selectAll(".tick").data(s,e).order(),C=T.exit(),M=T.enter().append("g").attr("class","tick"),L=T.select("line"),k=T.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),T=T.merge(M),L=L.merge(M.append("line").attr("stroke","#000").attr(p+"2",d*c)),k=k.merge(M.append("text").attr("fill","#000").attr(p,d*g).attr("dy",t===Ac?"0em":t===Nc?"0.71em":"0.32em")),n!==x&&(w=w.transition(n),T=T.transition(n),L=L.transition(n),k=k.transition(n),C=C.transition(n).attr("opacity",zc).attr("transform",function(t){return isFinite(t=b(t))?m(t):this.getAttribute("transform")}),M.attr("opacity",zc).attr("transform",function(t){var e=this.parentNode.__axis;return m(e&&isFinite(e=e(t))?e:b(t))})),C.remove(),w.attr("d",t===Ic||t==Ec?"M"+d*h+","+_+"H0.5V"+y+"H"+d*h:"M"+_+","+d*h+"V0.5H"+y+"V"+d*h),T.attr("opacity",1).attr("transform",function(t){return m(b(t))}),L.attr(p+"2",d*c),k.attr(p,d*g).text(a),x.filter(l).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ec?"start":t===Ic?"end":"middle"),x.each(function(){this.__axis=b})}var i=[],o=null,r=null,c=6,h=6,f=3,d=t===Ac||t===Ic?-1:1,p=t===Ic||t===Ec?"x":"y",m=t===Ac||t===Nc?s:a;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return i=Sc.call(arguments),n},n.tickArguments=function(t){return arguments.length?(i=null==t?[]:Sc.call(t),n):i.slice()},n.tickValues=function(t){return arguments.length?(o=null==t?null:Sc.call(t),n):o&&o.slice()},n.tickFormat=function(t){return arguments.length?(r=t,n):r},n.tickSize=function(t){return arguments.length?(c=h=+t,n):c},n.tickSizeInner=function(t){return arguments.length?(c=+t,n):c},n.tickSizeOuter=function(t){return arguments.length?(h=+t,n):h},n.tickPadding=function(t){return arguments.length?(f=+t,n):f},n}function h(t){return c(Ac,t)}function f(t){return c(Ec,t)}function d(t){return c(Nc,t)}function p(t){return c(Ic,t)}function m(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new g(i)}function g(t){this._=t}function v(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function _(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function y(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=Oc,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}function b(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Dc&&e.documentElement.namespaceURI===Dc?e.createElement(t):e.createElementNS(n,t)}}function x(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function w(){return new T}function T(){this._="@"+(++$c).toString(36)}function C(t,e,n){return t=M(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function M(e,n,i){return function(o){var r=t.event;t.event=o;try{e.call(this,this.__data__,n,i)}finally{t.event=r}}}function L(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function k(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function S(t,e,n){var i=Hc.hasOwnProperty(t.type)?C:M;return function(o,r,s){var a,u=this.__on,l=i(e,r,s);if(u)for(var c=0,h=u.length;c<h;++c)if((a=u[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=n),void(a.value=e);this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(a):this.__on=[a]}}function P(e,n,i,o){var r=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,o)}finally{t.event=r}}function A(){}function E(){return[]}function N(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function I(t,e,n,i,o,r){for(var s,a=0,u=e.length,l=r.length;a<l;++a)(s=e[a])?(s.__data__=r[a],i[a]=s):n[a]=new N(t,r[a]);for(;a<u;++a)(s=e[a])&&(o[a]=s)}function z(t,e,n,i,o,r,s){var a,u,l,c={},h=e.length,f=r.length,d=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(d[a]=l=oh+s.call(u,u.__data__,a,e),l in c?o[a]=u:c[l]=u);for(a=0;a<f;++a)l=oh+s.call(t,r[a],a,r),(u=c[l])?(i[a]=u,u.__data__=r[a],c[l]=null):n[a]=new N(t,r[a]);for(a=0;a<h;++a)(u=e[a])&&c[d[a]]===u&&(o[a]=u)}function O(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function D(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function j(t,e){return function(){this.setAttribute(t,e)}}function B(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function F(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function q(t){return function(){this.style.removeProperty(t)}}function Z(t,e,n){return function(){this.style.setProperty(t,e,n)}}function U(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function H(t,e){return t.style.getPropertyValue(e)||vh(t).getComputedStyle(t,null).getPropertyValue(e)}function W(t){return function(){delete this[t]}}function G(t,e){return function(){this[t]=e}}function V(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Y(t){return t.trim().split(/^|\s+/)}function X(t){return t.classList||new J(t)}function J(t){this._node=t,this._names=Y(t.getAttribute("class")||"")}function Q(t,e){for(var n=X(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function K(t,e){for(var n=X(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function tt(t){return function(){Q(this,t)}}function et(t){return function(){K(this,t)}}function nt(t,e){return function(){(e.apply(this,arguments)?Q:K)(this,t)}}function it(){this.textContent=""}function ot(t){return function(){this.textContent=t}}function rt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function st(){this.innerHTML=""}function at(t){return function(){this.innerHTML=t}}function ut(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function lt(){this.nextSibling&&this.parentNode.appendChild(this)}function ct(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ht(){return null}function ft(){var t=this.parentNode;t&&t.removeChild(this)}function dt(t,e,n){var i=vh(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function pt(t,e){return function(){return dt(this,t,e)}}function mt(t,e){return function(){return dt(this,t,e.apply(this,arguments))}}function gt(t,e){this._groups=t,this._parents=e}function vt(){return new gt([[document.documentElement]],Ah)}function _t(){t.event.stopImmediatePropagation()}function yt(t,e){var n=t.document.documentElement,i=Eh(t).on("dragstart.drag",null);e&&(i.on("click.drag",Oh,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function bt(t,e,n,i,o,r,s,a,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=o,this.x=r,this.y=s,this.dx=a,this.dy=u,this._=l}function xt(){return!t.event.button}function wt(){return this.parentNode}function Tt(e){return null==e?{x:t.event.x,y:t.event.y}:e}function Ct(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Mt(){}function Lt(t){var e;return t=(t+"").trim().toLowerCase(),(e=Zh.exec(t))?(e=parseInt(e[1],16),new Et(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=Uh.exec(t))?kt(parseInt(e[1],16)):(e=Hh.exec(t))?new Et(e[1],e[2],e[3],1):(e=Wh.exec(t))?new Et(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Gh.exec(t))?St(e[1],e[2],e[3],e[4]):(e=Vh.exec(t))?St(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Yh.exec(t))?Nt(e[1],e[2]/100,e[3]/100,1):(e=Xh.exec(t))?Nt(e[1],e[2]/100,e[3]/100,e[4]):Jh.hasOwnProperty(t)?kt(Jh[t]):"transparent"===t?new Et(NaN,NaN,NaN,0):null}function kt(t){return new Et(t>>16&255,t>>8&255,255&t,1)}function St(t,e,n,i){return i<=0&&(t=e=n=NaN),new Et(t,e,n,i)}function Pt(t){return t instanceof Mt||(t=Lt(t)),t?(t=t.rgb(),new Et(t.r,t.g,t.b,t.opacity)):new Et}function At(t,e,n,i){return 1===arguments.length?Pt(t):new Et(t,e,n,null==i?1:i)}function Et(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Nt(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ot(t,e,n,i)}function It(t){if(t instanceof Ot)return new Ot(t.h,t.s,t.l,t.opacity);if(t instanceof Mt||(t=Lt(t)),!t)return new Ot;if(t instanceof Ot)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,a=r-o,u=(r+o)/2;return a?(s=e===r?(n-i)/a+6*(n<i):n===r?(i-e)/a+2:(e-n)/a+4,a/=u<.5?r+o:2-r-o,s*=60):a=u>0&&u<1?0:s,new Ot(s,a,u,t.opacity)}function zt(t,e,n,i){return 1===arguments.length?It(t):new Ot(t,e,n,null==i?1:i)}function Ot(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Dt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Rt(t){if(t instanceof Bt)return new Bt(t.l,t.a,t.b,t.opacity);if(t instanceof Wt){var e=t.h*Qh;return new Bt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Et||(t=Pt(t));var n=Zt(t.r),i=Zt(t.g),o=Zt(t.b),r=$t((.4124564*n+.3575761*i+.1804375*o)/tf),s=$t((.2126729*n+.7151522*i+.072175*o)/ef);return new Bt(116*s-16,500*(r-s),200*(s-$t((.0193339*n+.119192*i+.9503041*o)/nf)),t.opacity)}function jt(t,e,n,i){return 1===arguments.length?Rt(t):new Bt(t,e,n,null==i?1:i)}function Bt(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function $t(t){return t>af?Math.pow(t,1/3):t/sf+of}function Ft(t){return t>rf?t*t*t:sf*(t-of)}function qt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Zt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ut(t){if(t instanceof Wt)return new Wt(t.h,t.c,t.l,t.opacity);t instanceof Bt||(t=Rt(t));var e=Math.atan2(t.b,t.a)*Kh;return new Wt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Ht(t,e,n,i){return 1===arguments.length?Ut(t):new Wt(t,e,n,null==i?1:i)}function Wt(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Gt(t){if(t instanceof Yt)return new Yt(t.h,t.s,t.l,t.opacity);t instanceof Et||(t=Pt(t));var e=t.r/255,n=t.g/255,i=t.b/255,o=(mf*i+df*e-pf*n)/(mf+df-pf),r=i-o,s=(ff*(n-o)-cf*r)/hf,a=Math.sqrt(s*s+r*r)/(ff*o*(1-o)),u=a?Math.atan2(s,r)*Kh-120:NaN;return new Yt(u<0?u+360:u,a,o,t.opacity)}function Vt(t,e,n,i){return 1===arguments.length?Gt(t):new Yt(t,e,n,null==i?1:i)}function Yt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Xt(t,e,n,i,o){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*n+(1+3*t+3*r-3*s)*i+s*o)/6}function Jt(t,e){return function(n){return t+n*e}}function Qt(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Kt(t,e){var n=e-t;return n?Jt(t,n>180||n<-180?n-360*Math.round(n/360):n):Cf(isNaN(t)?e:t)}function te(t){return 1==(t=+t)?ee:function(e,n){return n-e?Qt(e,n,t):Cf(isNaN(e)?n:e)}}function ee(t,e){var n=e-t;return n?Jt(t,n):Cf(isNaN(t)?e:t)}function ne(t){return function(e){var n,i,o=e.length,r=new Array(o),s=new Array(o),a=new Array(o);for(n=0;n<o;++n)i=At(e[n]),r[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return r=t(r),s=t(s),a=t(a),i.opacity=1,function(t){return i.r=r(t),i.g=s(t),i.b=a(t),i+""}}}function ie(t){return function(){return t}}function oe(t){return function(e){return t(e)+""}}function re(t){return"none"===t?jf:(gf||(gf=document.createElement("DIV"),vf=document.documentElement,_f=document.defaultView),gf.style.transform=t,t=_f.getComputedStyle(vf.appendChild(gf),null).getPropertyValue("transform"),vf.removeChild(gf),t=t.slice(7,-1).split(","),Bf(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function se(t){return null==t?jf:(yf||(yf=document.createElementNS("http://www.w3.org/2000/svg","g")),yf.setAttribute("transform",t),(t=yf.transform.baseVal.consolidate())?(t=t.matrix,Bf(t.a,t.b,t.c,t.d,t.e,t.f)):jf)}function ae(t,e,n,i){function o(t){return t.length?t.pop()+" ":""}function r(t,i,o,r,s,a){if(t!==o||i!==r){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:Af(t,o)},{i:u-2,x:Af(i,r)})}else(o||r)&&s.push("translate("+o+e+r+n)}function s(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(o(n)+"rotate(",null,i)-2,x:Af(t,e)})):e&&n.push(o(n)+"rotate("+e+i)}function a(t,e,n,r){t!==e?r.push({i:n.push(o(n)+"skewX(",null,i)-2,x:Af(t,e)}):e&&n.push(o(n)+"skewX("+e+i)}function u(t,e,n,i,r,s){if(t!==n||e!==i){var a=r.push(o(r)+"scale(",null,",",null,")");s.push({i:a-4,x:Af(t,n)},{i:a-2,x:Af(e,i)})}else 1===n&&1===i||r.push(o(r)+"scale("+n+","+i+")")}return function(e,n){var i=[],o=[];return e=t(e),n=t(n),r(e.translateX,e.translateY,n.translateX,n.translateY,i,o),s(e.rotate,n.rotate,i,o),a(e.skewX,n.skewX,i,o),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,i,o),e=n=null,function(t){for(var e,n=-1,r=o.length;++n<r;)i[(e=o[n]).i]=e.x(t);return i.join("")}}}function ue(t){return((t=Math.exp(t))+1/t)/2}function le(t){return((t=Math.exp(t))-1/t)/2}function ce(t){return((t=Math.exp(2*t))-1)/(t+1)}function he(t){return function(e,n){var i=t((e=zt(e)).h,(n=zt(n)).h),o=ee(e.s,n.s),r=ee(e.l,n.l),s=ee(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=r(t),e.opacity=s(t),e+""}}}function fe(t,e){var n=ee((t=jt(t)).l,(e=jt(e)).l),i=ee(t.a,e.a),o=ee(t.b,e.b),r=ee(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=o(e),t.opacity=r(e),t+""}}function de(t){return function(e,n){var i=t((e=Ht(e)).h,(n=Ht(n)).h),o=ee(e.c,n.c),r=ee(e.l,n.l),s=ee(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=o(t),e.l=r(t),e.opacity=s(t),e+""}}}function pe(t){return function e(n){function i(e,i){var o=t((e=Vt(e)).h,(i=Vt(i)).h),r=ee(e.s,i.s),s=ee(e.l,i.l),a=ee(e.opacity,i.opacity);return function(t){return e.h=o(t),e.s=r(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}function me(){return nd||(rd(ge),nd=od.now()+id)}function ge(){nd=0}function ve(){this._call=this._time=this._next=null}function _e(t,e,n){var i=new ve;return i.restart(t,e,n),i}function ye(){me(),++Jf;for(var t,e=bf;e;)(t=nd-e._time)>=0&&e._call.call(null,t),e=e._next;--Jf}function be(){nd=(ed=od.now())+id,Jf=Qf=0;try{ye()}finally{Jf=0,we(),nd=0}}function xe(){var t=od.now(),e=t-ed;e>td&&(id-=e,ed=t)}function we(){for(var t,e,n=bf,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:bf=e);xf=t,Te(i)}function Te(t){if(!Jf){Qf&&(Qf=clearTimeout(Qf));var e=t-nd;e>24?(t<1/0&&(Qf=setTimeout(be,e)),Kf&&(Kf=clearInterval(Kf))):(Kf||(ed=nd,Kf=setInterval(xe,td)),Jf=1,rd(be))}}function Ce(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>cd)throw new Error("too late");return n}function Me(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>fd)throw new Error("too late");return n}function Le(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function ke(t,e,n){function i(t){n.state=hd,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(i){var l,c,h,f;if(n.state!==hd)return s();for(l in u)if(f=u[l],f.name===n.name){if(f.state===dd)return sd(o);f.state===pd?(f.state=gd,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete u[l]):+l<e&&(f.state=gd,f.timer.stop(),delete u[l])}if(sd(function(){n.state===dd&&(n.state=pd,n.timer.restart(r,n.delay,n.time),r(i))}),n.state=fd,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fd){for(n.state=dd,a=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(a[++c]=f);a.length=c+1}}function r(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=md,1),o=-1,r=a.length;++o<r;)a[o].call(null,i);n.state===md&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=gd,n.timer.stop(),delete u[e];for(var i in u)return;delete t.__transition}var a,u=t.__transition;u[e]=n,n.timer=_e(i,0,n.time)}function Se(t,e){var n,i;return function(){var o=Me(this,t),r=o.tween;if(r!==n){i=n=r;for(var s=0,a=i.length;s<a;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function Pe(t,e,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var r=Me(this,t),s=r.tween;if(s!==i){o=(i=s).slice();for(var a={name:e,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===e){o[u]=a;break}u===l&&o.push(a)}r.tween=o}}function Ae(t,e,n){var i=t._id;return t.each(function(){var t=Me(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Le(t,i).value[e]}}function Ee(t){return function(){this.removeAttribute(t)}}function Ne(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ie(t,e,n){var i,o;return function(){var r=this.getAttribute(t);return r===n?null:r===i?o:o=e(i=r,n)}}function ze(t,e,n){var i,o;return function(){var r=this.getAttributeNS(t.space,t.local);return r===n?null:r===i?o:o=e(i=r,n)}}function Oe(t,e,n){var i,o,r;return function(){var s,a=n(this);return null==a?void this.removeAttribute(t):(s=this.getAttribute(t),s===a?null:s===i&&a===o?r:r=e(i=s,o=a))}}function De(t,e,n){var i,o,r;return function(){var s,a=n(this);return null==a?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),s===a?null:s===i&&a===o?r:r=e(i=s,o=a))}}function Re(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}function je(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n}function Be(t,e){return function(){Ce(this,t).delay=+e.apply(this,arguments)}}function $e(t,e){return e=+e,function(){Ce(this,t).delay=e}}function Fe(t,e){return function(){Me(this,t).duration=+e.apply(this,arguments)}}function qe(t,e){return e=+e,function(){Me(this,t).duration=e}}
function Ze(t,e){if("function"!=typeof e)throw new Error;return function(){Me(this,t).ease=e}}function Ue(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function He(t,e,n){var i,o,r=Ue(e)?Ce:Me;return function(){var s=r(this,t),a=s.on;a!==i&&(o=(i=a).copy()).on(e,n),s.on=o}}function We(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ge(t,e){var n,i,o;return function(){var r=H(this,t),s=(this.style.removeProperty(t),H(this,t));return r===s?null:r===n&&s===i?o:o=e(n=r,i=s)}}function Ve(t){return function(){this.style.removeProperty(t)}}function Ye(t,e,n){var i,o;return function(){var r=H(this,t);return r===n?null:r===i?o:o=e(i=r,n)}}function Xe(t,e,n){var i,o,r;return function(){var s=H(this,t),a=n(this);return null==a&&(this.style.removeProperty(t),a=H(this,t)),s===a?null:s===i&&a===o?r:r=e(i=s,o=a)}}function Je(t,e,n){function i(){var i=this,o=e.apply(i,arguments);return o&&function(e){i.style.setProperty(t,o(e),n)}}return i._value=e,i}function Qe(t){return function(){this.textContent=t}}function Ke(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function tn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function en(t){return vt().transition(t)}function nn(){return++Bd}function on(t){return+t}function rn(t){return t*t}function sn(t){return t*(2-t)}function an(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function un(t){return t*t*t}function ln(t){return--t*t*t+1}function cn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function hn(t){return 1-Math.cos(t*Hd)}function fn(t){return Math.sin(t*Hd)}function dn(t){return(1-Math.cos(Ud*t))/2}function pn(t){return Math.pow(2,10*t-10)}function mn(t){return 1-Math.pow(2,-10*t)}function gn(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function vn(t){return 1-Math.sqrt(1-t*t)}function _n(t){return Math.sqrt(1- --t*t)}function yn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function bn(t){return 1-xn(1-t)}function xn(t){return(t=+t)<Wd?ep*t*t:t<Vd?ep*(t-=Gd)*t+Yd:t<Jd?ep*(t-=Xd)*t+Qd:ep*(t-=Kd)*t+tp}function wn(t){return((t*=2)<=1?1-xn(1-t):xn(t-1)+1)/2}function Tn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return lp.time=me(),lp;return n}function Cn(){t.event.stopImmediatePropagation()}function Mn(t){return{type:t}}function Ln(){return!t.event.button}function kn(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Sn(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Pn(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function An(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function En(){return In(bp)}function Nn(){return In(xp)}function In(e){function n(t){var n=t.property("__brush",a).selectAll(".overlay").data([Mn("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Tp.overlay).merge(n).each(function(){var t=Sn(this).extent;Eh(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Mn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Tp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var o=t.selectAll(".handle").data(e.handles,function(t){return t.type});o.exit().remove(),o.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Tp[t.type]}),t.each(i).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",s)}function i(){var t=Eh(this),e=Sn(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-f/2:e[0][0]-f/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-f/2:e[0][1]-f/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+f:f}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+f:f})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function o(t,e){return t.__brush.emitter||new r(t,e)}function r(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function s(){function n(){var t=Yc(C);!D||w||T||(Math.abs(t[0]-j[0])>Math.abs(t[1]-j[1])?T=!0:w=!0),j=t,x=!0,mp(),r()}function r(){var t;switch(y=j[0]-R[0],b=j[1]-R[1],L){case vp:case gp:k&&(y=Math.max(N-h,Math.min(z-m,y)),f=h+y,g=m+y),S&&(b=Math.max(I-d,Math.min(O-v,b)),p=d+b,_=v+b);break;case _p:k<0?(y=Math.max(N-h,Math.min(z-h,y)),f=h+y,g=m):k>0&&(y=Math.max(N-m,Math.min(z-m,y)),f=h,g=m+y),S<0?(b=Math.max(I-d,Math.min(O-d,b)),p=d+b,_=v):S>0&&(b=Math.max(I-v,Math.min(O-v,b)),p=d,_=v+b);break;case yp:k&&(f=Math.max(N,Math.min(z,h-y*k)),g=Math.max(N,Math.min(z,m+y*k))),S&&(p=Math.max(I,Math.min(O,d-b*S)),_=Math.max(I,Math.min(O,v+b*S)))}g<f&&(k*=-1,t=h,h=m,m=t,t=f,f=g,g=t,M in Cp&&F.attr("cursor",Tp[M=Cp[M]])),_<p&&(S*=-1,t=d,d=v,v=t,t=p,p=_,_=t,M in Mp&&F.attr("cursor",Tp[M=Mp[M]])),P.selection&&(E=P.selection),w&&(f=E[0][0],g=E[1][0]),T&&(p=E[0][1],_=E[1][1]),E[0][0]===f&&E[0][1]===p&&E[1][0]===g&&E[1][1]===_||(P.selection=[[f,p],[g,_]],i.call(C),B.brush())}function s(){if(Cn(),t.event.touches){if(t.event.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500),$.on("touchmove.brush touchend.brush touchcancel.brush",null)}else yt(t.event.view,x),q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),F.attr("cursor",Tp.overlay),P.selection&&(E=P.selection),Pn(E)&&(P.selection=null,i.call(C)),B.end()}function a(){switch(t.event.keyCode){case 16:D=k&&S;break;case 18:L===_p&&(k&&(m=g-y*k,h=f+y*k),S&&(v=_-b*S,d=p+b*S),L=yp,r());break;case 32:L!==_p&&L!==yp||(k<0?m=g-y:k>0&&(h=f-y),S<0?v=_-b:S>0&&(d=p-b),L=vp,F.attr("cursor",Tp.selection),r());break;default:return}mp()}function l(){switch(t.event.keyCode){case 16:D&&(w=T=D=!1,r());break;case 18:L===yp&&(k<0?m=g:k>0&&(h=f),S<0?v=_:S>0&&(d=p),L=_p,r());break;case 32:L===vp&&(t.event.altKey?(k&&(m=g-y*k,h=f+y*k),S&&(v=_-b*S,d=p+b*S),L=yp):(k<0?m=g:k>0&&(h=f),S<0?v=_:S>0&&(d=p),L=_p),F.attr("cursor",Tp[M]),r());break;default:return}mp()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return mp()}else if(u)return;if(c.apply(this,arguments)){var h,f,d,p,m,g,v,_,y,b,x,w,T,C=this,M=t.event.target.__data__.type,L="selection"===(t.event.metaKey?M="overlay":M)?gp:t.event.altKey?yp:_p,k=e===xp?null:Lp[M],S=e===bp?null:kp[M],P=Sn(C),A=P.extent,E=P.selection,N=A[0][0],I=A[0][1],z=A[1][0],O=A[1][1],D=k&&S&&t.event.shiftKey,R=Yc(C),j=R,B=o(C,arguments).beforestart();"overlay"===M?P.selection=E=[[h=e===xp?N:R[0],d=e===bp?I:R[1]],[m=e===xp?z:h,v=e===bp?O:d]]:(h=E[0][0],d=E[0][1],m=E[1][0],v=E[1][1]),f=h,p=d,g=m,_=v;var $=Eh(C).attr("pointer-events","none"),F=$.selectAll(".overlay").attr("cursor",Tp[M]);if(t.event.touches)$.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",s,!0);else{var q=Eh(t.event.view).on("keydown.brush",a,!0).on("keyup.brush",l,!0).on("mousemove.brush",n,!0).on("mouseup.brush",s,!0);Dh(t.event.view)}Cn(),_d(C),i.call(C),B.start()}}function a(){var t=this.__brush||{selection:null};return t.extent=l.apply(this,arguments),t.dim=e,t}var u,l=kn,c=Ln,h=m(n,"start","brush","end"),f=6;return n.move=function(t,n){t.selection?t.on("start.brush",function(){o(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){o(this,arguments).end()}).tween("brush",function(){function t(t){s.selection=1===t&&Pn(l)?null:c(t),i.call(r),a.brush()}var r=this,s=r.__brush,a=o(r,arguments),u=s.selection,l=e.input("function"==typeof n?n.apply(this,arguments):n,s.extent),c=Of(u,l);return u&&l?t:t(1)}):t.each(function(){var t=this,r=arguments,s=t.__brush,a=e.input("function"==typeof n?n.apply(t,r):n,s.extent),u=o(t,r).beforestart();_d(t),s.selection=null==a||Pn(a)?null:a,i.call(t),u.start().brush().end()})},r.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){P(new pp(n,t,e.output(this.state.selection)),h.apply,h,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(l="function"==typeof t?t:dp([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):l},n.filter=function(t){return arguments.length?(c="function"==typeof t?t:dp(!!t),n):c},n.handleSize=function(t){return arguments.length?(f=+t,n):f},n.on=function(){var t=h.on.apply(h,arguments);return t===h?n:t},n}function zn(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function On(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Dn(){return new On}function Rn(t){return t.source}function jn(t){return t.target}function Bn(t){return t.radius}function $n(t){return t.startAngle}function Fn(t){return t.endAngle}function qn(){}function Zn(t,e){var n=new qn;if(t instanceof qn)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,r=t.length;if(null==e)for(;++o<r;)n.set(o,t[o]);else for(;++o<r;)n.set(e(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}function Un(){return{}}function Hn(t,e,n){t[e]=n}function Wn(){return Zn()}function Gn(t,e,n){t.set(e,n)}function Vn(){}function Yn(t,e){var n=new Vn;if(t instanceof Vn)t.each(function(t){n.add(t)});else if(t){var i=-1,o=t.length;if(null==e)for(;++i<o;)n.add(t[i]);else for(;++i<o;)n.add(e(t[i],i,t))}return n}function Xn(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function Jn(t,e){var n=Xn(t);return function(i,o){return e(n(i),o,t)}}function Qn(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}function Kn(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var o,r,s,a,u,l,c,h,f,d=t._root,p={data:i},m=t._x0,g=t._y0,v=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(r=(m+v)/2))?m=r:v=r,(c=n>=(s=(g+_)/2))?g=s:_=s,o=d,!(d=d[h=c<<1|l]))return o[h]=p,t;if(a=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===a&&n===u)return p.next=d,o?o[h]=p:t._root=p,t;do{o=o?o[h]=new Array(4):t._root=new Array(4),(l=e>=(r=(m+v)/2))?m=r:v=r,(c=n>=(s=(g+_)/2))?g=s:_=s}while((h=c<<1|l)==(f=(u>=s)<<1|a>=r));return o[f]=d,o[h]=p,t}function ti(t){var e,n,i,o,r=t.length,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>h&&(h=o));for(c<u&&(u=this._x0,c=this._x1),h<l&&(l=this._y0,h=this._y1),this.cover(u,l).cover(c,h),n=0;n<r;++n)Kn(this,s[n],a[n],t[n]);return this}function ei(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ni(t){return t[0]}function ii(t){return t[1]}function oi(t,e,n){var i=new ri(null==e?ni:e,null==n?ii:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function ri(t,e,n,i,o,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=o,this._y1=r,this._root=void 0}function si(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function ai(t){return t.x+t.vx}function ui(t){return t.y+t.vy}function li(t){return t.index}function ci(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function hi(t){return t.x}function fi(t){return t.y}function di(t){return new pi(t)}function pi(t){if(!(e=jm.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",o=e[3]||"-",r=e[4]||"",s=!!e[5],a=e[6]&&+e[6],u=!!e[7],l=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(u=!0,c="g"):Rm[c]||(c=""),(s||"0"===n&&"="===i)&&(s=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=o,this.symbol=r,this.zero=s,this.width=a,this.comma=u,this.precision=l,this.type=c}function mi(e){return Bm=qm(e),t.format=Bm.format,t.formatPrefix=Bm.formatPrefix,Bm}function gi(){this.reset()}function vi(t,e,n){var i=t.s=e+n,o=i-e,r=i-o;t.t=e-r+(n-o)}function _i(t){return t>1?0:t<-1?Lg:Math.acos(t)}function yi(t){return t>1?kg:t<-1?-kg:Math.asin(t)}function bi(t){return(t=$g(t/2))*t}function xi(){}function wi(t,e){t&&Hg.hasOwnProperty(t.type)&&Hg[t.type](t,e)}function Ti(t,e,n){var i,o=-1,r=t.length-n;for(e.lineStart();++o<r;)i=t[o],e.point(i[0],i[1],i[2]);e.lineEnd()}function Ci(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ti(t[n],e,1);e.polygonEnd()}function Mi(){Yg.point=ki}function Li(){Si(Gm,Vm)}function ki(t,e){Yg.point=Si,Gm=t,Vm=e,t*=Eg,e*=Eg,Ym=t,Xm=Og(e=e/2+Sg),Jm=$g(e)}function Si(t,e){t*=Eg,e*=Eg,e=e/2+Sg;var n=t-Ym,i=n>=0?1:-1,o=i*n,r=Og(e),s=$g(e),a=Jm*s,u=Xm*r+a*Og(o),l=a*i*$g(o);Gg.add(zg(l,u)),Ym=t,Xm=r,Jm=s}function Pi(t){return[zg(t[1],t[0]),yi(t[2])]}function Ai(t){var e=t[0],n=t[1],i=Og(n);return[i*Og(e),i*$g(e),$g(n)]}function Ei(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ni(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ii(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function zi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Oi(t){var e=qg(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Di(t,e){sg.push(ag=[Qm=t,tg=t]),e<Km&&(Km=e),e>eg&&(eg=e)}function Ri(t,e){var n=Ai([t*Eg,e*Eg]);if(rg){var i=Ni(rg,n),o=[i[1],-i[0],0],r=Ni(o,i);Oi(r),r=Pi(r);var s,a=t-ng,u=a>0?1:-1,l=r[0]*Ag*u,c=Ng(a)>180;c^(u*ng<l&&l<u*t)?(s=r[1]*Ag)>eg&&(eg=s):(l=(l+360)%360-180,c^(u*ng<l&&l<u*t)?(s=-r[1]*Ag)<Km&&(Km=s):(e<Km&&(Km=e),e>eg&&(eg=e))),c?t<ng?Zi(Qm,t)>Zi(Qm,tg)&&(tg=t):Zi(t,tg)>Zi(Qm,tg)&&(Qm=t):tg>=Qm?(t<Qm&&(Qm=t),t>tg&&(tg=t)):t>ng?Zi(Qm,t)>Zi(Qm,tg)&&(tg=t):Zi(t,tg)>Zi(Qm,tg)&&(Qm=t)}else sg.push(ag=[Qm=t,tg=t]);e<Km&&(Km=e),e>eg&&(eg=e),rg=n,ng=t}function ji(){Qg.point=Ri}function Bi(){ag[0]=Qm,ag[1]=tg,Qg.point=Di,rg=null}function $i(t,e){if(rg){var n=t-ng;Jg.add(Ng(n)>180?n+(n>0?360:-360):n)}else ig=t,og=e;Yg.point(t,e),Ri(t,e)}function Fi(){Yg.lineStart()}function qi(){$i(ig,og),Yg.lineEnd(),Ng(Jg)>Mg&&(Qm=-(tg=180)),ag[0]=Qm,ag[1]=tg,rg=null}function Zi(t,e){return(e-=t)<0?e+360:e}function Ui(t,e){return t[0]-e[0]}function Hi(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Wi(t,e){t*=Eg,e*=Eg;var n=Og(e);Gi(n*Og(t),n*$g(t),$g(e))}function Gi(t,e,n){++ug,cg+=(t-cg)/ug,hg+=(e-hg)/ug,fg+=(n-fg)/ug}function Vi(){tv.point=Yi}function Yi(t,e){t*=Eg,e*=Eg;var n=Og(e);xg=n*Og(t),wg=n*$g(t),Tg=$g(e),tv.point=Xi,Gi(xg,wg,Tg)}function Xi(t,e){t*=Eg,e*=Eg;var n=Og(e),i=n*Og(t),o=n*$g(t),r=$g(e),s=zg(qg((s=wg*r-Tg*o)*s+(s=Tg*i-xg*r)*s+(s=xg*o-wg*i)*s),xg*i+wg*o+Tg*r);lg+=s,dg+=s*(xg+(xg=i)),pg+=s*(wg+(wg=o)),mg+=s*(Tg+(Tg=r)),Gi(xg,wg,Tg)}function Ji(){tv.point=Wi}function Qi(){tv.point=to}function Ki(){eo(yg,bg),tv.point=Wi}function to(t,e){yg=t,bg=e,t*=Eg,e*=Eg,tv.point=eo;var n=Og(e);xg=n*Og(t),wg=n*$g(t),Tg=$g(e),Gi(xg,wg,Tg)}function eo(t,e){t*=Eg,e*=Eg;var n=Og(e),i=n*Og(t),o=n*$g(t),r=$g(e),s=wg*r-Tg*o,a=Tg*i-xg*r,u=xg*o-wg*i,l=qg(s*s+a*a+u*u),c=yi(l),h=l&&-c/l;gg+=h*s,vg+=h*a,_g+=h*u,lg+=c,dg+=c*(xg+(xg=i)),pg+=c*(wg+(wg=o)),mg+=c*(Tg+(Tg=r)),Gi(xg,wg,Tg)}function no(t,e){return[t>Lg?t-Pg:t<-Lg?t+Pg:t,e]}function io(t,e,n){return(t%=Pg)?e||n?iv(ro(t),so(e,n)):ro(t):e||n?so(e,n):no}function oo(t){return function(e,n){return e+=t,[e>Lg?e-Pg:e<-Lg?e+Pg:e,n]}}function ro(t){var e=oo(t);return e.invert=oo(-t),e}function so(t,e){function n(t,e){var n=Og(e),a=Og(t)*n,u=$g(t)*n,l=$g(e),c=l*i+a*o;return[zg(u*r-c*s,a*i-l*o),yi(c*r+u*s)]}var i=Og(t),o=$g(t),r=Og(e),s=$g(e);return n.invert=function(t,e){var n=Og(e),a=Og(t)*n,u=$g(t)*n,l=$g(e),c=l*r-u*s;return[zg(u*r+l*s,a*i+c*o),yi(c*i-a*o)]},n}function ao(t,e,n,i,o,r){if(n){var s=Og(e),a=$g(e),u=i*n;null==o?(o=e+i*Pg,r=e-u/2):(o=uo(s,o),r=uo(s,r),(i>0?o<r:o>r)&&(o+=i*Pg));for(var l,c=o;i>0?c>r:c<r;c-=u)l=Pi([s,-a*Og(c),-a*$g(c)]),t.point(l[0],l[1])}}function uo(t,e){e=Ai(e),e[0]-=t,Oi(e);var n=_i(-e[1]);return((-e[2]<0?-n:n)+Pg-Mg)%Pg}function lo(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function co(t){if(e=t.length){for(var e,n,i=0,o=t[0];++i<e;)o.n=n=t[i],n.p=o,o=n;o.n=n=t[0],n.p=o}}function ho(t,e,n,i){function o(o,r){return t<=o&&o<=n&&e<=r&&r<=i}function r(o,r,a,l){var c=0,h=0;if(null==o||(c=s(o,a))!==(h=s(r,a))||u(o,r)<0^a>0)do{l.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==h);else l.point(r[0],r[1])}function s(i,o){return Ng(i[0]-t)<Mg?o>0?0:3:Ng(i[0]-n)<Mg?o>0?2:1:Ng(i[1]-e)<Mg?o>0?1:0:o>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){o(t,e)&&L.point(t,e)}function l(){for(var e=0,n=0,o=g.length;n<o;++n)for(var r,s,a=g[n],u=1,l=a.length,c=a[0],h=c[0],f=c[1];u<l;++u)r=h,s=f,c=a[u],h=c[0],f=c[1],s<=i?f>i&&(h-r)*(i-s)>(f-s)*(t-r)&&++e:f<=i&&(h-r)*(i-s)<(f-s)*(t-r)&&--e;return e}function c(){L=k,m=[],g=[],M=!0}function h(){var t=l(),e=M&&t,n=(m=bc(m)).length;(e||n)&&(s.polygonStart(),e&&(s.lineStart(),r(null,null,1,s),s.lineEnd()),n&&bv(m,a,t,r,s),s.polygonEnd()),L=s,m=g=v=null}function f(){S.point=p,g&&g.push(v=[]),C=!0,T=!1,x=w=NaN}function d(){m&&(p(_,y),b&&T&&k.rejoin(),m.push(k.result())),S.point=u,T&&L.lineEnd()}function p(r,s){var a=o(r,s);if(g&&v.push([r,s]),C)_=r,y=s,b=a,C=!1,a&&(L.lineStart(),L.point(r,s));else if(a&&T)L.point(r,s);else{var u=[x=Math.max(wv,Math.min(xv,x)),w=Math.max(wv,Math.min(xv,w))],l=[r=Math.max(wv,Math.min(xv,r)),s=Math.max(wv,Math.min(xv,s))];_v(u,l,t,e,n,i)?(T||(L.lineStart(),L.point(u[0],u[1])),L.point(l[0],l[1]),a||L.lineEnd(),M=!1):a&&(L.lineStart(),L.point(r,s),M=!1)}x=r,w=s,T=a}var m,g,v,_,y,b,x,w,T,C,M,L=s,k=vv(),S={point:u,lineStart:f,lineEnd:d,polygonStart:c,polygonEnd:h};return S}}function fo(){kv.point=mo,kv.lineEnd=po}function po(){kv.point=kv.lineEnd=xi}function mo(t,e){t*=Eg,e*=Eg,ov=t,rv=$g(e),sv=Og(e),kv.point=go}function go(t,e){t*=Eg,e*=Eg;var n=$g(e),i=Og(e),o=Ng(t-ov),r=Og(o),s=$g(o),a=i*s,u=sv*n-rv*i*r,l=rv*n+sv*i*r;Lv.add(zg(qg(a*a+u*u),l)),ov=t,rv=n,sv=i}function vo(t,e){return!(!t||!Iv.hasOwnProperty(t.type))&&Iv[t.type](t,e)}function _o(t,e){return 0===Ev(t,e)}function yo(t,e){var n=Ev(t[0],t[1]);return Ev(t[0],e)+Ev(e,t[1])<=n+Mg}function bo(t,e){return!!Mv(t.map(xo),wo(e))}function xo(t){return t=t.map(wo),t.pop(),t}function wo(t){return[t[0]*Eg,t[1]*Eg]}function To(t,e,n){var i=ac(t,e-Mg,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function Co(t,e,n){var i=ac(t,e-Mg,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function Mo(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ac(Dg(r/g)*g,o,g).map(f).concat(ac(Dg(l/v)*v,u,v).map(d)).concat(ac(Dg(i/p)*p,n,p).filter(function(t){return Ng(t%g)>Mg}).map(c)).concat(ac(Dg(a/m)*m,s,m).filter(function(t){return Ng(t%v)>Mg}).map(h))}var n,i,o,r,s,a,u,l,c,h,f,d,p=10,m=p,g=90,v=360,_=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(d(u).slice(1),f(o).reverse().slice(1),d(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(r=+e[0][0],o=+e[1][0],l=+e[0][1],u=+e[1][1],r>o&&(e=r,r=o,o=e),l>u&&(e=l,l=u,u=e),t.precision(_)):[[r,l],[o,u]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(_)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(g=+e[0],v=+e[1],t):[g,v]},t.stepMinor=function(e){return arguments.length?(p=+e[0],m=+e[1],t):[p,m]},t.precision=function(e){return arguments.length?(_=+e,c=To(a,s,90),h=Co(i,n,_),f=To(l,u,90),d=Co(r,o,_),t):_},t.extentMajor([[-180,-90+Mg],[180,90-Mg]]).extentMinor([[-180,-80-Mg],[180,80+Mg]])}function Lo(){return Mo()()}function ko(){Bv.point=So}function So(t,e){Bv.point=Po,av=lv=t,uv=cv=e}function Po(t,e){jv.add(cv*t-lv*e),lv=t,cv=e}function Ao(){Po(av,uv)}function Eo(t,e){t<$v&&($v=t),t>qv&&(qv=t),e<Fv&&(Fv=e),e>Zv&&(Zv=e)}function No(t,e){Hv+=t,Wv+=e,++Gv}function Io(){t_.point=zo}function zo(t,e){t_.point=Oo,No(dv=t,pv=e)}function Oo(t,e){var n=t-dv,i=e-pv,o=qg(n*n+i*i);Vv+=o*(dv+t)/2,Yv+=o*(pv+e)/2,Xv+=o,No(dv=t,pv=e)}function Do(){t_.point=No}function Ro(){t_.point=Bo}function jo(){$o(hv,fv)}function Bo(t,e){t_.point=$o,No(hv=dv=t,fv=pv=e)}function $o(t,e){var n=t-dv,i=e-pv,o=qg(n*n+i*i);Vv+=o*(dv+t)/2,Yv+=o*(pv+e)/2,Xv+=o,o=pv*t-dv*e,Jv+=o*(dv+t),Qv+=o*(pv+e),Kv+=3*o,No(dv=t,pv=e)}function Fo(t){this._context=t}function qo(t,e){a_.point=Zo,n_=o_=t,i_=r_=e}function Zo(t,e){o_-=t,r_-=e,s_.add(qg(o_*o_+r_*r_)),o_=t,r_=e}function Uo(){this._string=[]}function Ho(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Wo(t){return t.length>1}function Go(t,e){return((t=t.x)[0]<0?t[1]-kg-Mg:kg-t[1])-((e=e.x)[0]<0?e[1]-kg-Mg:kg-e[1])}function Vo(t){var e,n=NaN,i=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,s){var a=r>0?Lg:-Lg,u=Ng(r-n);Ng(u-Lg)<Mg?(t.point(n,i=(i+s)/2>0?kg:-kg),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(r,i),e=0):o!==a&&u>=Lg&&(Ng(n-o)<Mg&&(n-=o*Mg),Ng(r-a)<Mg&&(r-=a*Mg),i=Yo(n,i,r,s),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=r,i=s),o=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function Yo(t,e,n,i){var o,r,s=$g(t-n);return Ng(s)>Mg?Ig(($g(e)*(r=Og(i))*$g(n)-$g(i)*(o=Og(e))*$g(t))/(o*r*s)):(e+i)/2}function Xo(t,e,n,i){var o;if(null==t)o=n*kg,i.point(-Lg,o),i.point(0,o),i.point(Lg,o),i.point(Lg,0),i.point(Lg,-o),i.point(0,-o),i.point(-Lg,-o),i.point(-Lg,0),i.point(-Lg,o);else if(Ng(t[0]-e[0])>Mg){var r=t[0]<e[0]?Lg:-Lg;o=n*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(e[0],e[1])}function Jo(t){return function(e){var n=new Qo;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Qo(){}function Ko(t,e,n){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],r=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Wg(n,t.stream(Uv));var s=Uv.result(),a=Math.min(i/(s[1][0]-s[0][0]),o/(s[1][1]-s[0][1])),u=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(o-a*(s[1][1]+s[0][1]))/2;return null!=r&&t.clipExtent(r),t.scale(150*a).translate([u,l])}function tr(t,e,n){return Ko(t,[[0,0],e],n)}function er(t){return Jo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function nr(t,e){function n(i,o,r,s,a,u,l,c,h,f,d,p,m,g){var v=l-i,_=c-o,y=v*v+_*_;if(y>4*e&&m--){var b=s+f,x=a+d,w=u+p,T=qg(b*b+x*x+w*w),C=yi(w/=T),M=Ng(Ng(w)-1)<Mg||Ng(r-h)<Mg?(r+h)/2:zg(x,b),L=t(M,C),k=L[0],S=L[1],P=k-i,A=S-o,E=_*P-v*A;(E*E/y>e||Ng((v*P+_*A)/y-.5)>.3||s*f+a*d+u*p<p_)&&(n(i,o,r,s,a,u,k,S,M,b/=T,x/=T,w,m,g),g.point(k,S),n(k,S,M,b,x,w,l,c,h,f,d,p,m,g))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function o(){v=NaN,w.point=r,e.lineStart()}function r(i,o){var r=Ai([i,o]),s=t(i,o);n(v,_,g,y,b,x,v=s[0],_=s[1],g=i,y=r[0],b=r[1],x=r[2],d_,e),e.point(v,_)}function s(){w.point=i,e.lineEnd()}function a(){o(),w.point=u,w.lineEnd=l}function u(t,e){r(c=t,e),h=v,f=_,d=y,p=b,m=x,w.point=r}function l(){n(v,_,g,y,b,x,h,f,c,d,p,m,d_,e),w.lineEnd=s,s()}var c,h,f,d,p,m,g,v,_,y,b,x,w={point:i,lineStart:o,lineEnd:s,polygonStart:function(){e.polygonStart(),w.lineStart=a},polygonEnd:function(){e.polygonEnd(),w.lineStart=o}};return w}}function ir(t){return or(function(){return t})()}function or(t){function e(t){return t=c(t[0]*Eg,t[1]*Eg),[t[0]*g+a,u-t[1]*g]}function n(t){return(t=c.invert((t[0]-a)/g,(u-t[1])/g))&&[t[0]*Ag,t[1]*Ag]}function i(t,e){return t=s(t,e),[t[0]*g+a,u-t[1]*g]}function o(){c=iv(l=io(x,w,T),s);var t=s(y,b);return a=v-t[0]*g,u=_+t[1]*g,r()}function r(){return p=m=null,e}var s,a,u,l,c,h,f,d,p,m,g=150,v=480,_=250,y=0,b=0,x=0,w=0,T=0,C=null,M=c_,L=null,k=Dv,S=.5,P=m_(i,S);return e.stream=function(t){return p&&m===t?p:p=g_(M(l,P(k(m=t))))},e.clipAngle=function(t){return arguments.length?(M=+t?h_(C=t*Eg,6*Eg):(C=null,c_),r()):C*Ag},e.clipExtent=function(t){return arguments.length?(k=null==t?(L=h=f=d=null,Dv):ho(L=+t[0][0],h=+t[0][1],f=+t[1][0],d=+t[1][1]),r()):null==L?null:[[L,h],[f,d]]},e.scale=function(t){return arguments.length?(g=+t,o()):g},e.translate=function(t){return arguments.length?(v=+t[0],_=+t[1],o()):[v,_]},e.center=function(t){return arguments.length?(y=t[0]%360*Eg,b=t[1]%360*Eg,o()):[y*Ag,b*Ag]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Eg,w=t[1]%360*Eg,T=t.length>2?t[2]%360*Eg:0,o()):[x*Ag,w*Ag,T*Ag]},e.precision=function(t){return arguments.length?(P=m_(i,S=t*t),r()):qg(S)},e.fitExtent=function(t,n){return Ko(e,t,n)},e.fitSize=function(t,n){return tr(e,t,n)},function(){return s=t.apply(this,arguments),e.invert=s.invert&&n,o()}}function rr(t){var e=0,n=Lg/3,i=or(t),o=i(e,n);return o.parallels=function(t){return arguments.length?i(e=t[0]*Eg,n=t[1]*Eg):[e*Ag,n*Ag]},o}function sr(t){function e(t,e){return[t*n,$g(e)/n]}var n=Og(t);return e.invert=function(t,e){return[t/n,yi(e*n)]},e}function ar(t,e){function n(t,e){var n=qg(r-2*o*$g(e))/o;return[n*$g(t*=o),s-n*Og(t)]}var i=$g(t),o=(i+$g(e))/2;if(Ng(o)<Mg)return sr(t);var r=1+i*(2*o-i),s=qg(r)/o;return n.invert=function(t,e){var n=s-e;return[zg(t,Ng(n))/o*Fg(n),yi((r-(t*t+n*n)*o*o)/(2*o))]},n}function ur(t){var e=t.length;return{point:function(n,i){for(var o=-1;++o<e;)t[o].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function lr(t){return function(e,n){var i=Og(e),o=Og(n),r=t(i*o);return[r*o*$g(e),r*$g(n)]}}function cr(t){return function(e,n){var i=qg(e*e+n*n),o=t(i),r=$g(o),s=Og(o);return[zg(e*r,i*s),yi(i&&n*r/i)]}}function hr(t,e){return[t,jg(Zg((kg+e)/2))]}function fr(t){function e(){var e=Lg*a(),s=r(mv(r.rotate()).invert([0,0]));return l(null==c?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===hr?[[Math.max(s[0]-e,c),n],[Math.min(s[0]+e,i),o]]:[[c,Math.max(s[1]-e,n)],[i,Math.min(s[1]+e,o)]])}var n,i,o,r=ir(t),s=r.center,a=r.scale,u=r.translate,l=r.clipExtent,c=null;return r.scale=function(t){return arguments.length?(a(t),e()):a()},r.translate=function(t){return arguments.length?(u(t),e()):u()},r.center=function(t){return arguments.length?(s(t),e()):s()},r.clipExtent=function(t){return arguments.length?(null==t?c=n=i=o=null:(c=+t[0][0],n=+t[0][1],i=+t[1][0],o=+t[1][1]),e()):null==c?null:[[c,n],[i,o]]},e()}function dr(t){return Zg((kg+t)/2)}function pr(t,e){function n(t,e){r>0?e<-kg+Mg&&(e=-kg+Mg):e>kg-Mg&&(e=kg-Mg);var n=r/Bg(dr(e),o);return[n*$g(o*t),r-n*Og(o*t)]}var i=Og(t),o=t===e?$g(t):jg(i/Og(e))/jg(dr(e)/dr(t)),r=i*Bg(dr(t),o)/o;return o?(n.invert=function(t,e){var n=r-e,i=Fg(o)*qg(t*t+n*n);return[zg(t,Ng(n))/o*Fg(n),2*Ig(Bg(r/i,1/o))-kg]},n):hr}function mr(t,e){return[t,e]}function gr(t,e){function n(t,e){var n=r-e,i=o*t;return[n*$g(i),r-n*Og(i)]}var i=Og(t),o=t===e?$g(t):(i-Og(e))/(e-t),r=i/o+t;return Ng(o)<Mg?mr:(n.invert=function(t,e){var n=r-e;return[zg(t,Ng(n))/o*Fg(n),r-Fg(o)*qg(t*t+n*n)]},n)}function vr(t,e){var n=Og(e),i=Og(t)*n;return[n*$g(t)/i,$g(e)/i]}function _r(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?Dv:Jo({point:function(o,r){this.stream.point(o*t+n,r*e+i)}})}function yr(t,e){return[Og(e)*$g(t),$g(e)]}function br(t,e){var n=Og(e),i=1+Og(t)*n;return[n*$g(t)/i,$g(e)/i]}function xr(t,e){return[jg(Zg((kg+e)/2)),-t]}function wr(t,e){return t.parent===e.parent?1:2}function Tr(t){return t.reduce(Cr,0)/t.length}function Cr(t,e){return t+e.x}function Mr(t){return 1+t.reduce(Lr,0)}function Lr(t,e){return Math.max(t,e.y)}function kr(t){for(var e;e=t.children;)t=e[0];return t}function Sr(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Pr(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function Ar(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),o=null;for(t=n.pop(),e=i.pop();t===e;)o=t,t=n.pop(),e=i.pop();return o}function Er(t,e){var n,i,o,r,s,a=new Dr(t),u=+t.value&&(a.value=t.value),l=[a];for(null==e&&(e=Ir);n=l.pop();)if(u&&(n.value=+n.data.value),(o=e(n.data))&&(s=o.length))for(n.children=new Array(s),r=s-1;r>=0;--r)l.push(i=n.children[r]=new Dr(o[r])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(Or)}function Nr(){return Er(this).eachBefore(zr)}function Ir(t){return t.children}function zr(t){t.data=t.data.data}function Or(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Dr(t){this.data=t,this.depth=this.height=0,this.parent=null}function Rr(t){this._=t,this.next=null}function jr(t,e){var n=e.x-t.x,i=e.y-t.y,o=t.r-e.r;return o*o+1e-6>n*n+i*i}function Br(t,e){var n,i,o,r=null,s=t.head;switch(e.length){case 1:n=$r(e[0]);break;case 2:n=Fr(e[0],e[1]);break;case 3:n=qr(e[0],e[1],e[2])}for(;s;)o=s._,i=s.next,n&&jr(n,o)?r=s:(r?(t.tail=r,r.next=null):t.head=t.tail=null,e.push(o),n=Br(t,e),e.pop(),t.head?(s.next=t.head,t.head=s):(s.next=null,t.head=t.tail=s),r=t.tail,r.next=i),s=i;return t.tail=r,n}function $r(t){return{x:t.x,y:t.y,r:t.r}}function Fr(t,e){var n=t.x,i=t.y,o=t.r,r=e.x,s=e.y,a=e.r,u=r-n,l=s-i,c=a-o,h=Math.sqrt(u*u+l*l);return{x:(n+r+u/h*c)/2,y:(i+s+l/h*c)/2,r:(h+o+a)/2}}function qr(t,e,n){var i=t.x,o=t.y,r=t.r,s=e.x,a=e.y,u=e.r,l=n.x,c=n.y,h=n.r,f=2*(i-s),d=2*(o-a),p=2*(u-r),m=i*i+o*o-r*r-s*s-a*a+u*u,g=2*(i-l),v=2*(o-c),_=2*(h-r),y=i*i+o*o-r*r-l*l-c*c+h*h,b=g*d-f*v,x=(d*y-v*m)/b-i,w=(v*p-d*_)/b,T=(g*m-f*y)/b-o,C=(f*_-g*p)/b,M=w*w+C*C-1,L=2*(x*w+T*C+r),k=x*x+T*T-r*r,S=(-L-Math.sqrt(L*L-4*M*k))/(2*M);return{x:x+w*S+i,y:T+C*S+o,r:S}}function Zr(t,e,n){var i=t.x,o=t.y,r=e.r+n.r,s=t.r+n.r,a=e.x-i,u=e.y-o,l=a*a+u*u;if(l){var c=.5+((s*=s)-(r*=r))/(2*l),h=Math.sqrt(Math.max(0,2*r*(s+l)-(s-=l)*s-r*r))/(2*l);n.x=i+c*a+h*u,n.y=o+c*u-h*a}else n.x=i+s,n.y=o}function Ur(t,e){var n=e.x-t.x,i=e.y-t.y,o=t.r+e.r;return o*o-1e-6>n*n+i*i}function Hr(t,e,n){var i=t._,o=t.next._,r=i.r+o.r,s=(i.x*o.r+o.x*i.r)/r-e,a=(i.y*o.r+o.y*i.r)/r-n;return s*s+a*a}function Wr(t){this._=t,this.next=null,this.previous=null}function Gr(t){if(!(o=t.length))return 0;var e,n,i,o;if(e=t[0],e.x=0,e.y=0,!(o>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(o>2))return e.r+n.r;Zr(n,e,i=t[2]);var r,s,a,u,l,c,h,f=e.r*e.r,d=n.r*n.r,p=i.r*i.r,m=f+d+p,g=f*e.x+d*n.x+p*i.x,v=f*e.y+d*n.y+p*i.y;e=new Wr(e),n=new Wr(n),i=new Wr(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(a=3;a<o;++a){Zr(e._,n._,i=t[a]),i=new Wr(i),u=n.next,l=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(Ur(u._,i._)){n=u,e.next=n,n.previous=e,--a;continue t}c+=u._.r,u=u.next}else{if(Ur(l._,i._)){e=l,e.next=n,n.previous=e,--a;continue t}h+=l._.r,l=l.previous}}while(u!==l.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,m+=p=i._.r*i._.r,g+=p*i._.x,v+=p*i._.y,f=Hr(e,r=g/m,s=v/m);(i=i.next)!==n;)(p=Hr(i,r,s))<f&&(e=i,f=p);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=W_(e),a=0;a<o;++a)e=t[a],e.x-=i.x,e.y-=i.y;return i.r}function Vr(t){return null==t?null:Yr(t)}function Yr(t){if("function"!=typeof t)throw new Error;return t}function Xr(){return 0}function Jr(t){return Math.sqrt(t.value)}function Qr(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Kr(t,e){return function(n){if(i=n.children){var i,o,r,s=i.length,a=t(n)*e||0;if(a)for(o=0;o<s;++o)i[o].r+=a;if(r=Gr(i),
a)for(o=0;o<s;++o)i[o].r-=a;n.r=r+a}}}function ts(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function es(t){return t.id}function ns(t){return t.parentId}function is(t,e){return t.parent===e.parent?1:2}function os(t){var e=t.children;return e?e[0]:t.t}function rs(t){var e=t.children;return e?e[e.length-1]:t.t}function ss(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function as(t){for(var e,n=0,i=0,o=t.children,r=o.length;--r>=0;)e=o[r],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function us(t,e,n){return t.a.parent===e.parent?t.a:n}function ls(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function cs(t){for(var e,n,i,o,r,s=new ls(t,0),a=[s];e=a.pop();)if(i=e._.children)for(e.children=new Array(r=i.length),o=r-1;o>=0;--o)a.push(n=e.children[o]=new ls(i[o],o)),n.parent=e;return(s.parent=new ls(null,0)).children=[s],s}function hs(t,e,n,i,o,r){for(var s,a,u,l,c,h,f,d,p,m,g,v=[],_=e.children,y=0,b=0,x=_.length,w=e.value;y<x;){u=o-n,l=r-i;do{c=_[b++].value}while(!c&&b<x);for(h=f=c,m=Math.max(l/u,u/l)/(w*t),g=c*c*m,p=Math.max(f/g,g/h);b<x;++b){if(c+=a=_[b].value,a<h&&(h=a),a>f&&(f=a),g=c*c*m,(d=Math.max(f/g,g/h))>p){c-=a;break}p=d}v.push(s={value:c,dice:u<l,children:_.slice(y,b)}),s.dice?J_(s,n,i,o,w?i+=l*c/w:r):oy(s,n,i,w?n+=u*c/w:o,r),w-=c,y=b}return v}function fs(t,e){return t[0]-e[0]||t[1]-e[1]}function ds(t){for(var e=t.length,n=[0,1],i=2,o=2;o<e;++o){for(;i>1&&dy(t[n[i-2]],t[n[i-1]],t[o])<=0;)--i;n[i++]=o}return n.slice(0,i)}function ps(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function ms(t){if(!t._start)try{gs(t)}catch(e){if(t._tasks[t._ended+t._active-1])_s(t,e);else if(!t._data)throw e}}function gs(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,o=n[i];n[i]=vs(t,e),--t._waiting,++t._active,n=o.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||_y)}}function vs(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?_s(t,n):(t._data[e]=i,t._waiting?ms(t):ys(t))))}}function _s(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,ys(t)}function ys(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function bs(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new ps(t)}function xs(t){return function(e,n){t(null==e?n:null)}}function ws(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ts(t,e){return function(n){return t(n.responseText,e)}}function Cs(t){function e(e){var r=e+"",s=n.get(r);if(!s){if(o!==jy)return o;n.set(r,s=i.push(e))}return t[(s-1)%t.length]}var n=Zn(),i=[],o=jy;return t=null==t?[]:Ry.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],n=Zn();for(var o,r,s=-1,a=t.length;++s<a;)n.has(r=(o=t[s])+"")||n.set(r,i.push(o));return e},e.range=function(n){return arguments.length?(t=Ry.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return Cs().domain(i).range(t).unknown(o)},e}function Ms(){function t(){var t=o().length,i=s[1]<s[0],h=s[i-0],f=s[1-i];e=(f-h)/Math.max(1,t-u+2*l),a&&(e=Math.floor(e)),h+=(f-h-e*(t-u))*c,n=e*(1-u),a&&(h=Math.round(h),n=Math.round(n));var d=ac(t).map(function(t){return h+e*t});return r(i?d.reverse():d)}var e,n,i=Cs().unknown(void 0),o=i.domain,r=i.range,s=[0,1],a=!1,u=0,l=0,c=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(o(e),t()):o()},i.range=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s.slice()},i.rangeRound=function(e){return s=[+e[0],+e[1]],a=!0,t()},i.bandwidth=function(){return n},i.step=function(){return e},i.round=function(e){return arguments.length?(a=!!e,t()):a},i.padding=function(e){return arguments.length?(u=l=Math.max(0,Math.min(1,e)),t()):u},i.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},i.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},i.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},i.copy=function(){return Ms().domain(o()).range(s).round(a).paddingInner(u).paddingOuter(l).align(c)},t()}function Ls(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ls(e())},t}function ks(){return Ls(Ms().paddingInner(1))}function Ss(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:By(e)}function Ps(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}function As(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}function Es(t,e,n,i){var o=t[0],r=t[1],s=e[0],a=e[1];return r<o?(o=n(r,o),s=i(a,s)):(o=n(o,r),s=i(s,a)),function(t){return s(o(t))}}function Ns(t,e,n,i){var o=Math.min(t.length,e.length)-1,r=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<o;)r[a]=n(t[a],t[a+1]),s[a]=i(e[a],e[a+1]);return function(e){var n=Gl(t,e,1,o)-1;return s[n](r[n](e))}}function Is(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function zs(t,e){function n(){return o=Math.min(a.length,u.length)>2?Ns:Es,r=s=null,i}function i(e){return(r||(r=o(a,u,c?Ps(t):t,l)))(+e)}var o,r,s,a=Fy,u=Fy,l=Of,c=!1;return i.invert=function(t){return(s||(s=o(u,a,Ss,c?As(e):e)))(+t)},i.domain=function(t){return arguments.length?(a=Dy.call(t,$y),n()):a.slice()},i.range=function(t){return arguments.length?(u=Ry.call(t),n()):u.slice()},i.rangeRound=function(t){return u=Ry.call(t),l=Df,n()},i.clamp=function(t){return arguments.length?(c=!!t,n()):c},i.interpolate=function(t){return arguments.length?(l=t,n()):l},n()}function Os(t){var e=t.domain;return t.ticks=function(t){var n=e();return hc(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return qy(e(),t,n)},t.nice=function(n){null==n&&(n=10);var o,r=e(),s=0,a=r.length-1,u=r[s],l=r[a];return l<u&&(o=u,u=l,l=o,o=s,s=a,a=o),o=i(u,l,n),o>0?(u=Math.floor(u/o)*o,l=Math.ceil(l/o)*o,o=i(u,l,n)):o<0&&(u=Math.ceil(u*o)/o,l=Math.floor(l*o)/o,o=i(u,l,n)),o>0?(r[s]=Math.floor(u/o)*o,r[a]=Math.ceil(l/o)*o,e(r)):o<0&&(r[s]=Math.ceil(u*o)/o,r[a]=Math.floor(l*o)/o,e(r)),t},t}function Ds(){var t=zs(Ss,Af);return t.copy=function(){return Is(t,Ds())},Os(t)}function Rs(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Dy.call(n,$y),t):e.slice()},t.copy=function(){return Rs().domain(e)},Os(t)}function js(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:By(e)}function Bs(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function $s(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Fs(t){return 10===t?$s:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function qs(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Zs(t){return function(e){return-t(-e)}}function Us(){function e(){return r=qs(o),s=Fs(o),i()[0]<0&&(r=Zs(r),s=Zs(s)),n}var n=zs(js,Bs).domain([1,10]),i=n.domain,o=10,r=qs(10),s=Fs(10);return n.base=function(t){return arguments.length?(o=+t,e()):o},n.domain=function(t){return arguments.length?(i(t),e()):i()},n.ticks=function(t){var e,n=i(),a=n[0],u=n[n.length-1];(e=u<a)&&(f=a,a=u,u=f);var l,c,h,f=r(a),d=r(u),p=null==t?10:+t,m=[];if(!(o%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,a>0){for(;f<d;++f)for(c=1,l=s(f);c<o;++c)if(!((h=l*c)<a)){if(h>u)break;m.push(h)}}else for(;f<d;++f)for(c=o-1,l=s(f);c>=1;--c)if(!((h=l*c)<a)){if(h>u)break;m.push(h)}}else m=hc(f,d,Math.min(d-f,p)).map(s);return e?m.reverse():m},n.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=t.format(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/n.ticks().length);return function(t){var e=t/s(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?i(t):""}},n.nice=function(){return i(Zy(i(),{floor:function(t){return s(Math.floor(r(t)))},ceil:function(t){return s(Math.ceil(r(t)))}}))},n.copy=function(){return Is(n,Us().base(o))},n}function Hs(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Ws(){function t(t,e){return(e=Hs(e,n)-(t=Hs(t,n)))?function(i){return(Hs(i,n)-t)/e}:By(e)}function e(t,e){return e=Hs(e,n)-(t=Hs(t,n)),function(i){return Hs(t+e*i,1/n)}}var n=1,i=zs(t,e),o=i.domain;return i.exponent=function(t){return arguments.length?(n=+t,o(o())):n},i.copy=function(){return Is(i,Ws().exponent(n))},Os(i)}function Gs(){return Ws().exponent(.5)}function Vs(){function t(){var t=0,r=Math.max(1,i.length);for(o=new Array(r-1);++t<r;)o[t-1]=pc(n,t/r);return e}function e(t){if(!isNaN(t=+t))return i[Gl(o,t)]}var n=[],i=[],o=[];return e.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var i,o=0,r=e.length;o<r;++o)null==(i=e[o])||isNaN(i=+i)||n.push(i);return n.sort(Ul),t()},e.range=function(e){return arguments.length?(i=Ry.call(e),t()):i.slice()},e.quantiles=function(){return o.slice()},e.copy=function(){return Vs().domain(n).range(i)},e}function Ys(){function t(t){if(t<=t)return s[Gl(r,t,0,o)]}function e(){var e=-1;for(r=new Array(o);++e<o;)r[e]=((e+1)*i-(e-o)*n)/(o+1);return t}var n=0,i=1,o=1,r=[.5],s=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e()):[n,i]},t.range=function(t){return arguments.length?(o=(s=Ry.call(t)).length-1,e()):s.slice()},t.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,r[0]]:e>=o?[r[o-1],i]:[r[e-1],r[e]]},t.copy=function(){return Ys().domain([n,i]).range(s)},Os(t)}function Xs(){function t(t){if(t<=t)return n[Gl(e,t,0,i)]}var e=[.5],n=[0,1],i=1;return t.domain=function(o){return arguments.length?(e=Ry.call(o),i=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(o){return arguments.length?(n=Ry.call(o),i=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},t.copy=function(){return Xs().domain(e).range(n)},t}function Js(t,e,n,i){function o(e){return t(e=new Date(+e)),e}return o.floor=o,o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,i,r){var s=[];if(n=o.ceil(n),r=null==r?1:Math.floor(r),!(n<i&&r>0))return s;do{s.push(new Date(+n))}while(e(n,r),t(n),n<i);return s},o.filter=function(n){return Js(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(o.count=function(e,i){return Uy.setTime(+e),Hy.setTime(+i),t(Uy),t(Hy),Math.floor(n(Uy,Hy))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(i?function(e){return i(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}function Qs(t){return Js(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vy)/Yy})}function Ks(t){return Js(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Yy})}function ta(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ea(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function na(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function ia(t){function e(t,e){return function(n){var i,o,r,s=[],a=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++a<l;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(o=Gb[i=t.charAt(++a)])?i=t.charAt(++a):o="e"===i?" ":"0",(r=e[i])&&(i=r(n,o)),s.push(i),u=a+1);return s.push(t.slice(u,a)),s.join("")}}function n(t,e){return function(n){var o=na(1900);if(i(o,t,n+="",0)!=n.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var r="Z"in o?ea(na(o.y)).getUTCDay():e(na(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7}return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,ea(o)):e(o)}}function i(t,e,n,i){for(var o,r,s=0,a=e.length,u=n.length;s<a;){if(i>=u)return-1;if(37===(o=e.charCodeAt(s++))){if(o=e.charAt(s++),!(r=q[o in Gb?e.charAt(s++):o])||(i=r(t,n,i))<0)return-1}else if(o!=n.charCodeAt(i++))return-1}return i}function o(t,e,n){var i=A.exec(e.slice(n));return i?(t.p=E[i[0].toLowerCase()],n+i[0].length):-1}function r(t,e,n){var i=z.exec(e.slice(n));return i?(t.w=O[i[0].toLowerCase()],n+i[0].length):-1}function s(t,e,n){var i=N.exec(e.slice(n));return i?(t.w=I[i[0].toLowerCase()],n+i[0].length):-1}function a(t,e,n){var i=j.exec(e.slice(n));return i?(t.m=B[i[0].toLowerCase()],n+i[0].length):-1}function u(t,e,n){var i=D.exec(e.slice(n));return i?(t.m=R[i[0].toLowerCase()],n+i[0].length):-1}function l(t,e,n){return i(t,w,e,n)}function c(t,e,n){return i(t,T,e,n)}function h(t,e,n){return i(t,C,e,n)}function f(t){return k[t.getDay()]}function d(t){return L[t.getDay()]}function p(t){return P[t.getMonth()]}function m(t){return S[t.getMonth()]}function g(t){return M[+(t.getHours()>=12)]}function v(t){return k[t.getUTCDay()]}function _(t){return L[t.getUTCDay()]}function y(t){return P[t.getUTCMonth()]}function b(t){return S[t.getUTCMonth()]}function x(t){return M[+(t.getUTCHours()>=12)]}var w=t.dateTime,T=t.date,C=t.time,M=t.periods,L=t.days,k=t.shortDays,S=t.months,P=t.shortMonths,A=sa(M),E=aa(M),N=sa(L),I=aa(L),z=sa(k),O=aa(k),D=sa(S),R=aa(S),j=sa(P),B=aa(P),$={a:f,A:d,b:p,B:m,c:null,d:wa,e:wa,H:Ta,I:Ca,j:Ma,L:La,m:ka,M:Sa,p:g,S:Pa,U:Aa,w:Ea,W:Na,x:null,X:null,y:Ia,Y:za,Z:Oa,"%":Xa},F={a:v,A:_,b:y,B:b,c:null,d:Da,e:Da,H:Ra,I:ja,j:Ba,L:$a,m:Fa,M:qa,p:x,S:Za,U:Ua,w:Ha,W:Wa,x:null,X:null,y:Ga,Y:Va,Z:Ya,"%":Xa},q={a:r,A:s,b:a,B:u,c:l,d:ma,e:ma,H:va,I:va,j:ga,L:ba,m:pa,M:_a,p:o,S:ya,U:la,w:ua,W:ca,x:c,X:h,y:fa,Y:ha,Z:da,"%":xa};return $.x=e(T,$),$.X=e(C,$),$.c=e(w,$),F.x=e(T,F),F.X=e(C,F),F.c=e(w,F),{format:function(t){var n=e(t+="",$);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",ta);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",F);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,ea);return e.toString=function(){return t},e}}}function oa(t,e,n){var i=t<0?"-":"",o=(i?-t:t)+"",r=o.length;return i+(r<n?new Array(n-r+1).join(e)+o:o)}function ra(t){return t.replace(Xb,"\\$&")}function sa(t){return new RegExp("^(?:"+t.map(ra).join("|")+")","i")}function aa(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function ua(t,e,n){var i=Vb.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function la(t,e,n){var i=Vb.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function ca(t,e,n){var i=Vb.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function ha(t,e,n){var i=Vb.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function fa(t,e,n){var i=Vb.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function da(t,e,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function pa(t,e,n){var i=Vb.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function ma(t,e,n){var i=Vb.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ga(t,e,n){var i=Vb.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function va(t,e,n){var i=Vb.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function _a(t,e,n){var i=Vb.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function ya(t,e,n){var i=Vb.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ba(t,e,n){var i=Vb.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function xa(t,e,n){var i=Yb.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function wa(t,e){return oa(t.getDate(),e,2)}function Ta(t,e){return oa(t.getHours(),e,2)}function Ca(t,e){return oa(t.getHours()%12||12,e,2)}function Ma(t,e){return oa(1+nb.count(bb(t),t),e,3)}function La(t,e){return oa(t.getMilliseconds(),e,3)}function ka(t,e){return oa(t.getMonth()+1,e,2)}function Sa(t,e){return oa(t.getMinutes(),e,2)}function Pa(t,e){return oa(t.getSeconds(),e,2)}function Aa(t,e){return oa(ob.count(bb(t),t),e,2)}function Ea(t){return t.getDay()}function Na(t,e){return oa(rb.count(bb(t),t),e,2)}function Ia(t,e){return oa(t.getFullYear()%100,e,2)}function za(t,e){return oa(t.getFullYear()%1e4,e,4)}function Oa(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+oa(e/60|0,"0",2)+oa(e%60,"0",2)}function Da(t,e){return oa(t.getUTCDate(),e,2)}function Ra(t,e){return oa(t.getUTCHours(),e,2)}function ja(t,e){return oa(t.getUTCHours()%12||12,e,2)}function Ba(t,e){return oa(1+Lb.count(Ub(t),t),e,3)}function $a(t,e){return oa(t.getUTCMilliseconds(),e,3)}function Fa(t,e){return oa(t.getUTCMonth()+1,e,2)}function qa(t,e){return oa(t.getUTCMinutes(),e,2)}function Za(t,e){return oa(t.getUTCSeconds(),e,2)}function Ua(t,e){return oa(Sb.count(Ub(t),t),e,2)}function Ha(t){return t.getUTCDay()}function Wa(t,e){return oa(Pb.count(Ub(t),t),e,2)}function Ga(t,e){return oa(t.getUTCFullYear()%100,e,2)}function Va(t,e){return oa(t.getUTCFullYear()%1e4,e,4)}function Ya(){return"+0000"}function Xa(){return"%"}function Ja(e){return Hb=ia(e),t.timeFormat=Hb.format,t.timeParse=Hb.parse,t.utcFormat=Hb.utcFormat,t.utcParse=Hb.utcParse,Hb}function Qa(t){return t.toISOString()}function Ka(t){var e=new Date(t);return isNaN(e)?null:e}function tu(t){return new Date(t)}function eu(t){return t instanceof Date?+t:+new Date(+t)}function nu(t,e,n,i,r,s,a,u,l){function c(o){return(a(o)<o?m:s(o)<o?g:r(o)<o?v:i(o)<o?_:e(o)<o?n(o)<o?y:b:t(o)<o?x:w)(o)}function h(e,n,i,r){if(null==e&&(e=10),"number"==typeof e){var s=Math.abs(i-n)/e,a=Hl(function(t){return t[2]}).right(T,s);a===T.length?(r=o(n/rx,i/rx,e),e=t):a?(a=T[s/T[a-1][2]<T[a][2]/s?a-1:a],r=a[1],e=a[0]):(r=o(n,i,e),e=u)}return null==r?e:e.every(r)}var f=zs(Ss,Af),d=f.invert,p=f.domain,m=l(".%L"),g=l(":%S"),v=l("%I:%M"),_=l("%I %p"),y=l("%a %d"),b=l("%b %d"),x=l("%B"),w=l("%Y"),T=[[a,1,Kb],[a,5,5*Kb],[a,15,15*Kb],[a,30,30*Kb],[s,1,tx],[s,5,5*tx],[s,15,15*tx],[s,30,30*tx],[r,1,ex],[r,3,3*ex],[r,6,6*ex],[r,12,12*ex],[i,1,nx],[i,2,2*nx],[n,1,ix],[e,1,ox],[e,3,3*ox],[t,1,rx]];return f.invert=function(t){return new Date(d(t))},f.domain=function(t){return arguments.length?p(Dy.call(t,eu)):p().map(tu)},f.ticks=function(t,e){var n,i=p(),o=i[0],r=i[i.length-1],s=r<o;return s&&(n=o,o=r,r=n),n=h(t,o,r,e),n=n?n.range(o,r+1):[],s?n.reverse():n},f.tickFormat=function(t,e){return null==e?c:l(e)},f.nice=function(t,e){var n=p();return(t=h(t,n[0],n[n.length-1],e))?p(Zy(n,t)):f},f.copy=function(){return Is(f,nu(t,e,n,i,r,s,a,u,l))},f}function iu(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function ou(t){function e(e){var r=(e-n)/(i-n);return t(o?Math.max(0,Math.min(1,r)):r)}var n=0,i=1,o=!1;return e.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.clamp=function(t){return arguments.length?(o=!!t,e):o},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return ou(t).domain([n,i]).clamp(o)},Os(e)}function ru(t){return t>1?0:t<-1?Ex:Math.acos(t)}function su(t){return t>=1?Nx:t<=-1?-Nx:Math.asin(t)}function au(t){return t.innerRadius}function uu(t){return t.outerRadius}function lu(t){return t.startAngle}function cu(t){return t.endAngle}function hu(t){return t&&t.padAngle}function fu(t,e,n,i,o,r,s,a){var u=n-t,l=i-e,c=s-o,h=a-r,f=(c*(e-r)-h*(t-o))/(h*u-c*l);return[t+f*u,e+f*l]}function du(t,e,n,i,o,r,s){var a=t-n,u=e-i,l=(s?r:-r)/Px(a*a+u*u),c=l*u,h=-l*a,f=t+c,d=e+h,p=n+c,m=i+h,g=(f+p)/2,v=(d+m)/2,_=p-f,y=m-d,b=_*_+y*y,x=o-r,w=f*m-p*d,T=(y<0?-1:1)*Px(Lx(0,x*x*b-w*w)),C=(w*y-_*T)/b,M=(-w*_-y*T)/b,L=(w*y+_*T)/b,k=(-w*_+y*T)/b,S=C-g,P=M-v,A=L-g,E=k-v;return S*S+P*P>A*A+E*E&&(C=L,M=k),{cx:C,cy:M,x01:-c,y01:-h,x11:C*(o/x-1),y11:M*(o/x-1)}}function pu(t){this._context=t}function mu(t){return t[0]}function gu(t){return t[1]}function vu(t){this._curve=t}function _u(t){function e(e){return new vu(t(e))}return e._curve=t,e}function yu(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(_u(t)):e()._curve},t}function bu(t){return t.source}function xu(t){return t.target}function wu(t){function e(){var e,a=Ux.call(arguments),u=n.apply(this,a),l=i.apply(this,a);if(s||(s=e=Dn()),t(s,+o.apply(this,(a[0]=u,a)),+r.apply(this,a),+o.apply(this,(a[0]=l,a)),+r.apply(this,a)),e)return s=null,e+""||null}var n=bu,i=xu,o=mu,r=gu,s=null;return e.source=function(t){return arguments.length?(n=t,e):n},e.target=function(t){return arguments.length?(i=t,e):i},e.x=function(t){return arguments.length?(o="function"==typeof t?t:wx(+t),e):o},e.y=function(t){return arguments.length?(r="function"==typeof t?t:wx(+t),e):r},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}function Tu(t,e,n,i,o){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,o,i,o)}function Cu(t,e,n,i,o){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+o)/2,i,n,i,o)}function Mu(t,e,n,i,o){var r=Hx(e,n),s=Hx(e,n=(n+o)/2),a=Hx(i,n),u=Hx(i,o);t.moveTo(r[0],r[1]),t.bezierCurveTo(s[0],s[1],a[0],a[1],u[0],u[1])}function Lu(){return wu(Tu)}function ku(){return wu(Cu)}function Su(){var t=wu(Mu);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}function Pu(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Au(t){this._context=t}function Eu(t){this._context=t}function Nu(t){this._context=t}function Iu(t,e){this._basis=new Au(t),this._beta=e}function zu(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ou(t,e){this._context=t,this._k=(1-e)/6}function Du(t,e){this._context=t,this._k=(1-e)/6}function Ru(t,e){this._context=t,this._k=(1-e)/6}function ju(t,e,n){var i=t._x1,o=t._y1,r=t._x2,s=t._y2;if(t._l01_a>Ax){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,o=(o*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Ax){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*l+t._x1*t._l23_2a-e*t._l12_2a)/c,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,o,r,s,t._x2,t._y2)}function Bu(t,e){this._context=t,this._alpha=e}function $u(t,e){this._context=t,this._alpha=e}function Fu(t,e){this._context=t,this._alpha=e}function qu(t){this._context=t}function Zu(t){return t<0?-1:1}function Uu(t,e,n){var i=t._x1-t._x0,o=e-t._x1,r=(t._y1-t._y0)/(i||o<0&&-0),s=(n-t._y1)/(o||i<0&&-0),a=(r*o+s*i)/(i+o);return(Zu(r)+Zu(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(a))||0}function Hu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Wu(t,e,n){var i=t._x0,o=t._y0,r=t._x1,s=t._y1,a=(r-i)/3;t._context.bezierCurveTo(i+a,o+a*e,r-a,s-a*n,r,s)}function Gu(t){this._context=t}function Vu(t){this._context=new Yu(t)}function Yu(t){this._context=t}function Xu(t){return new Gu(t)}function Ju(t){return new Vu(t)}function Qu(t){this._context=t}function Ku(t){var e,n,i=t.length-1,o=new Array(i),r=new Array(i),s=new Array(i);for(o[0]=0,r[0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)o[e]=1,r[e]=4,s[e]=4*t[e]+2*t[e+1];for(o[i-1]=2,r[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=o[e]/r[e-1],r[e]-=n,s[e]-=n*s[e-1];for(o[i-1]=s[i-1]/r[i-1],e=i-2;e>=0;--e)o[e]=(s[e]-o[e+1])/r[e];for(r[i-1]=(t[i]+o[i-1])/2,e=0;e<i-1;++e)r[e]=2*t[e+1]-o[e+1];return[o,r]}function tl(t,e){this._context=t,this._t=e}function el(t){return new tl(t,0)}function nl(t){return new tl(t,1)}function il(t,e){return t[e]}function ol(t){for(var e,n=0,i=-1,o=t.length;++i<o;)(e=+t[i][1])&&(n+=e);return n}function rl(t){return t[0]}function sl(t){return t[1]}function al(){this._=null}function ul(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ll(t,e){var n=e,i=e.R,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function cl(t,e){var n=e,i=e.L,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function hl(t){for(;t.L;)t=t.L;return t}function fl(t,e,n,i){var o=[null,null],r=Fw.push(o)-1;return o.left=t,o.right=e,n&&pl(o,t,e,n),i&&pl(o,e,t,i),Bw[t.index].halfedges.push(r),Bw[e.index].halfedges.push(r),o}function dl(t,e,n){var i=[e,n];return i.left=t,i}function pl(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function ml(t,e,n,i,o){var r,s=t[0],a=t[1],u=s[0],l=s[1],c=a[0],h=a[1],f=0,d=1,p=c-u,m=h-l;if(r=e-u,p||!(r>0)){if(r/=p,p<0){if(r<f)return;r<d&&(d=r)}else if(p>0){if(r>d)return;r>f&&(f=r)}if(r=i-u,p||!(r<0)){if(r/=p,p<0){if(r>d)return;r>f&&(f=r)}else if(p>0){if(r<f)return;r<d&&(d=r)}if(r=n-l,m||!(r>0)){if(r/=m,m<0){if(r<f)return;r<d&&(d=r)}else if(m>0){if(r>d)return;r>f&&(f=r)}if(r=o-l,m||!(r<0)){if(r/=m,m<0){if(r>d)return;r>f&&(f=r)}else if(m>0){if(r<f)return;r<d&&(d=r)}return!(f>0||d<1)||(f>0&&(t[0]=[u+f*p,l+f*m]),d<1&&(t[1]=[u+d*p,l+d*m]),!0)}}}}}function gl(t,e,n,i,o){var r=t[1];if(r)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],d=c[0],p=c[1],m=(h+d)/2,g=(f+p)/2;if(p===f){if(m<e||m>=i)return;if(h>d){if(u){if(u[1]>=o)return}else u=[m,n];r=[m,o]}else{if(u){if(u[1]<n)return}else u=[m,o];r=[m,n]}}else if(s=(h-d)/(p-f),a=g-s*m,s<-1||s>1)if(h>d){if(u){if(u[1]>=o)return}else u=[(n-a)/s,n];r=[(o-a)/s,o]}else{if(u){if(u[1]<n)return}else u=[(o-a)/s,o];r=[(n-a)/s,n]}else if(f<p){if(u){if(u[0]>=i)return}else u=[e,s*e+a];r=[i,s*i+a]}else{if(u){if(u[0]<e)return}else u=[i,s*i+a];r=[e,s*e+a]}return t[0]=u,t[1]=r,!0}function vl(t,e,n,i){for(var o,r=Fw.length;r--;)gl(o=Fw[r],t,e,n,i)&&ml(o,t,e,n,i)&&(Math.abs(o[0][0]-o[1][0])>Uw||Math.abs(o[0][1]-o[1][1])>Uw)||delete Fw[r]}function _l(t){return Bw[t.index]={site:t,halfedges:[]}}function yl(t,e){var n=t.site,i=e.left,o=e.right;return n===o&&(o=i,i=n),o?Math.atan2(o[1]-i[1],o[0]-i[0]):(n===i?(i=e[1],o=e[0]):(i=e[0],o=e[1]),Math.atan2(i[0]-o[0],o[1]-i[1]))}function bl(t,e){return e[+(e.left!==t.site)]}function xl(t,e){return e[+(e.left===t.site)]}function wl(){for(var t,e,n,i,o=0,r=Bw.length;o<r;++o)if((t=Bw[o])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=yl(t,Fw[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}function Tl(t,e,n,i){var o,r,s,a,u,l,c,h,f,d,p,m,g=Bw.length,v=!0;for(o=0;o<g;++o)if(r=Bw[o]){for(s=r.site,u=r.halfedges,a=u.length;a--;)Fw[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=xl(r,Fw[u[a]]),p=d[0],m=d[1],c=bl(r,Fw[u[++a%l]]),h=c[0],f=c[1],(Math.abs(p-h)>Uw||Math.abs(m-f)>Uw)&&(u.splice(a,0,Fw.push(dl(s,d,Math.abs(p-t)<Uw&&i-m>Uw?[t,Math.abs(h-t)<Uw?f:i]:Math.abs(m-i)<Uw&&n-p>Uw?[Math.abs(f-i)<Uw?h:n,i]:Math.abs(p-n)<Uw&&m-e>Uw?[n,Math.abs(h-n)<Uw?f:e]:Math.abs(m-e)<Uw&&p-t>Uw?[Math.abs(f-e)<Uw?h:t,e]:null))-1),++l);l&&(v=!1)}if(v){var _,y,b,x=1/0;for(o=0,v=null;o<g;++o)(r=Bw[o])&&(s=r.site,_=s[0]-t,y=s[1]-e,(b=_*_+y*y)<x&&(x=b,v=r));if(v){var w=[t,e],T=[t,i],C=[n,i],M=[n,e];v.halfedges.push(Fw.push(dl(s=v.site,w,T))-1,Fw.push(dl(s,T,C))-1,Fw.push(dl(s,C,M))-1,Fw.push(dl(s,M,w))-1)}}for(o=0;o<g;++o)(r=Bw[o])&&(r.halfedges.length||delete Bw[o])}function Cl(){ul(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ml(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,o=t.site,r=n.site;if(i!==r){var s=o[0],a=o[1],u=i[0]-s,l=i[1]-a,c=r[0]-s,h=r[1]-a,f=2*(u*h-l*c);if(!(f>=-Hw)){var d=u*u+l*l,p=c*c+h*h,m=(h*d-l*p)/f,g=(u*p-c*d)/f,v=qw.pop()||new Cl;v.arc=t,v.site=o,v.x=m+s,v.y=(v.cy=g+a)+Math.sqrt(m*m+g*g),t.circle=v;for(var _=null,y=$w._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}$w.insert(_,v),_||(Rw=v)}}}}function Ll(t){var e=t.circle;e&&(e.P||(Rw=e.N),$w.remove(e),qw.push(e),ul(e),t.circle=null)}function kl(){ul(this),this.edge=this.site=this.circle=null}function Sl(t){var e=Zw.pop()||new kl;return e.site=t,e}function Pl(t){Ll(t),jw.remove(t),Zw.push(t),ul(t)}function Al(t){var e=t.circle,n=e.x,i=e.cy,o=[n,i],r=t.P,s=t.N,a=[t];Pl(t);for(var u=r;u.circle&&Math.abs(n-u.circle.x)<Uw&&Math.abs(i-u.circle.cy)<Uw;)r=u.P,a.unshift(u),Pl(u),u=r;a.unshift(u),Ll(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Uw&&Math.abs(i-l.circle.cy)<Uw;)s=l.N,a.push(l),Pl(l),l=s;a.push(l),Ll(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],pl(l.edge,u.site,l.site,o);u=a[0],l=a[h-1],l.edge=fl(u.site,l.site,null,o),Ml(u),Ml(l)}function El(t){for(var e,n,i,o,r=t[0],s=t[1],a=jw._;a;)if((i=Nl(a,s)-r)>Uw)a=a.L;else{if(!((o=r-Il(a,s))>Uw)){i>-Uw?(e=a.P,n=a):o>-Uw?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}_l(t);var u=Sl(t);if(jw.insert(e,u),e||n){if(e===n)return Ll(e),n=Sl(e.site),jw.insert(u,n),u.edge=n.edge=fl(e.site,u.site),Ml(e),void Ml(n);if(!n)return void(u.edge=fl(e.site,u.site));Ll(e),Ll(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,d=t[1]-h,p=n.site,m=p[0]-c,g=p[1]-h,v=2*(f*g-d*m),_=f*f+d*d,y=m*m+g*g,b=[(g*_-d*y)/v+c,(f*y-m*_)/v+h];pl(n.edge,l,p,b),u.edge=fl(l,t,null,b),n.edge=fl(t,p,null,b),Ml(e),Ml(n)}}function Nl(t,e){var n=t.site,i=n[0],o=n[1],r=o-e;if(!r)return i;var s=t.P;if(!s)return-1/0;n=s.site;var a=n[0],u=n[1],l=u-e;if(!l)return a;var c=a-i,h=1/r-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+o-r/2)))/h+i:(i+a)/2}function Il(t,e){var n=t.N;if(n)return Nl(n,e);var i=t.site;return i[1]===e?i[0]:1/0}function zl(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Ol(t,e){return e[1]-t[1]||e[0]-t[0]}function Dl(t,e){var n,i,o,r=t.sort(Ol).pop();for(Fw=[],Bw=new Array(t.length),jw=new al,$w=new al;;)if(o=Rw,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))r[0]===n&&r[1]===i||(El(r),n=r[0],i=r[1]),r=t.pop();else{if(!o)break;Al(o.arc)}if(wl(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];vl(s,a,u,l),Tl(s,a,u,l)}this.edges=Fw,this.cells=Bw,jw=$w=Fw=Bw=null}function Rl(t,e,n){this.target=t,this.type=e,this.transform=n}function jl(t,e,n){this.k=t,this.x=e,this.y=n}function Bl(t){return t.__zoom||Vw}function $l(){t.event.stopImmediatePropagation()}function Fl(){return!t.event.button}function ql(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function Zl(){return this.__zoom||Vw}var Ul=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Hl=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,i,o){for(null==i&&(i=0),null==o&&(o=e.length);i<o;){var r=i+o>>>1;t(e[r],n)<0?i=r+1:o=r}return i},right:function(e,n,i,o){for(null==i&&(i=0),null==o&&(o=e.length);i<o;){var r=i+o>>>1;t(e[r],n)>0?o=r:i=r+1}return i}}},Wl=Hl(Ul),Gl=Wl.right,Vl=Wl.left,Yl=function(t,e){null==e&&(e=n);for(var i=0,o=t.length-1,r=t[0],s=new Array(o<0?0:o);i<o;)s[i]=e(r,r=t[++i]);return s},Xl=function(t,e,i){var o,r,s,a,u=t.length,l=e.length,c=new Array(u*l);for(null==i&&(i=n),o=s=0;o<u;++o)for(a=t[o],r=0;r<l;++r,++s)c[s]=i(a,e[r]);return c},Jl=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Ql=function(t){return null===t?NaN:+t},Kl=function(t,e){var n,i,o=t.length,r=0,s=-1,a=0,u=0;if(null==e)for(;++s<o;)isNaN(n=Ql(t[s]))||(i=n-a,a+=i/++r,u+=i*(n-a));else for(;++s<o;)isNaN(n=Ql(e(t[s],s,t)))||(i=n-a,a+=i/++r,u+=i*(n-a));if(r>1)return u/(r-1)},tc=function(t,e){var n=Kl(t,e);return n?Math.sqrt(n):n},ec=function(t,e){var n,i,o,r=t.length,s=-1;if(null==e){
for(;++s<r;)if(null!=(n=t[s])&&n>=n)for(i=o=n;++s<r;)null!=(n=t[s])&&(i>n&&(i=n),o<n&&(o=n))}else for(;++s<r;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=o=n;++s<r;)null!=(n=e(t[s],s,t))&&(i>n&&(i=n),o<n&&(o=n));return[i,o]},nc=Array.prototype,ic=nc.slice,oc=nc.map,rc=function(t){return function(){return t}},sc=function(t){return t},ac=function(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var i=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),r=new Array(o);++i<o;)r[i]=t+i*n;return r},uc=Math.sqrt(50),lc=Math.sqrt(10),cc=Math.sqrt(2),hc=function(t,e,n){var o,r,s,a=e<t,u=-1;if(a&&(o=t,t=e,e=o),0===(s=i(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),r=new Array(o=Math.ceil(e-t+1));++u<o;)r[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),r=new Array(o=Math.ceil(t-e+1));++u<o;)r[u]=(t-u)/s;return a&&r.reverse(),r},fc=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},dc=function(){function t(t){var r,s,a=t.length,u=new Array(a);for(r=0;r<a;++r)u[r]=e(t[r],r,t);var l=n(u),c=l[0],h=l[1],f=i(u,c,h);Array.isArray(f)||(f=o(c,h,f),f=ac(Math.ceil(c/f)*f,Math.floor(h/f)*f,f));for(var d=f.length;f[0]<=c;)f.shift(),--d;for(;f[d-1]>h;)f.pop(),--d;var p,m=new Array(d+1);for(r=0;r<=d;++r)p=m[r]=[],p.x0=r>0?f[r-1]:c,p.x1=r<d?f[r]:h;for(r=0;r<a;++r)s=u[r],c<=s&&s<=h&&m[Gl(f,s,0,d)].push(t[r]);return m}var e=sc,n=ec,i=fc;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:rc(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:rc([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:rc(Array.isArray(e)?ic.call(e):e),t):i},t},pc=function(t,e,n){if(null==n&&(n=Ql),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,r=Math.floor(o),s=+n(t[r],r,t);return s+(+n(t[r+1],r+1,t)-s)*(o-r)}},mc=function(t,e,n){return t=oc.call(t,Ql).sort(Ul),Math.ceil((n-e)/(2*(pc(t,.75)-pc(t,.25))*Math.pow(t.length,-1/3)))},gc=function(t,e,n){return Math.ceil((n-e)/(3.5*tc(t)*Math.pow(t.length,-1/3)))},vc=function(t,e){var n,i,o=t.length,r=-1;if(null==e){for(;++r<o;)if(null!=(n=t[r])&&n>=n)for(i=n;++r<o;)null!=(n=t[r])&&n>i&&(i=n)}else for(;++r<o;)if(null!=(n=e(t[r],r,t))&&n>=n)for(i=n;++r<o;)null!=(n=e(t[r],r,t))&&n>i&&(i=n);return i},_c=function(t,e){var n,i=t.length,o=i,r=-1,s=0;if(null==e)for(;++r<i;)isNaN(n=Ql(t[r]))?--o:s+=n;else for(;++r<i;)isNaN(n=Ql(e(t[r],r,t)))?--o:s+=n;if(o)return s/o},yc=function(t,e){var n,i=t.length,o=-1,r=[];if(null==e)for(;++o<i;)isNaN(n=Ql(t[o]))||r.push(n);else for(;++o<i;)isNaN(n=Ql(e(t[o],o,t)))||r.push(n);return pc(r.sort(Ul),.5)},bc=function(t){for(var e,n,i,o=t.length,r=-1,s=0;++r<o;)s+=t[r].length;for(n=new Array(s);--o>=0;)for(i=t[o],e=i.length;--e>=0;)n[--s]=i[e];return n},xc=function(t,e){var n,i,o=t.length,r=-1;if(null==e){for(;++r<o;)if(null!=(n=t[r])&&n>=n)for(i=n;++r<o;)null!=(n=t[r])&&i>n&&(i=n)}else for(;++r<o;)if(null!=(n=e(t[r],r,t))&&n>=n)for(i=n;++r<o;)null!=(n=e(t[r],r,t))&&i>n&&(i=n);return i},wc=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},Tc=function(t,e){if(n=t.length){var n,i,o=0,r=0,s=t[r];for(null==e&&(e=Ul);++o<n;)(e(i=t[o],s)<0||0!==e(s,s))&&(s=i,r=o);return 0===e(s,s)?r:void 0}},Cc=function(t,e,n){for(var i,o,r=(null==n?t.length:n)-(e=null==e?0:+e);r;)o=Math.random()*r--|0,i=t[r+e],t[r+e]=t[o+e],t[o+e]=i;return t},Mc=function(t,e){var n,i=t.length,o=-1,r=0;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r},Lc=function(t){if(!(o=t.length))return[];for(var e=-1,n=xc(t,r),i=new Array(n);++e<n;)for(var o,s=-1,a=i[e]=new Array(o);++s<o;)a[s]=t[s][e];return i},kc=function(){return Lc(arguments)},Sc=Array.prototype.slice,Pc=function(t){return t},Ac=1,Ec=2,Nc=3,Ic=4,zc=1e-6,Oc={value:function(){}};g.prototype=m.prototype={constructor:g,on:function(t,e){var n,i=this._,o=v(t+"",i),r=-1,s=o.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++r<s;)if(n=(t=o[r]).type)i[n]=y(i[n],t.name,e);else if(null==e)for(n in i)i[n]=y(i[n],t.name,null);return this}for(;++r<s;)if((n=(t=o[r]).type)&&(n=_(i[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new g(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),r=0;r<n;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,n=i.length;r<n;++r)i[r].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}};var Dc="http://www.w3.org/1999/xhtml",Rc={svg:"http://www.w3.org/2000/svg",xhtml:Dc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jc=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Rc.hasOwnProperty(e)?{space:Rc[e],local:t}:t},Bc=function(t){var e=jc(t);return(e.local?x:b)(e)},$c=0;T.prototype=w.prototype={constructor:T,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Fc=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var qc=document.documentElement;if(!qc.matches){var Zc=qc.webkitMatchesSelector||qc.msMatchesSelector||qc.mozMatchesSelector||qc.oMatchesSelector;Fc=function(t){return function(){return Zc.call(this,t)}}}}var Uc=Fc,Hc={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(Hc={mouseenter:"mouseover",mouseleave:"mouseout"})}var Wc=function(t,e,n){var i,o,r=L(t+""),s=r.length;{if(!(arguments.length<2)){for(a=e?S:k,null==n&&(n=!1),i=0;i<s;++i)this.each(a(r[i],e,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}},Gc=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},Vc=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]},Yc=function(t){var e=Gc();return e.changedTouches&&(e=e.changedTouches[0]),Vc(t,e)},Xc=function(t){return null==t?A:function(){return this.querySelector(t)}},Jc=function(t){"function"!=typeof t&&(t=Xc(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s,a=e[o],u=a.length,l=i[o]=new Array(u),c=0;c<u;++c)(r=a[c])&&(s=t.call(r,r.__data__,c,a))&&("__data__"in r&&(s.__data__=r.__data__),l[c]=s);return new gt(i,this._parents)},Qc=function(t){return null==t?E:function(){return this.querySelectorAll(t)}},Kc=function(t){"function"!=typeof t&&(t=Qc(t));for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var s,a=e[r],u=a.length,l=0;l<u;++l)(s=a[l])&&(i.push(t.call(s,s.__data__,l,a)),o.push(s));return new gt(i,o)},th=function(t){"function"!=typeof t&&(t=Uc(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s=e[o],a=s.length,u=i[o]=[],l=0;l<a;++l)(r=s[l])&&t.call(r,r.__data__,l,s)&&u.push(r);return new gt(i,this._parents)},eh=function(t){return new Array(t.length)},nh=function(){return new gt(this._enter||this._groups.map(eh),this._parents)};N.prototype={constructor:N,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ih=function(t){return function(){return t}},oh="$",rh=function(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each(function(t){d[++l]=t}),d;var n=e?z:I,i=this._parents,o=this._groups;"function"!=typeof t&&(t=ih(t));for(var r=o.length,s=new Array(r),a=new Array(r),u=new Array(r),l=0;l<r;++l){var c=i[l],h=o[l],f=h.length,d=t.call(c,c&&c.__data__,l,i),p=d.length,m=a[l]=new Array(p),g=s[l]=new Array(p);n(c,h,m,g,u[l]=new Array(f),d,e);for(var v,_,y=0,b=0;y<p;++y)if(v=m[y]){for(y>=b&&(b=y+1);!(_=g[b])&&++b<p;);v._next=_||null}}return s=new gt(s,i),s._enter=a,s._exit=u,s},sh=function(){return new gt(this._exit||this._groups.map(eh),this._parents)},ah=function(t){for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),s=new Array(i),a=0;a<r;++a)for(var u,l=e[a],c=n[a],h=l.length,f=s[a]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;a<i;++a)s[a]=e[a];return new gt(s,this._parents)},uh=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,s=o[r];--r>=0;)(i=o[r])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},lh=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=O);for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var s,a=n[r],u=a.length,l=o[r]=new Array(u),c=0;c<u;++c)(s=a[c])&&(l[c]=s);l.sort(e)}return new gt(o,this._parents).order()},ch=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},hh=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},fh=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null},dh=function(){var t=0;return this.each(function(){++t}),t},ph=function(){return!this.node()},mh=function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],s=0,a=r.length;s<a;++s)(o=r[s])&&t.call(o,o.__data__,s,r);return this},gh=function(t,e){var n=jc(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?R:D:"function"==typeof e?n.local?F:$:n.local?B:j)(n,e))},vh=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},_h=function(t,e,n){return arguments.length>1?this.each((null==e?q:"function"==typeof e?U:Z)(t,e,null==n?"":n)):H(this.node(),t)},yh=function(t,e){return arguments.length>1?this.each((null==e?W:"function"==typeof e?V:G)(t,e)):this.node()[t]};J.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bh=function(t,e){var n=Y(t+"");if(arguments.length<2){for(var i=X(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?nt:e?tt:et)(n,e))},xh=function(t){return arguments.length?this.each(null==t?it:("function"==typeof t?rt:ot)(t)):this.node().textContent},wh=function(t){return arguments.length?this.each(null==t?st:("function"==typeof t?ut:at)(t)):this.node().innerHTML},Th=function(){return this.each(lt)},Ch=function(){return this.each(ct)},Mh=function(t){var e="function"==typeof t?t:Bc(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},Lh=function(t,e){var n="function"==typeof t?t:Bc(t),i=null==e?ht:"function"==typeof e?e:Xc(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},kh=function(){return this.each(ft)},Sh=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Ph=function(t,e){return this.each(("function"==typeof e?mt:pt)(t,e))},Ah=[null];gt.prototype=vt.prototype={constructor:gt,select:Jc,selectAll:Kc,filter:th,data:rh,enter:nh,exit:sh,merge:ah,order:uh,sort:lh,call:ch,nodes:hh,node:fh,size:dh,empty:ph,each:mh,attr:gh,style:_h,property:yh,classed:bh,text:xh,html:wh,raise:Th,lower:Ch,append:Mh,insert:Lh,remove:kh,datum:Sh,on:Wc,dispatch:Ph};var Eh=function(t){return"string"==typeof t?new gt([[document.querySelector(t)]],[document.documentElement]):new gt([[t]],Ah)},Nh=function(t){return"string"==typeof t?new gt([document.querySelectorAll(t)],[document.documentElement]):new gt([null==t?[]:t],Ah)},Ih=function(t,e,n){arguments.length<3&&(n=e,e=Gc().changedTouches);for(var i,o=0,r=e?e.length:0;o<r;++o)if((i=e[o]).identifier===n)return Vc(t,i);return null},zh=function(t,e){null==e&&(e=Gc().touches);for(var n=0,i=e?e.length:0,o=new Array(i);n<i;++n)o[n]=Vc(t,e[n]);return o},Oh=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},Dh=function(t){var e=t.document.documentElement,n=Eh(t).on("dragstart.drag",Oh,!0);"onselectstart"in e?n.on("selectstart.drag",Oh,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},Rh=function(t){return function(){return t}};bt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var jh=function(){function e(t){t.on("mousedown.drag",n).on("touchstart.drag",r).on("touchmove.drag",s).on("touchend.drag touchcancel.drag",a).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!f&&d.apply(this,arguments)){var e=u("mouse",p.apply(this,arguments),Yc,this,arguments);e&&(Eh(t.event.view).on("mousemove.drag",i,!0).on("mouseup.drag",o,!0),Dh(t.event.view),_t(),h=!1,l=t.event.clientX,c=t.event.clientY,e("start"))}}function i(){if(Oh(),!h){var e=t.event.clientX-l,n=t.event.clientY-c;h=e*e+n*n>b}v.mouse("drag")}function o(){Eh(t.event.view).on("mousemove.drag mouseup.drag",null),yt(t.event.view,h),Oh(),v.mouse("end")}function r(){if(d.apply(this,arguments)){var e,n,i=t.event.changedTouches,o=p.apply(this,arguments),r=i.length;for(e=0;e<r;++e)(n=u(i[e].identifier,o,Ih,this,arguments))&&(_t(),n("start"))}}function s(){var e,n,i=t.event.changedTouches,o=i.length;for(e=0;e<o;++e)(n=v[i[e].identifier])&&(Oh(),n("drag"))}function a(){var e,n,i=t.event.changedTouches,o=i.length;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),e=0;e<o;++e)(n=v[i[e].identifier])&&(_t(),n("end"))}function u(n,i,o,r,s){var a,u,l,c=o(i,n),h=_.copy();if(P(new bt(e,"beforestart",a,n,y,c[0],c[1],0,0,h),function(){return null!=(t.event.subject=a=g.apply(r,s))&&(u=a.x-c[0]||0,l=a.y-c[1]||0,!0)}))return function t(f){var d,p=c;switch(f){case"start":v[n]=t,d=y++;break;case"end":delete v[n],--y;case"drag":c=o(i,n),d=y}P(new bt(e,f,a,n,d,c[0]+u,c[1]+l,c[0]-p[0],c[1]-p[1],h),h.apply,h,[f,r,s])}}var l,c,h,f,d=xt,p=wt,g=Tt,v={},_=m("start","drag","end"),y=0,b=0;return e.filter=function(t){return arguments.length?(d="function"==typeof t?t:Rh(!!t),e):d},e.container=function(t){return arguments.length?(p="function"==typeof t?t:Rh(t),e):p},e.subject=function(t){return arguments.length?(g="function"==typeof t?t:Rh(t),e):g},e.on=function(){var t=_.on.apply(_,arguments);return t===_?e:t},e.clickDistance=function(t){return arguments.length?(b=(t=+t)*t,e):Math.sqrt(b)},e},Bh=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},$h="\\s*([+-]?\\d+)\\s*",Fh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",qh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zh=/^#([0-9a-f]{3})$/,Uh=/^#([0-9a-f]{6})$/,Hh=new RegExp("^rgb\\("+[$h,$h,$h]+"\\)$"),Wh=new RegExp("^rgb\\("+[qh,qh,qh]+"\\)$"),Gh=new RegExp("^rgba\\("+[$h,$h,$h,Fh]+"\\)$"),Vh=new RegExp("^rgba\\("+[qh,qh,qh,Fh]+"\\)$"),Yh=new RegExp("^hsl\\("+[Fh,qh,qh]+"\\)$"),Xh=new RegExp("^hsla\\("+[Fh,qh,qh,Fh]+"\\)$"),Jh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bh(Mt,Lt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Bh(Et,At,Ct(Mt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Bh(Ot,zt,Ct(Mt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ot(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ot(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Et(Dt(t>=240?t-240:t+120,o,i),Dt(t,o,i),Dt(t<120?t+240:t-120,o,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Qh=Math.PI/180,Kh=180/Math.PI,tf=.95047,ef=1,nf=1.08883,of=4/29,rf=6/29,sf=3*rf*rf,af=rf*rf*rf;Bh(Bt,jt,Ct(Mt,{brighter:function(t){return new Bt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Bt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=ef*Ft(t),e=tf*Ft(e),n=nf*Ft(n),new Et(qt(3.2404542*e-1.5371385*t-.4985314*n),qt(-.969266*e+1.8760108*t+.041556*n),qt(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Bh(Wt,Ht,Ct(Mt,{brighter:function(t){return new Wt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Wt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Rt(this).rgb()}}));var uf=-.14861,lf=1.78277,cf=-.29227,hf=-.90649,ff=1.97294,df=ff*hf,pf=ff*lf,mf=lf*cf-hf*uf;Bh(Yt,Vt,Ct(Mt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Yt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Yt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Qh,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),o=Math.sin(t);return new Et(255*(e+n*(uf*i+lf*o)),255*(e+n*(cf*i+hf*o)),255*(e+n*(ff*i)),this.opacity)}}));var gf,vf,_f,yf,bf,xf,wf=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],r=t[i+1],s=i>0?t[i-1]:2*o-r,a=i<e-1?t[i+2]:2*r-o;return Xt((n-i/e)*e,s,o,r,a)}},Tf=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],r=t[i%e],s=t[(i+1)%e],a=t[(i+2)%e];return Xt((n-i/e)*e,o,r,s,a)}},Cf=function(t){return function(){return t}},Mf=function t(e){function n(t,e){var n=i((t=At(t)).r,(e=At(e)).r),o=i(t.g,e.g),r=i(t.b,e.b),s=ee(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=r(e),t.opacity=s(e),t+""}}var i=te(e);return n.gamma=t,n}(1),Lf=ne(wf),kf=ne(Tf),Sf=function(t,e){var n,i=e?e.length:0,o=t?Math.min(i,t.length):0,r=new Array(i),s=new Array(i);for(n=0;n<o;++n)r[n]=Of(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=r[n](t);return s}},Pf=function(t,e){var n=new Date;return t=+t,e-=t,function(i){return n.setTime(t+e*i),n}},Af=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},Ef=function(t,e){var n,i={},o={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?i[n]=Of(t[n],e[n]):o[n]=e[n];return function(t){for(n in i)o[n]=i[n](t);return o}},Nf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,If=new RegExp(Nf.source,"g"),zf=function(t,e){var n,i,o,r=Nf.lastIndex=If.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=Nf.exec(t))&&(i=If.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Af(n,i)})),r=If.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?oe(u[0].x):ie(e):(e=u.length,function(t){for(var n,i=0;i<e;++i)a[(n=u[i]).i]=n.x(t);return a.join("")})},Of=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?Cf(e):("number"===i?Af:"string"===i?(n=Lt(e))?(e=n,Mf):zf:e instanceof Lt?Mf:e instanceof Date?Pf:Array.isArray(e)?Sf:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ef:Af)(t,e)},Df=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},Rf=180/Math.PI,jf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Bf=function(t,e,n,i,o,r){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,u/=a),t*i<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*Rf,skewX:Math.atan(u)*Rf,scaleX:s,scaleY:a}},$f=ae(re,"px, ","px)","deg)"),Ff=ae(se,", ",")",")"),qf=Math.SQRT2,Zf=function(t,e){var n,i,o=t[0],r=t[1],s=t[2],a=e[0],u=e[1],l=e[2],c=a-o,h=u-r,f=c*c+h*h;if(f<1e-12)i=Math.log(l/s)/qf,n=function(t){return[o+t*c,r+t*h,s*Math.exp(qf*t*i)]};else{var d=Math.sqrt(f),p=(l*l-s*s+4*f)/(2*s*2*d),m=(l*l-s*s-4*f)/(2*l*2*d),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);i=(v-g)/qf,n=function(t){var e=t*i,n=ue(g),a=s/(2*d)*(n*ce(qf*e+g)-le(g));return[o+a*c,r+a*h,s*n/ue(qf*e+g)]}}return n.duration=1e3*i,n},Uf=he(Kt),Hf=he(ee),Wf=de(Kt),Gf=de(ee),Vf=pe(Kt),Yf=pe(ee),Xf=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},Jf=0,Qf=0,Kf=0,td=1e3,ed=0,nd=0,id=0,od="object"==typeof performance&&performance.now?performance:Date,rd="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};ve.prototype=_e.prototype={constructor:ve,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?me():+n)+(null==e?0:+e),this._next||xf===this||(xf?xf._next=this:bf=this,xf=this),this._call=t,this._time=n,Te()},stop:function(){this._call&&(this._call=null,this._time=1/0,Te())}};var sd=function(t,e,n){var i=new ve;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i},ad=function(t,e,n){var i=new ve,o=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?me():+n,i.restart(function r(s){s+=o,i.restart(r,o+=e,n),t(s)},e,n),i)},ud=m("start","end","interrupt"),ld=[],cd=0,hd=1,fd=2,dd=3,pd=4,md=5,gd=6,vd=function(t,e,n,i,o,r){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};ke(t,n,{name:e,index:i,group:o,on:ud,tween:ld,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:cd})},_d=function(t,e){var n,i,o,r=t.__transition,s=!0;if(r){e=null==e?null:e+"";for(o in r)(n=r[o]).name===e?(i=n.state>fd&&n.state<md,n.state=gd,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete r[o]):s=!1;s&&delete t.__transition}},yd=function(t){return this.each(function(){_d(this,t)})},bd=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,o=Le(this.node(),n).tween,r=0,s=o.length;r<s;++r)if((i=o[r]).name===t)return i.value;return null}return this.each((null==e?Se:Pe)(n,t,e))},xd=function(t,e){var n;return("number"==typeof e?Af:e instanceof Lt?Mf:(n=Lt(e))?(e=n,Mf):zf)(t,e)},wd=function(t,e){var n=jc(t),i="transform"===n?Ff:xd;return this.attrTween(t,"function"==typeof e?(n.local?De:Oe)(n,i,Ae(this,"attr."+t,e)):null==e?(n.local?Ne:Ee)(n):(n.local?ze:Ie)(n,i,e+""))},Td=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=jc(t);return this.tween(n,(i.local?Re:je)(i,e))},Cd=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Be:$e)(e,t)):Le(this.node(),e).delay},Md=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fe:qe)(e,t)):Le(this.node(),e).duration},Ld=function(t){var e=this._id;return arguments.length?this.each(Ze(e,t)):Le(this.node(),e).ease},kd=function(t){"function"!=typeof t&&(t=Uc(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s=e[o],a=s.length,u=i[o]=[],l=0;l<a;++l)(r=s[l])&&t.call(r,r.__data__,l,s)&&u.push(r);return new tn(i,this._parents,this._name,this._id)},Sd=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),s=new Array(i),a=0;a<r;++a)for(var u,l=e[a],c=n[a],h=l.length,f=s[a]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;a<i;++a)s[a]=e[a];return new tn(s,this._parents,this._name,this._id)},Pd=function(t,e){var n=this._id;return arguments.length<2?Le(this.node(),n).on.on(t):this.each(He(n,t,e))},Ad=function(){return this.on("end.remove",We(this._id))},Ed=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Xc(t));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var a,u,l=i[s],c=l.length,h=r[s]=new Array(c),f=0;f<c;++f)(a=l[f])&&(u=t.call(a,a.__data__,f,l))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u,vd(h[f],e,n,f,h,Le(a,n)));return new tn(r,this._parents,e,n)},Nd=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Qc(t));for(var i=this._groups,o=i.length,r=[],s=[],a=0;a<o;++a)for(var u,l=i[a],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=Le(u,n),m=0,g=d.length;m<g;++m)(f=d[m])&&vd(f,e,n,m,d,p);r.push(d),s.push(u)}return new tn(r,s,e,n)},Id=vt.prototype.constructor,zd=function(){return new Id(this._groups,this._parents)},Od=function(t,e,n){var i="transform"==(t+="")?$f:xd;return null==e?this.styleTween(t,Ge(t,i)).on("end.style."+t,Ve(t)):this.styleTween(t,"function"==typeof e?Xe(t,i,Ae(this,"style."+t,e)):Ye(t,i,e+""),n)},Dd=function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Je(t,e,null==n?"":n))},Rd=function(t){return this.tween("text","function"==typeof t?Ke(Ae(this,"text",t)):Qe(null==t?"":t+""))},jd=function(){for(var t=this._name,e=this._id,n=nn(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s,a=i[r],u=a.length,l=0;l<u;++l)if(s=a[l]){var c=Le(s,e);vd(s,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tn(i,this._parents,t,n)},Bd=0,$d=vt.prototype;tn.prototype=en.prototype={constructor:tn,select:Ed,selectAll:Nd,filter:kd,merge:Sd,selection:zd,transition:jd,call:$d.call,nodes:$d.nodes,node:$d.node,size:$d.size,empty:$d.empty,each:$d.each,on:Pd,attr:wd,attrTween:Td,style:Od,styleTween:Dd,text:Rd,remove:Ad,tween:bd,delay:Cd,duration:Md,ease:Ld};var Fd=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),qd=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Zd=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Ud=Math.PI,Hd=Ud/2,Wd=4/11,Gd=6/11,Vd=8/11,Yd=.75,Xd=9/11,Jd=10/11,Qd=.9375,Kd=21/22,tp=63/64,ep=1/Wd/Wd,np=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),ip=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),op=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),rp=2*Math.PI,sp=function t(e,n){function i(t){return e*Math.pow(2,10*--t)*Math.sin((o-t)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=rp);return i.amplitude=function(e){return t(e,n*rp)},i.period=function(n){return t(e,n)},i}(1,.3),ap=function t(e,n){function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+o)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=rp);return i.amplitude=function(e){return t(e,n*rp)},i.period=function(n){return t(e,n)},i}(1,.3),up=function t(e,n){function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((o-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((o+t)/n))/2}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=rp);return i.amplitude=function(e){return t(e,n*rp)},i.period=function(n){return t(e,n)},i}(1,.3),lp={time:null,delay:0,duration:250,ease:cn},cp=function(t){var e,n;t instanceof tn?(e=t._id,t=t._name):(e=nn(),(n=lp).time=me(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s,a=i[r],u=a.length,l=0;l<u;++l)(s=a[l])&&vd(s,t,e,l,a,n||Tn(s,e));return new tn(i,this._parents,t,e)};vt.prototype.interrupt=yd,vt.prototype.transition=cp;var hp=[null],fp=function(t,e){var n,i,o=t.__transition;if(o){e=null==e?null:e+"";for(i in o)if((n=o[i]).state>hd&&n.name===e)return new tn([[t]],hp,e,+i)}return null},dp=function(t){return function(){return t}},pp=function(t,e,n){this.target=t,this.type=e,this.selection=n},mp=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},gp={name:"drag"},vp={name:"space"},_p={name:"handle"},yp={name:"center"},bp={name:"x",handles:["e","w"].map(Mn),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},xp={name:"y",handles:["n","s"].map(Mn),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},wp={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Mn),input:function(t){return t},output:function(t){return t}},Tp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Cp={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Mp={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Lp={overlay:1,
selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},kp={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Sp=function(){return In(wp)},Pp=Math.cos,Ap=Math.sin,Ep=Math.PI,Np=Ep/2,Ip=2*Ep,zp=Math.max,Op=function(){function t(t){var r,s,a,u,l,c,h=t.length,f=[],d=ac(h),p=[],m=[],g=m.groups=new Array(h),v=new Array(h*h);for(r=0,l=-1;++l<h;){for(s=0,c=-1;++c<h;)s+=t[l][c];f.push(s),p.push(ac(h)),r+=s}for(n&&d.sort(function(t,e){return n(f[t],f[e])}),i&&p.forEach(function(e,n){e.sort(function(e,o){return i(t[n][e],t[n][o])})}),r=zp(0,Ip-e*h)/r,u=r?e:Ip/h,s=0,l=-1;++l<h;){for(a=s,c=-1;++c<h;){var _=d[l],y=p[_][c],b=t[_][y],x=s,w=s+=b*r;v[y*h+_]={index:_,subindex:y,startAngle:x,endAngle:w,value:b}}g[_]={index:_,startAngle:a,endAngle:s,value:f[_]},s+=u}for(l=-1;++l<h;)for(c=l-1;++c<h;){var T=v[c*h+l],C=v[l*h+c];(T.value||C.value)&&m.push(T.value<C.value?{source:C,target:T}:{source:T,target:C})}return o?m.sort(o):m}var e=0,n=null,i=null,o=null;return t.padAngle=function(n){return arguments.length?(e=zp(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(i=e,t):i},t.sortChords=function(e){return arguments.length?(null==e?o=null:(o=zn(e))._=e,t):o&&o._},t},Dp=Array.prototype.slice,Rp=function(t){return function(){return t}},jp=Math.PI,Bp=2*jp,$p=Bp-1e-6;On.prototype=Dn.prototype={constructor:On,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,o,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var r=this._x1,s=this._y1,a=n-t,u=i-e,l=r-t,c=s-e,h=l*l+c*c;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(c*a-u*l)>1e-6&&o){var f=n-r,d=i-s,p=a*a+u*u,m=f*f+d*d,g=Math.sqrt(p),v=Math.sqrt(h),_=o*Math.tan((jp-Math.acos((p+h-m)/(2*g*v)))/2),y=_/v,b=_/g;Math.abs(y-1)>1e-6&&(this._+="L"+(t+y*l)+","+(e+y*c)),this._+="A"+o+","+o+",0,0,"+ +(c*f>l*d)+","+(this._x1=t+b*a)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,o,r){t=+t,e=+e,n=+n;var s=n*Math.cos(i),a=n*Math.sin(i),u=t+s,l=e+a,c=1^r,h=r?i-o:o-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%Bp+Bp),h>$p?this._+="A"+n+","+n+",0,1,"+c+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=jp)+","+c+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Fp=function(){function t(){var t,a=Dp.call(arguments),u=e.apply(this,a),l=n.apply(this,a),c=+i.apply(this,(a[0]=u,a)),h=o.apply(this,a)-Np,f=r.apply(this,a)-Np,d=c*Pp(h),p=c*Ap(h),m=+i.apply(this,(a[0]=l,a)),g=o.apply(this,a)-Np,v=r.apply(this,a)-Np;if(s||(s=t=Dn()),s.moveTo(d,p),s.arc(0,0,c,h,f),h===g&&f===v||(s.quadraticCurveTo(0,0,m*Pp(g),m*Ap(g)),s.arc(0,0,m,g,v)),s.quadraticCurveTo(0,0,d,p),s.closePath(),t)return s=null,t+""||null}var e=Rn,n=jn,i=Bn,o=$n,r=Fn,s=null;return t.radius=function(e){return arguments.length?(i="function"==typeof e?e:Rp(+e),t):i},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:Rp(+e),t):o},t.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:Rp(+e),t):r},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(s=null==e?null:e,t):s},t};qn.prototype=Zn.prototype={constructor:qn,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var qp=function(){function t(e,o,s,a){if(o>=r.length)return null!=i?i(e):null!=n?e.sort(n):e;for(var u,l,c,h=-1,f=e.length,d=r[o++],p=Zn(),m=s();++h<f;)(c=p.get(u=d(l=e[h])+""))?c.push(l):p.set(u,[l]);return p.each(function(e,n){a(m,n,t(e,o,s,a))}),m}function e(t,n){if(++n>r.length)return t;var o,a=s[n-1];return null!=i&&n>=r.length?o=t.entries():(o=[],t.each(function(t,i){o.push({key:i,values:e(t,n)})})),null!=a?o.sort(function(t,e){return a(t.key,e.key)}):o}var n,i,o,r=[],s=[];return o={object:function(e){return t(e,0,Un,Hn)},map:function(e){return t(e,0,Wn,Gn)},entries:function(n){return e(t(n,0,Wn,Gn),0)},key:function(t){return r.push(t),o},sortKeys:function(t){return s[r.length-1]=t,o},sortValues:function(t){return n=t,o},rollup:function(t){return i=t,o}}},Zp=Zn.prototype;Vn.prototype=Yn.prototype={constructor:Vn,has:Zp.has,add:function(t){return t+="",this["$"+t]=t,this},remove:Zp.remove,clear:Zp.clear,values:Zp.keys,size:Zp.size,empty:Zp.empty,each:Zp.each};var Up=function(t){var e=[];for(var n in t)e.push(n);return e},Hp=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Wp=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Gp=function(t){function e(t,e){var i,o,r=n(t,function(t,n){if(i)return i(t,n-1);o=t,i=e?Jn(t,e):Xn(t)});return r.columns=o,r}function n(t,e){function n(){if(c>=l)return s;if(o)return o=!1,r;var e,n=c;if(34===t.charCodeAt(n)){for(var i=n;i++<l;)if(34===t.charCodeAt(i)){if(34!==t.charCodeAt(i+1))break;++i}return c=i+2,e=t.charCodeAt(i+1),13===e?(o=!0,10===t.charCodeAt(i+2)&&++c):10===e&&(o=!0),t.slice(n+1,i).replace(/""/g,'"')}for(;c<l;){var a=1;if(10===(e=t.charCodeAt(c++)))o=!0;else if(13===e)o=!0,10===t.charCodeAt(c)&&(++c,++a);else if(e!==u)continue;return t.slice(n,c-a)}return t.slice(n)}for(var i,o,r={},s={},a=[],l=t.length,c=0,h=0;(i=n())!==s;){for(var f=[];i!==r&&i!==s;)f.push(i),i=n();e&&null==(f=e(f,h++))||a.push(f)}return a}function i(e,n){return null==n&&(n=Qn(e)),[n.map(s).join(t)].concat(e.map(function(e){return n.map(function(t){return s(e[t])}).join(t)})).join("\n")}function o(t){return t.map(r).join("\n")}function r(e){return e.map(s).join(t)}function s(t){return null==t?"":a.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n\r]"),u=t.charCodeAt(0);return{parse:e,parseRows:n,format:i,formatRows:o}},Vp=Gp(","),Yp=Vp.parse,Xp=Vp.parseRows,Jp=Vp.format,Qp=Vp.formatRows,Kp=Gp("\t"),tm=Kp.parse,em=Kp.parseRows,nm=Kp.format,im=Kp.formatRows,om=function(t,e){function n(){var n,o,r=i.length,s=0,a=0;for(n=0;n<r;++n)o=i[n],s+=o.x,a+=o.y;for(s=s/r-t,a=a/r-e,n=0;n<r;++n)o=i[n],o.x-=s,o.y-=a}var i;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){i=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},rm=function(t){return function(){return t}},sm=function(){return 1e-6*(Math.random()-.5)},am=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Kn(this.cover(e,n),e,n,t)},um=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,o=this._x1,r=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{if(!(n>t||t>o||i>e||e>r))return this;var s,a,u=o-n,l=this._root;switch(a=(e<(i+r)/2)<<1|t<(n+o)/2){case 0:do{s=new Array(4),s[a]=l,l=s}while(u*=2,o=n+u,r=i+u,t>o||e>r);break;case 1:do{s=new Array(4),s[a]=l,l=s}while(u*=2,n=o-u,r=i+u,n>t||e>r);break;case 2:do{s=new Array(4),s[a]=l,l=s}while(u*=2,o=n+u,i=r-u,t>o||i>e);break;case 3:do{s=new Array(4),s[a]=l,l=s}while(u*=2,n=o-u,i=r-u,n>t||i>e)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=o,this._y1=r,this},lm=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},cm=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},hm=function(t,e,n,i,o){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=o},fm=function(t,e,n){var i,o,r,s,a,u,l,c=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new hm(m,c,h,f,d)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(o=u.x0)>f||(r=u.y0)>d||(s=u.x1)<c||(a=u.y1)<h))if(m.length){var g=(o+s)/2,v=(r+a)/2;p.push(new hm(m[3],g,v,s,a),new hm(m[2],o,v,g,a),new hm(m[1],g,r,s,v),new hm(m[0],o,r,g,v)),(l=(e>=v)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var _=t-+this._x.call(null,m.data),y=e-+this._y.call(null,m.data),b=_*_+y*y;if(b<n){var x=Math.sqrt(n=b);c=t-x,h=e-x,f=t+x,d=e+x,i=m.data}}return i},dm=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,o,r,s,a,u,l,c,h,f,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((l=r>=(a=(p+g)/2))?p=a:g=a,(c=s>=(u=(m+v)/2))?m=u:v=u,e=d,!(d=d[h=c<<1|l]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,i?(o?i.next=o:delete i.next,this):e?(o?e[h]=o:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=o,this)},pm=function(){return this._root},mm=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},gm=function(t){var e,n,i,o,r,s,a=[],u=this._root;for(u&&a.push(new hm(u,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(u=e.node,i=e.x0,o=e.y0,r=e.x1,s=e.y1)&&u.length){var l=(i+r)/2,c=(o+s)/2;(n=u[3])&&a.push(new hm(n,l,c,r,s)),(n=u[2])&&a.push(new hm(n,i,c,l,s)),(n=u[1])&&a.push(new hm(n,l,o,r,c)),(n=u[0])&&a.push(new hm(n,i,o,l,c))}return this},vm=function(t){var e,n=[],i=[];for(this._root&&n.push(new hm(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var r,s=e.x0,a=e.y0,u=e.x1,l=e.y1,c=(s+u)/2,h=(a+l)/2;(r=o[0])&&n.push(new hm(r,s,a,c,h)),(r=o[1])&&n.push(new hm(r,c,a,u,h)),(r=o[2])&&n.push(new hm(r,s,h,c,l)),(r=o[3])&&n.push(new hm(r,c,h,u,l))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},_m=function(t){return arguments.length?(this._x=t,this):this._x},ym=function(t){return arguments.length?(this._y=t,this):this._y},bm=oi.prototype=ri.prototype;bm.copy=function(){var t,e,n=new ri(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=si(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var o=0;o<4;++o)(e=i.source[o])&&(e.length?t.push({source:e,target:i.target[o]=new Array(4)}):i.target[o]=si(e));return n},bm.add=am,bm.addAll=ti,bm.cover=um,bm.data=lm,bm.extent=cm,bm.find=fm,bm.remove=dm,bm.removeAll=ei,bm.root=pm,bm.size=mm,bm.visit=gm,bm.visitAfter=vm,bm.x=_m,bm.y=ym;var xm,wm=function(t){function e(){function t(t,e,n,i,o){var r=t.data,a=t.r,d=h+a;{if(!r)return e>l+d||i<l-d||n>c+d||o<c-d;if(r.index>u.index){var p=l-r.x-r.vx,m=c-r.y-r.vy,g=p*p+m*m;g<d*d&&(0===p&&(p=sm(),g+=p*p),0===m&&(m=sm(),g+=m*m),g=(d-(g=Math.sqrt(g)))/g*s,u.vx+=(p*=g)*(d=(a*=a)/(f+a)),u.vy+=(m*=g)*d,r.vx-=p*(d=1-d),r.vy-=m*d)}}}for(var e,i,u,l,c,h,f,d=o.length,p=0;p<a;++p)for(i=oi(o,ai,ui).visitAfter(n),e=0;e<d;++e)u=o[e],h=r[u.index],f=h*h,l=u.x+u.vx,c=u.y+u.vy,i.visit(t)}function n(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function i(){if(o){var e,n,i=o.length;for(r=new Array(i),e=0;e<i;++e)n=o[e],r[n.index]=+t(n,e,o)}}var o,r,s=1,a=1;return"function"!=typeof t&&(t=rm(null==t?1:+t)),e.initialize=function(t){o=t,i()},e.iterations=function(t){return arguments.length?(a=+t,e):a},e.strength=function(t){return arguments.length?(s=+t,e):s},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:rm(+n),i(),e):t},e},Tm=function(t){function e(t){return 1/Math.min(l[t.source.index],l[t.target.index])}function n(e){for(var n=0,i=t.length;n<p;++n)for(var o,r,u,l,h,f,d,m=0;m<i;++m)o=t[m],r=o.source,u=o.target,l=u.x+u.vx-r.x-r.vx||sm(),h=u.y+u.vy-r.y-r.vy||sm(),f=Math.sqrt(l*l+h*h),f=(f-a[m])/f*e*s[m],l*=f,h*=f,u.vx-=l*(d=c[m]),u.vy-=h*d,r.vx+=l*(d=1-d),r.vy+=h*d}function i(){if(u){var e,n,i=u.length,f=t.length,d=Zn(u,h);for(e=0,l=new Array(i);e<f;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=ci(d,n.source)),"object"!=typeof n.target&&(n.target=ci(d,n.target)),l[n.source.index]=(l[n.source.index]||0)+1,l[n.target.index]=(l[n.target.index]||0)+1;for(e=0,c=new Array(f);e<f;++e)n=t[e],c[e]=l[n.source.index]/(l[n.source.index]+l[n.target.index]);s=new Array(f),o(),a=new Array(f),r()}}function o(){if(u)for(var e=0,n=t.length;e<n;++e)s[e]=+f(t[e],e,t)}function r(){if(u)for(var e=0,n=t.length;e<n;++e)a[e]=+d(t[e],e,t)}var s,a,u,l,c,h=li,f=e,d=rm(30),p=1;return null==t&&(t=[]),n.initialize=function(t){u=t,i()},n.links=function(e){return arguments.length?(t=e,i(),n):t},n.id=function(t){return arguments.length?(h=t,n):h},n.iterations=function(t){return arguments.length?(p=+t,n):p},n.strength=function(t){return arguments.length?(f="function"==typeof t?t:rm(+t),o(),n):f},n.distance=function(t){return arguments.length?(d="function"==typeof t?t:rm(+t),r(),n):d},n},Cm=10,Mm=Math.PI*(3-Math.sqrt(5)),Lm=function(t){function e(){n(),d.call("tick",r),s<a&&(f.stop(),d.call("end",r))}function n(){var e,n,i=t.length;for(s+=(l-s)*u,h.each(function(t){t(s)}),e=0;e<i;++e)n=t[e],null==n.fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0)}function i(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var o=Cm*Math.sqrt(n),r=n*Mm;e.x=o*Math.cos(r),e.y=o*Math.sin(r)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function o(e){return e.initialize&&e.initialize(t),e}var r,s=1,a=.001,u=1-Math.pow(a,1/300),l=0,c=.6,h=Zn(),f=_e(e),d=m("tick","end");return null==t&&(t=[]),i(),r={tick:n,restart:function(){return f.restart(e),r},stop:function(){return f.stop(),r},nodes:function(e){return arguments.length?(t=e,i(),h.each(o),r):t},alpha:function(t){return arguments.length?(s=+t,r):s},alphaMin:function(t){return arguments.length?(a=+t,r):a},alphaDecay:function(t){return arguments.length?(u=+t,r):+u},alphaTarget:function(t){return arguments.length?(l=+t,r):l},velocityDecay:function(t){return arguments.length?(c=1-t,r):1-c},force:function(t,e){return arguments.length>1?(null==e?h.remove(t):h.set(t,o(e)),r):h.get(t)},find:function(e,n,i){var o,r,s,a,u,l=0,c=t.length;for(null==i?i=1/0:i*=i,l=0;l<c;++l)a=t[l],o=e-a.x,r=n-a.y,(s=o*o+r*r)<i&&(u=a,i=s);return u},on:function(t,e){return arguments.length>1?(d.on(t,e),r):d.on(t)}}},km=function(){function t(t){var e,a=o.length,u=oi(o,hi,fi).visitAfter(n);for(s=t,e=0;e<a;++e)r=o[e],u.visit(i)}function e(){if(o){var t,e,n=o.length;for(a=new Array(n),t=0;t<n;++t)e=o[t],a[e.index]=+u(e,t,o)}}function n(t){var e,n,i,o,r,s=0;if(t.length){for(i=o=r=0;r<4;++r)(e=t[r])&&(n=e.value)&&(s+=n,i+=n*e.x,o+=n*e.y);t.x=i/s,t.y=o/s}else{e=t,e.x=e.data.x,e.y=e.data.y;do{s+=a[e.data.index]}while(e=e.next)}t.value=s}function i(t,e,n,i){if(!t.value)return!0;var o=t.x-r.x,u=t.y-r.y,f=i-e,d=o*o+u*u;if(f*f/h<d)return d<c&&(0===o&&(o=sm(),d+=o*o),0===u&&(u=sm(),d+=u*u),d<l&&(d=Math.sqrt(l*d)),r.vx+=o*t.value*s/d,r.vy+=u*t.value*s/d),!0;if(!(t.length||d>=c)){(t.data!==r||t.next)&&(0===o&&(o=sm(),d+=o*o),0===u&&(u=sm(),d+=u*u),d<l&&(d=Math.sqrt(l*d)));do{t.data!==r&&(f=a[t.data.index]*s/d,r.vx+=o*f,r.vy+=u*f)}while(t=t.next)}}var o,r,s,a,u=rm(-30),l=1,c=1/0,h=.81;return t.initialize=function(t){o=t,e()},t.strength=function(n){return arguments.length?(u="function"==typeof n?n:rm(+n),e(),t):u},t.distanceMin=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t.distanceMax=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.theta=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t},Sm=function(t){function e(t){for(var e,n=0,s=i.length;n<s;++n)e=i[n],e.vx+=(r[n]-e.x)*o[n]*t}function n(){if(i){var e,n=i.length;for(o=new Array(n),r=new Array(n),e=0;e<n;++e)o[e]=isNaN(r[e]=+t(i[e],e,i))?0:+s(i[e],e,i)}}var i,o,r,s=rm(.1);return"function"!=typeof t&&(t=rm(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(s="function"==typeof t?t:rm(+t),n(),e):s},e.x=function(i){return arguments.length?(t="function"==typeof i?i:rm(+i),n(),e):t},e},Pm=function(t){function e(t){for(var e,n=0,s=i.length;n<s;++n)e=i[n],e.vy+=(r[n]-e.y)*o[n]*t}function n(){if(i){var e,n=i.length;for(o=new Array(n),r=new Array(n),e=0;e<n;++e)o[e]=isNaN(r[e]=+t(i[e],e,i))?0:+s(i[e],e,i)}}var i,o,r,s=rm(.1);return"function"!=typeof t&&(t=rm(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(s="function"==typeof t?t:rm(+t),n(),e):s},e.y=function(i){return arguments.length?(t="function"==typeof i?i:rm(+i),n(),e):t},e},Am=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},Em=function(t){return t=Am(Math.abs(t)),t?t[1]:NaN},Nm=function(t,e){return function(n,i){for(var o=n.length,r=[],s=0,a=t[0],u=0;o>0&&a>0&&(u+a+1>i&&(a=Math.max(1,i-u)),r.push(n.substring(o-=a,o+a)),!((u+=a+1)>i));)a=t[s=(s+1)%t.length];return r.reverse().join(e)}},Im=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},zm=function(t,e){t=t.toPrecision(e);t:for(var n,i=t.length,o=1,r=-1;o<i;++o)switch(t[o]){case".":r=n=o;break;case"0":0===r&&(r=o),n=o;break;case"e":break t;default:r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(n+1):t},Om=function(t,e){var n=Am(t,e);if(!n)return t+"";var i=n[0],o=n[1],r=o-(xm=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return r===s?i:r>s?i+new Array(r-s+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+Am(t,Math.max(0,e+r-1))[0]},Dm=function(t,e){var n=Am(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},Rm={"":zm,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Dm(100*t,e)},r:Dm,s:Om,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},jm=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;di.prototype=pi.prototype,pi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Bm,$m=function(t){return t},Fm=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],qm=function(t){function e(t){function e(t){var e,o,a,c=g,b=v;if("c"===m)b=_(t)+b,t="";else{t=+t;var x=t<0;if(t=_(Math.abs(t),p),x&&0==+t&&(x=!1),c=(x?"("===l?l:"-":"-"===l||"("===l?"":l)+c,b=b+("s"===m?Fm[8+xm/3]:"")+(x&&"("===l?")":""),y)for(e=-1,o=t.length;++e<o;)if(48>(a=t.charCodeAt(e))||a>57){b=(46===a?r+t.slice(e+1):t.slice(e))+b,t=t.slice(0,e);break}}d&&!h&&(t=i(t,1/0));var w=c.length+t.length+b.length,T=w<f?new Array(f-w+1).join(n):"";switch(d&&h&&(t=i(T+t,T.length?f-b.length:1/0),T=""),u){case"<":t=c+t+b+T;break;case"=":t=c+T+t+b;break;case"^":t=T.slice(0,w=T.length>>1)+c+t+b+T.slice(w);break;default:t=T+c+t+b}return s(t)}t=di(t);var n=t.fill,u=t.align,l=t.sign,c=t.symbol,h=t.zero,f=t.width,d=t.comma,p=t.precision,m=t.type,g="$"===c?o[0]:"#"===c&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",v="$"===c?o[1]:/[%p]/.test(m)?a:"",_=Rm[m],y=!m||/[defgprs%]/.test(m);return p=null==p?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}function n(t,n){var i=e((t=di(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(Em(n)/3))),r=Math.pow(10,-o),s=Fm[8+o/3];return function(t){return i(r*t)+s}}var i=t.grouping&&t.thousands?Nm(t.grouping,t.thousands):$m,o=t.currency,r=t.decimal,s=t.numerals?Im(t.numerals):$m,a=t.percent||"%";return{format:e,formatPrefix:n}};mi({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Zm=function(t){return Math.max(0,-Em(Math.abs(t)))},Um=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Em(e)/3)))-Em(Math.abs(t)))},Hm=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Em(e)-Em(t))+1},Wm=function(){return new gi};gi.prototype={constructor:gi,reset:function(){this.s=this.t=0},add:function(t){vi(Cg,t,this.t),vi(this,Cg.s,this.s),this.s?this.t+=Cg.t:this.s=Cg.t},valueOf:function(){return this.s}};var Gm,Vm,Ym,Xm,Jm,Qm,Km,tg,eg,ng,ig,og,rg,sg,ag,ug,lg,cg,hg,fg,dg,pg,mg,gg,vg,_g,yg,bg,xg,wg,Tg,Cg=new gi,Mg=1e-6,Lg=Math.PI,kg=Lg/2,Sg=Lg/4,Pg=2*Lg,Ag=180/Lg,Eg=Lg/180,Ng=Math.abs,Ig=Math.atan,zg=Math.atan2,Og=Math.cos,Dg=Math.ceil,Rg=Math.exp,jg=Math.log,Bg=Math.pow,$g=Math.sin,Fg=Math.sign||function(t){return t>0?1:t<0?-1:0},qg=Math.sqrt,Zg=Math.tan,Ug={Feature:function(t,e){wi(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)wi(n[i].geometry,e)}},Hg={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ti(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)Ti(n[i],e,0)},Polygon:function(t,e){Ci(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)Ci(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)wi(n[i],e)}},Wg=function(t,e){t&&Ug.hasOwnProperty(t.type)?Ug[t.type](t,e):wi(t,e)},Gg=Wm(),Vg=Wm(),Yg={point:xi,lineStart:xi,lineEnd:xi,polygonStart:function(){Gg.reset(),Yg.lineStart=Mi,Yg.lineEnd=Li},polygonEnd:function(){var t=+Gg;Vg.add(t<0?Pg+t:t),this.lineStart=this.lineEnd=this.point=xi},sphere:function(){Vg.add(Pg)}},Xg=function(t){return Vg.reset(),Wg(t,Yg),2*Vg},Jg=Wm(),Qg={point:Di,lineStart:ji,lineEnd:Bi,polygonStart:function(){Qg.point=$i,Qg.lineStart=Fi,Qg.lineEnd=qi,Jg.reset(),Yg.polygonStart()},polygonEnd:function(){Yg.polygonEnd(),Qg.point=Di,Qg.lineStart=ji,Qg.lineEnd=Bi,Gg<0?(Qm=-(tg=180),Km=-(eg=90)):Jg>Mg?eg=90:Jg<-Mg&&(Km=-90),ag[0]=Qm,ag[1]=tg}},Kg=function(t){var e,n,i,o,r,s,a;if(eg=tg=-(Qm=Km=1/0),sg=[],Wg(t,Qg),n=sg.length){for(sg.sort(Ui),e=1,i=sg[0],r=[i];e<n;++e)o=sg[e],Hi(i,o[0])||Hi(i,o[1])?(Zi(i[0],o[1])>Zi(i[0],i[1])&&(i[1]=o[1]),Zi(o[0],i[1])>Zi(i[0],i[1])&&(i[0]=o[0])):r.push(i=o);for(s=-1/0,n=r.length-1,e=0,i=r[n];e<=n;i=o,++e)o=r[e],(a=Zi(i[1],o[0]))>s&&(s=a,Qm=o[0],tg=i[1])}return sg=ag=null,Qm===1/0||Km===1/0?[[NaN,NaN],[NaN,NaN]]:[[Qm,Km],[tg,eg]]},tv={sphere:xi,point:Wi,lineStart:Vi,lineEnd:Ji,polygonStart:function(){tv.lineStart=Qi,tv.lineEnd=Ki},polygonEnd:function(){tv.lineStart=Vi,tv.lineEnd=Ji}},ev=function(t){ug=lg=cg=hg=fg=dg=pg=mg=gg=vg=_g=0,Wg(t,tv);var e=gg,n=vg,i=_g,o=e*e+n*n+i*i;return o<1e-12&&(e=dg,n=pg,i=mg,lg<Mg&&(e=cg,n=hg,i=fg),(o=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[zg(n,e)*Ag,yi(i/qg(o))*Ag]},nv=function(t){return function(){return t}},iv=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};no.invert=no;var ov,rv,sv,av,uv,lv,cv,hv,fv,dv,pv,mv=function(t){function e(e){return e=t(e[0]*Eg,e[1]*Eg),e[0]*=Ag,e[1]*=Ag,e}return t=io(t[0]*Eg,t[1]*Eg,t.length>2?t[2]*Eg:0),e.invert=function(e){return e=t.invert(e[0]*Eg,e[1]*Eg),e[0]*=Ag,e[1]*=Ag,e},e},gv=function(){function t(t,e){n.push(t=i(t,e)),t[0]*=Ag,t[1]*=Ag}function e(){var t=o.apply(this,arguments),e=r.apply(this,arguments)*Eg,u=s.apply(this,arguments)*Eg;return n=[],i=io(-t[0]*Eg,-t[1]*Eg,0).invert,ao(a,e,u,1),t={type:"Polygon",coordinates:[n]},n=i=null,t}var n,i,o=nv([0,0]),r=nv(90),s=nv(6),a={point:t};return e.center=function(t){return arguments.length?(o="function"==typeof t?t:nv([+t[0],+t[1]]),e):o},e.radius=function(t){return arguments.length?(r="function"==typeof t?t:nv(+t),e):r},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:nv(+t),e):s},e},vv=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:xi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},_v=function(t,e,n,i,o,r){var s,a=t[0],u=t[1],l=e[0],c=e[1],h=0,f=1,d=l-a,p=c-u;if(s=n-a,d||!(s>0)){if(s/=d,d<0){if(s<h)return;s<f&&(f=s)}else if(d>0){if(s>f)return;s>h&&(h=s)}if(s=o-a,d||!(s<0)){if(s/=d,d<0){if(s>f)return;s>h&&(h=s)}else if(d>0){if(s<h)return;s<f&&(f=s)}if(s=i-u,p||!(s>0)){if(s/=p,p<0){if(s<h)return;s<f&&(f=s)}else if(p>0){if(s>f)return;s>h&&(h=s)}if(s=r-u,p||!(s<0)){if(s/=p,p<0){if(s>f)return;s>h&&(h=s)}else if(p>0){if(s<h)return;s<f&&(f=s)}return h>0&&(t[0]=a+h*d,t[1]=u+h*p),f<1&&(e[0]=a+f*d,e[1]=u+f*p),!0}}}}},yv=function(t,e){return Ng(t[0]-e[0])<Mg&&Ng(t[1]-e[1])<Mg},bv=function(t,e,n,i,o){var r,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(yv(i,s)){for(o.lineStart(),r=0;r<e;++r)o.point((i=t[r])[0],i[1]);return void o.lineEnd()}a.push(n=new lo(i,t,null,!0)),u.push(n.o=new lo(i,null,n,!1)),a.push(n=new lo(s,t,null,!1)),u.push(n.o=new lo(s,null,n,!0))}}),a.length){for(u.sort(e),co(a),co(u),r=0,s=u.length;r<s;++r)u[r].e=n=!n;for(var l,c,h=a[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;l=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(r=0,s=l.length;r<s;++r)o.point((c=l[r])[0],c[1]);else i(f.x,f.n.x,1,o);f=f.n}else{if(d)for(l=f.p.z,r=l.length-1;r>=0;--r)o.point((c=l[r])[0],c[1]);else i(f.x,f.p.x,-1,o);f=f.p}f=f.o,l=f.z,d=!d}while(!f.v);o.lineEnd()}}},xv=1e9,wv=-xv,Tv=function(){var t,e,n,i=0,o=0,r=960,s=500;return n={stream:function(n){return t&&e===n?t:t=ho(i,o,r,s)(e=n)},extent:function(a){return arguments.length?(i=+a[0][0],o=+a[0][1],r=+a[1][0],s=+a[1][1],t=e=null,n):[[i,o],[r,s]]}}},Cv=Wm(),Mv=function(t,e){var n=e[0],i=e[1],o=[$g(n),-Og(n),0],r=0,s=0;Cv.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],f=h[0],d=h[1]/2+Sg,p=$g(d),m=Og(d),g=0;g<c;++g,f=_,p=b,m=x,h=v){var v=l[g],_=v[0],y=v[1]/2+Sg,b=$g(y),x=Og(y),w=_-f,T=w>=0?1:-1,C=T*w,M=C>Lg,L=p*b;if(Cv.add(zg(L*T*$g(C),m*x+L*Og(C))),r+=M?w+T*Pg:w,M^f>=n^_>=n){var k=Ni(Ai(h),Ai(v));Oi(k);var S=Ni(o,k);Oi(S);var P=(M^w>=0?-1:1)*yi(S[2]);(i>P||i===P&&(k[0]||k[1]))&&(s+=M^w>=0?1:-1)}}return(r<-Mg||r<Mg&&Cv<-Mg)^1&s},Lv=Wm(),kv={sphere:xi,point:xi,lineStart:fo,lineEnd:xi,polygonStart:xi,polygonEnd:xi},Sv=function(t){return Lv.reset(),Wg(t,kv),+Lv},Pv=[null,null],Av={type:"LineString",coordinates:Pv},Ev=function(t,e){return Pv[0]=t,Pv[1]=e,Sv(Av)},Nv={Feature:function(t,e){return vo(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)if(vo(n[i].geometry,e))return!0;return!1}},Iv={Sphere:function(){return!0},Point:function(t,e){return _o(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)if(_o(n[i],e))return!0;return!1},LineString:function(t,e){return yo(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)if(yo(n[i],e))return!0;return!1},Polygon:function(t,e){return bo(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)if(bo(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)if(vo(n[i],e))return!0;return!1}},zv=function(t,e){return(t&&Nv.hasOwnProperty(t.type)?Nv[t.type]:vo)(t,e)},Ov=function(t,e){var n=t[0]*Eg,i=t[1]*Eg,o=e[0]*Eg,r=e[1]*Eg,s=Og(i),a=$g(i),u=Og(r),l=$g(r),c=s*Og(n),h=s*$g(n),f=u*Og(o),d=u*$g(o),p=2*yi(qg(bi(r-i)+s*u*bi(o-n))),m=$g(p),g=p?function(t){var e=$g(t*=p)/m,n=$g(p-t)/m,i=n*c+e*f,o=n*h+e*d,r=n*a+e*l;return[zg(o,i)*Ag,zg(r,qg(i*i+o*o))*Ag]}:function(){return[n*Ag,i*Ag]};return g.distance=p,g},Dv=function(t){return t},Rv=Wm(),jv=Wm(),Bv={point:xi,lineStart:xi,lineEnd:xi,polygonStart:function(){Bv.lineStart=ko,Bv.lineEnd=Ao},polygonEnd:function(){Bv.lineStart=Bv.lineEnd=Bv.point=xi,Rv.add(Ng(jv)),jv.reset()},result:function(){var t=Rv/2;return Rv.reset(),t}},$v=1/0,Fv=$v,qv=-$v,Zv=qv,Uv={point:Eo,lineStart:xi,lineEnd:xi,polygonStart:xi,polygonEnd:xi,result:function(){var t=[[$v,Fv],[qv,Zv]];return qv=Zv=-(Fv=$v=1/0),t}},Hv=0,Wv=0,Gv=0,Vv=0,Yv=0,Xv=0,Jv=0,Qv=0,Kv=0,t_={point:No,lineStart:Io,lineEnd:Do,polygonStart:function(){t_.lineStart=Ro,t_.lineEnd=jo},polygonEnd:function(){t_.point=No,t_.lineStart=Io,t_.lineEnd=Do},result:function(){var t=Kv?[Jv/Kv,Qv/Kv]:Xv?[Vv/Xv,Yv/Xv]:Gv?[Hv/Gv,Wv/Gv]:[NaN,NaN];return Hv=Wv=Gv=Vv=Yv=Xv=Jv=Qv=Kv=0,t}};Fo.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Pg)}},result:xi};var e_,n_,i_,o_,r_,s_=Wm(),a_={point:xi,lineStart:function(){a_.point=qo},lineEnd:function(){e_&&Zo(n_,i_),a_.point=xi},polygonStart:function(){e_=!0},polygonEnd:function(){e_=null},result:function(){var t=+s_;return s_.reset(),t}};Uo.prototype={_radius:4.5,_circle:Ho(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Ho(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var u_=function(t,e){function n(t){return t&&("function"==typeof r&&o.pointRadius(+r.apply(this,arguments)),Wg(t,i(o))),o.result()}var i,o,r=4.5;return n.area=function(t){return Wg(t,i(Bv)),Bv.result()},n.measure=function(t){return Wg(t,i(a_)),a_.result()},n.bounds=function(t){return Wg(t,i(Uv)),Uv.result()},n.centroid=function(t){return Wg(t,i(t_)),t_.result()},n.projection=function(e){return arguments.length?(i=null==e?(t=null,Dv):(t=e).stream,n):t},n.context=function(t){return arguments.length?(o=null==t?(e=null,new Uo):new Fo(e=t),"function"!=typeof r&&o.pointRadius(r),n):e},n.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(o.pointRadius(+t),+t),n):r},n.projection(t).context(e)},l_=function(t,e,n,i){return function(o,r){function s(e,n){var i=o(e,n);t(e=i[0],n=i[1])&&r.point(e,n)}function a(t,e){var n=o(t,e);g.point(n[0],n[1])}function u(){x.point=a,
g.lineStart()}function l(){x.point=s,g.lineEnd()}function c(t,e){m.push([t,e]);var n=o(t,e);y.point(n[0],n[1])}function h(){y.lineStart(),m=[]}function f(){c(m[0][0],m[0][1]),y.lineEnd();var t,e,n,i,o=y.clean(),s=_.result(),a=s.length;if(m.pop(),d.push(m),m=null,a)if(1&o){if(n=s[0],(e=n.length-1)>0){for(b||(r.polygonStart(),b=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else a>1&&2&o&&s.push(s.pop().concat(s.shift())),p.push(s.filter(Wo))}var d,p,m,g=e(r),v=o.invert(i[0],i[1]),_=vv(),y=e(_),b=!1,x={point:s,lineStart:u,lineEnd:l,polygonStart:function(){x.point=c,x.lineStart=h,x.lineEnd=f,p=[],d=[]},polygonEnd:function(){x.point=s,x.lineStart=u,x.lineEnd=l,p=bc(p);var t=Mv(d,v);p.length?(b||(r.polygonStart(),b=!0),bv(p,Go,t,n,r)):t&&(b||(r.polygonStart(),b=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),b&&(r.polygonEnd(),b=!1),p=d=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};return x}},c_=l_(function(){return!0},Vo,Xo,[-Lg,-kg]),h_=function(t,e){function n(n,i,o,r){ao(r,t,e,o,n,i)}function i(t,e){return Og(t)*Og(e)>a}function o(t){var e,n,o,a,c;return{lineStart:function(){a=o=!1,c=1},point:function(h,f){var d,p=[h,f],m=i(h,f),g=u?m?0:s(h,f):m?s(h+(h<0?Lg:-Lg),f):0;if(!e&&(a=o=m)&&t.lineStart(),m!==o&&(!(d=r(e,p))||yv(e,d)||yv(p,d))&&(p[0]+=Mg,p[1]+=Mg,m=i(p[0],p[1])),m!==o)c=0,m?(t.lineStart(),d=r(p,e),t.point(d[0],d[1])):(d=r(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(l&&e&&u^m){var v;g&n||!(v=r(p,e,!0))||(c=0,u?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&yv(e,p)||t.point(p[0],p[1]),e=p,o=m,n=g},lineEnd:function(){o&&t.lineEnd(),e=null},clean:function(){return c|(a&&o)<<1}}}function r(t,e,n){var i=Ai(t),o=Ai(e),r=[1,0,0],s=Ni(i,o),u=Ei(s,s),l=s[0],c=u-l*l;if(!c)return!n&&t;var h=a*u/c,f=-a*l/c,d=Ni(r,s),p=zi(r,h);Ii(p,zi(s,f));var m=d,g=Ei(p,m),v=Ei(m,m),_=g*g-v*(Ei(p,p)-1);if(!(_<0)){var y=qg(_),b=zi(m,(-g-y)/v);if(Ii(b,p),b=Pi(b),!n)return b;var x,w=t[0],T=e[0],C=t[1],M=e[1];T<w&&(x=w,w=T,T=x);var L=T-w,k=Ng(L-Lg)<Mg,S=k||L<Mg;if(!k&&M<C&&(x=C,C=M,M=x),S?k?C+M>0^b[1]<(Ng(b[0]-w)<Mg?C:M):C<=b[1]&&b[1]<=M:L>Lg^(w<=b[0]&&b[0]<=T)){var P=zi(m,(-g+y)/v);return Ii(P,p),[b,Pi(P)]}}}function s(e,n){var i=u?t:Lg-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}var a=Og(t),u=a>0,l=Ng(a)>Mg;return l_(i,o,n,u?[0,-t]:[-Lg,t-Lg])},f_=function(t){return{stream:Jo(t)}};Qo.prototype={constructor:Qo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var d_=16,p_=Og(30*Eg),m_=function(t,e){return+e?nr(t,e):er(t)},g_=Jo({point:function(t,e){this.stream.point(t*Eg,e*Eg)}}),v_=function(){return rr(ar).scale(155.424).center([0,33.6442])},__=function(){return v_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},y_=function(){function t(t){var e=t[0],n=t[1];return a=null,o.point(e,n),a||(r.point(e,n),a)||(s.point(e,n),a)}function e(){return n=i=null,t}var n,i,o,r,s,a,u=__(),l=v_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=v_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){a=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),i=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&i>=-.425&&i<-.214?l:o>=.166&&o<.234&&i>=-.214&&i<-.115?c:u).invert(t)},t.stream=function(t){return n&&i===t?n:n=ur([u.stream(i=t),l.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),l.scale(.35*e),c.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),i=+t[0],a=+t[1];return o=u.translate(t).clipExtent([[i-.455*n,a-.238*n],[i+.455*n,a+.238*n]]).stream(h),r=l.translate([i-.307*n,a+.201*n]).clipExtent([[i-.425*n+Mg,a+.12*n+Mg],[i-.214*n-Mg,a+.234*n-Mg]]).stream(h),s=c.translate([i-.205*n,a+.212*n]).clipExtent([[i-.214*n+Mg,a+.166*n+Mg],[i-.115*n-Mg,a+.234*n-Mg]]).stream(h),e()},t.fitExtent=function(e,n){return Ko(t,e,n)},t.fitSize=function(e,n){return tr(t,e,n)},t.scale(1070)},b_=lr(function(t){return qg(2/(1+t))});b_.invert=cr(function(t){return 2*yi(t/2)});var x_=function(){return ir(b_).scale(124.75).clipAngle(179.999)},w_=lr(function(t){return(t=_i(t))&&t/$g(t)});w_.invert=cr(function(t){return t});var T_=function(){return ir(w_).scale(79.4188).clipAngle(179.999)};hr.invert=function(t,e){return[t,2*Ig(Rg(e))-kg]};var C_=function(){return fr(hr).scale(961/Pg)},M_=function(){return rr(pr).scale(109.5).parallels([30,30])};mr.invert=mr;var L_=function(){return ir(mr).scale(152.63)},k_=function(){return rr(gr).scale(131.154).center([0,13.9389])};vr.invert=cr(Ig);var S_=function(){return ir(vr).scale(144.049).clipAngle(60)},P_=function(){function t(){return o=r=null,s}var e,n,i,o,r,s,a=1,u=0,l=0,c=1,h=1,f=Dv,d=null,p=Dv;return s={stream:function(t){return o&&r===t?o:o=f(p(r=t))},clipExtent:function(o){return arguments.length?(p=null==o?(d=e=n=i=null,Dv):ho(d=+o[0][0],e=+o[0][1],n=+o[1][0],i=+o[1][1]),t()):null==d?null:[[d,e],[n,i]]},scale:function(e){return arguments.length?(f=_r((a=+e)*c,a*h,u,l),t()):a},translate:function(e){return arguments.length?(f=_r(a*c,a*h,u=+e[0],l=+e[1]),t()):[u,l]},reflectX:function(e){return arguments.length?(f=_r(a*(c=e?-1:1),a*h,u,l),t()):c<0},reflectY:function(e){return arguments.length?(f=_r(a*c,a*(h=e?-1:1),u,l),t()):h<0},fitExtent:function(t,e){return Ko(s,t,e)},fitSize:function(t,e){return tr(s,t,e)}}};yr.invert=cr(yi);var A_=function(){return ir(yr).scale(249.5).clipAngle(90+Mg)};br.invert=cr(function(t){return 2*Ig(t)});var E_=function(){return ir(br).scale(250).clipAngle(142)};xr.invert=function(t,e){return[-e,2*Ig(Rg(t))-kg]};var N_=function(){var t=fr(xr),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},I_=function(){function t(t){var r,s=0;t.eachAfter(function(t){var n=t.children;n?(t.x=Tr(n),t.y=Mr(n)):(t.x=r?s+=e(t,r):0,t.y=0,r=t)});var a=kr(t),u=Sr(t),l=a.x-e(a,u)/2,c=u.x+e(u,a)/2;return t.eachAfter(o?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*i}:function(e){e.x=(e.x-l)/(c-l)*n,e.y=(1-(t.y?e.y/t.y:1))*i})}var e=wr,n=1,i=1,o=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(o=!1,n=+e[0],i=+e[1],t):o?null:[n,i]},t.nodeSize=function(e){return arguments.length?(o=!0,n=+e[0],i=+e[1],t):o?[n,i]:null},t},z_=function(){return this.eachAfter(Pr)},O_=function(t){var e,n,i,o,r=this,s=[r];do{for(e=s.reverse(),s=[];r=e.pop();)if(t(r),n=r.children)for(i=0,o=n.length;i<o;++i)s.push(n[i])}while(s.length);return this},D_=function(t){for(var e,n,i=this,o=[i];i=o.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)o.push(e[n]);return this},R_=function(t){for(var e,n,i,o=this,r=[o],s=[];o=r.pop();)if(s.push(o),e=o.children)for(n=0,i=e.length;n<i;++n)r.push(e[n]);for(;o=s.pop();)t(o);return this},j_=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,o=i&&i.length;--o>=0;)n+=i[o].value;e.value=n})},B_=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},$_=function(t){for(var e=this,n=Ar(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var o=i.length;t!==n;)i.splice(o,0,t),t=t.parent;return i},F_=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},q_=function(){var t=[];return this.each(function(e){t.push(e)}),t},Z_=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},U_=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e};Dr.prototype=Er.prototype={constructor:Dr,count:z_,each:O_,eachAfter:R_,eachBefore:D_,sum:j_,sort:B_,path:$_,ancestors:F_,descendants:q_,leaves:Z_,links:U_,copy:Nr};var H_=function(t){for(var e=(t=t.slice()).length,n=null,i=n;e;){var o=new Rr(t[e-1]);i=i?i.next=o:n=o,t[void 0]=t[--e]}return{head:n,tail:i}},W_=function(t){return Br(H_(t),[])},G_=function(t){return Gr(t),t},V_=function(t){return function(){return t}},Y_=function(){function t(t){return t.x=n/2,t.y=i/2,e?t.eachBefore(Qr(e)).eachAfter(Kr(o,.5)).eachBefore(ts(1)):t.eachBefore(Qr(Jr)).eachAfter(Kr(Xr,1)).eachAfter(Kr(o,t.r/Math.min(n,i))).eachBefore(ts(Math.min(n,i)/(2*t.r))),t}var e=null,n=1,i=1,o=Xr;return t.radius=function(n){return arguments.length?(e=Vr(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.padding=function(e){return arguments.length?(o="function"==typeof e?e:V_(+e),t):o},t},X_=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},J_=function(t,e,n,i,o){for(var r,s=t.children,a=-1,u=s.length,l=t.value&&(i-e)/t.value;++a<u;)r=s[a],r.y0=n,r.y1=o,r.x0=e,r.x1=e+=r.value*l},Q_=function(){function t(t){var s=t.height+1;return t.x0=t.y0=o,t.x1=n,t.y1=i/s,t.eachBefore(e(i,s)),r&&t.eachBefore(X_),t}function e(t,e){return function(n){n.children&&J_(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var i=n.x0,r=n.y0,s=n.x1-o,a=n.y1-o;s<i&&(i=s=(i+s)/2),a<r&&(r=a=(r+a)/2),n.x0=i,n.y0=r,n.x1=s,n.y1=a}}var n=1,i=1,o=0,r=!1;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.padding=function(e){return arguments.length?(o=+e,t):o},t},K_="$",ty={depth:-1},ey={},ny=function(){function t(t){var i,o,r,s,a,u,l,c=t.length,h=new Array(c),f={};for(o=0;o<c;++o)i=t[o],a=h[o]=new Dr(i),null!=(u=e(i,o,t))&&(u+="")&&(l=K_+(a.id=u),f[l]=l in f?ey:a);for(o=0;o<c;++o)if(a=h[o],null!=(u=n(t[o],o,t))&&(u+="")){if(!(s=f[K_+u]))throw new Error("missing: "+u);if(s===ey)throw new Error("ambiguous: "+u);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(r)throw new Error("multiple roots");r=a}if(!r)throw new Error("no root");if(r.parent=ty,r.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(Or),r.parent=null,c>0)throw new Error("cycle");return r}var e=es,n=ns;return t.id=function(n){return arguments.length?(e=Yr(n),t):e},t.parentId=function(e){return arguments.length?(n=Yr(e),t):n},t};ls.prototype=Object.create(Dr.prototype);var iy=function(){function t(t){var i=cs(t);if(i.eachAfter(e),i.parent.m=-i.z,i.eachBefore(n),u)t.eachBefore(o);else{var l=t,c=t,h=t;t.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)});var f=l===c?1:r(l,c)/2,d=f-l.x,p=s/(c.x+f+d),m=a/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return t}function e(t){var e=t.children,n=t.parent.children,o=t.i?n[t.i-1]:null;if(e){as(t);var s=(e[0].z+e[e.length-1].z)/2;o?(t.z=o.z+r(t._,o._),t.m=t.z-s):t.z=s}else o&&(t.z=o.z+r(t._,o._));t.parent.A=i(t,o,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var i,o=t,s=t,a=e,u=o.parent.children[0],l=o.m,c=s.m,h=a.m,f=u.m;a=rs(a),o=os(o),a&&o;)u=os(u),s=rs(s),s.a=t,i=a.z+h-o.z-l+r(a._,o._),i>0&&(ss(us(a,t,n),t,i),l+=i,c+=i),h+=a.m,l+=o.m,f+=u.m,c+=s.m;a&&!rs(s)&&(s.t=a,s.m+=h-c),o&&!os(u)&&(u.t=o,u.m+=l-f,n=t)}return n}function o(t){t.x*=s,t.y=t.depth*a}var r=is,s=1,a=1,u=null;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(u=!1,s=+e[0],a=+e[1],t):u?null:[s,a]},t.nodeSize=function(e){return arguments.length?(u=!0,s=+e[0],a=+e[1],t):u?[s,a]:null},t},oy=function(t,e,n,i,o){for(var r,s=t.children,a=-1,u=s.length,l=t.value&&(o-n)/t.value;++a<u;)r=s[a],r.x0=e,r.x1=i,r.y0=n,r.y1=n+=r.value*l},ry=(1+Math.sqrt(5))/2,sy=function t(e){function n(t,n,i,o,r){hs(e,t,n,i,o,r)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(ry),ay=function(){function t(t){return t.x0=t.y0=0,t.x1=o,t.y1=r,t.eachBefore(e),s=[0],i&&t.eachBefore(X_),t}function e(t){var e=s[t.depth],i=t.x0+e,o=t.y0+e,r=t.x1-e,f=t.y1-e;r<i&&(i=r=(i+r)/2),f<o&&(o=f=(o+f)/2),t.x0=i,t.y0=o,t.x1=r,t.y1=f,t.children&&(e=s[t.depth+1]=a(t)/2,i+=h(t)-e,o+=u(t)-e,r-=l(t)-e,f-=c(t)-e,r<i&&(i=r=(i+r)/2),f<o&&(o=f=(o+f)/2),n(t,i,o,r,f))}var n=sy,i=!1,o=1,r=1,s=[0],a=Xr,u=Xr,l=Xr,c=Xr,h=Xr;return t.round=function(e){return arguments.length?(i=!!e,t):i},t.size=function(e){return arguments.length?(o=+e[0],r=+e[1],t):[o,r]},t.tile=function(e){return arguments.length?(n=Yr(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:V_(+e),t):a},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:V_(+e),t):u},t.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:V_(+e),t):l},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:V_(+e),t):c},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:V_(+e),t):h},t},uy=function(t,e,n,i,o){function r(t,e,n,i,o,s,a){if(t>=e-1){var l=u[t];return l.x0=i,l.y0=o,l.x1=s,l.y1=a,void 0}for(var h=c[t],f=n/2+h,d=t+1,p=e-1;d<p;){var m=d+p>>>1;c[m]<f?d=m+1:p=m}f-c[d-1]<c[d]-f&&t+1<d&&--d;var g=c[d]-h,v=n-g;if(s-i>a-o){var _=(i*v+s*g)/n;r(t,d,g,i,o,_,a),r(d,e,v,_,o,s,a)}else{var y=(o*v+a*g)/n;r(t,d,g,i,o,s,y),r(d,e,v,i,y,s,a)}}var s,a,u=t.children,l=u.length,c=new Array(l+1);for(c[0]=a=s=0;s<l;++s)c[s+1]=a+=u[s].value;r(0,l,t.value,e,n,i,o)},ly=function(t,e,n,i,o){(1&t.depth?oy:J_)(t,e,n,i,o)},cy=function t(e){function n(t,n,i,o,r){if((s=t._squarify)&&s.ratio===e)for(var s,a,u,l,c,h=-1,f=s.length,d=t.value;++h<f;){for(a=s[h],u=a.children,l=a.value=0,c=u.length;l<c;++l)a.value+=u[l].value;a.dice?J_(a,n,i,o,i+=(r-i)*a.value/d):oy(a,n,i,n+=(o-n)*a.value/d,r),d-=a.value}else t._squarify=s=hs(e,t,n,i,o,r),s.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(ry),hy=function(t){for(var e,n=-1,i=t.length,o=t[i-1],r=0;++n<i;)e=o,o=t[n],r+=e[1]*o[0]-e[0]*o[1];return r/2},fy=function(t){for(var e,n,i=-1,o=t.length,r=0,s=0,a=t[o-1],u=0;++i<o;)e=a,a=t[i],u+=n=e[0]*a[1]-a[0]*e[1],r+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return u*=3,[r/u,s/u]},dy=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])},py=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),o=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(fs),e=0;e<n;++e)o[e]=[i[e][0],-i[e][1]];var r=ds(i),s=ds(o),a=s[0]===r[0],u=s[s.length-1]===r[r.length-1],l=[];for(e=r.length-1;e>=0;--e)l.push(t[i[r[e]][2]]);for(e=+a;e<s.length-u;++e)l.push(t[i[s[e]][2]]);return l},my=function(t,e){for(var n,i,o=t.length,r=t[o-1],s=e[0],a=e[1],u=r[0],l=r[1],c=!1,h=0;h<o;++h)r=t[h],n=r[0],i=r[1],i>a!=l>a&&s<(u-n)*(a-i)/(l-i)+n&&(c=!c),u=n,l=i;return c},gy=function(t){for(var e,n,i=-1,o=t.length,r=t[o-1],s=r[0],a=r[1],u=0;++i<o;)e=s,n=a,r=t[i],s=r[0],a=r[1],e-=s,n-=a,u+=Math.sqrt(e*e+n*n);return u},vy=[].slice,_y={};ps.prototype=bs.prototype={constructor:ps,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=vy.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),ms(this),this},abort:function(){return null==this._error&&_s(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},ys(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,ys(this),this}};var yy=function(){return Math.random()},by=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(yy),xy=function t(e){function n(t,n){var i,o;return t=null==t?0:+t,n=null==n?1:+n,function(){var r;if(null!=i)r=i,i=null;else do{i=2*e()-1,r=2*e()-1,o=i*i+r*r}while(!o||o>1);return t+n*r*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(yy),wy=function t(e){function n(){var t=xy.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(yy),Ty=function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(yy),Cy=function t(e){function n(t){var n=Ty.source(e)(t);return function(){return n()/t}}return n.source=t,n}(yy),My=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(yy),Ly=function(t,e){function n(t){var e,n=l.status;if(!n&&ws(l)||n>=200&&n<300||304===n){if(r)try{e=r.call(i,l)}catch(t){return void a.call("error",i,t)}else e=l;a.call("load",i,e)}else a.call("error",i,t)}var i,o,r,s,a=m("beforesend","progress","load","error"),u=Zn(),l=new XMLHttpRequest,c=null,h=null,f=0;if("undefined"==typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=n:l.onreadystatechange=function(t){l.readyState>3&&n(t)},l.onprogress=function(t){a.call("progress",i,t)},i={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u.get(t):(null==e?u.remove(t):u.set(t,e+""),i)},mimeType:function(t){return arguments.length?(o=null==t?null:t+"",i):o},responseType:function(t){return arguments.length?(s=t,i):s},timeout:function(t){return arguments.length?(f=+t,i):f},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",i)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",i)},response:function(t){return r=t,i},get:function(t,e){return i.send("GET",t,e)},post:function(t,e){return i.send("POST",t,e)},send:function(e,n,r){return l.open(e,t,!0,c,h),null==o||u.has("accept")||u.set("accept",o+",*/*"),l.setRequestHeader&&u.each(function(t,e){l.setRequestHeader(e,t)}),null!=o&&l.overrideMimeType&&l.overrideMimeType(o),null!=s&&(l.responseType=s),f>0&&(l.timeout=f),null==r&&"function"==typeof n&&(r=n,n=null),null!=r&&1===r.length&&(r=xs(r)),null!=r&&i.on("error",r).on("load",function(t){r(null,t)}),a.call("beforesend",i,l),l.send(null==n?null:n),i},abort:function(){return l.abort(),i},on:function(){var t=a.on.apply(a,arguments);return t===a?i:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return i.get(e)}return i},ky=function(t,e){return function(n,i){var o=Ly(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return o.get(i)}return o}},Sy=ky("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),Py=ky("application/json",function(t){return JSON.parse(t.responseText)}),Ay=ky("text/plain",function(t){return t.responseText}),Ey=ky("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),Ny=function(t,e){return function(n,i,o){arguments.length<3&&(o=i,i=null);var r=Ly(n).mimeType(t);return r.row=function(t){return arguments.length?r.response(Ts(e,i=t)):i},r.row(i),o?r.get(o):r}},Iy=Ny("text/csv",Yp),zy=Ny("text/tab-separated-values",tm),Oy=Array.prototype,Dy=Oy.map,Ry=Oy.slice,jy={name:"implicit"},By=function(t){return function(){return t}},$y=function(t){return+t},Fy=[0,1],qy=function(e,n,i){var r,s=e[0],a=e[e.length-1],u=o(s,a,null==n?10:n);switch(i=di(null==i?",f":i),i.type){case"s":var l=Math.max(Math.abs(s),Math.abs(a));return null!=i.precision||isNaN(r=Um(u,l))||(i.precision=r),t.formatPrefix(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Hm(u,Math.max(Math.abs(s),Math.abs(a))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=Zm(u))||(i.precision=r-2*("%"===i.type))}return t.format(i)},Zy=function(t,e){t=t.slice();var n,i=0,o=t.length-1,r=t[i],s=t[o];return s<r&&(n=i,i=o,o=n,n=r,r=s,s=n),t[i]=e.floor(r),t[o]=e.ceil(s),t},Uy=new Date,Hy=new Date,Wy=Js(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Wy.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Js(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Wy:null};var Gy=Wy.range,Vy=6e4,Yy=6048e5,Xy=Js(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Jy=Xy.range,Qy=Js(function(t){t.setTime(Math.floor(t/Vy)*Vy)},function(t,e){t.setTime(+t+e*Vy)},function(t,e){return(e-t)/Vy},function(t){return t.getMinutes()}),Ky=Qy.range,tb=Js(function(t){var e=t.getTimezoneOffset()*Vy%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),eb=tb.range,nb=Js(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vy)/864e5},function(t){return t.getDate()-1}),ib=nb.range,ob=Qs(0),rb=Qs(1),sb=Qs(2),ab=Qs(3),ub=Qs(4),lb=Qs(5),cb=Qs(6),hb=ob.range,fb=rb.range,db=sb.range,pb=ab.range,mb=ub.range,gb=lb.range,vb=cb.range,_b=Js(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),yb=_b.range,bb=Js(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});bb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Js(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var xb=bb.range,wb=Js(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Vy)},function(t,e){return(e-t)/Vy},function(t){return t.getUTCMinutes()}),Tb=wb.range,Cb=Js(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),Mb=Cb.range,Lb=Js(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),kb=Lb.range,Sb=Ks(0),Pb=Ks(1),Ab=Ks(2),Eb=Ks(3),Nb=Ks(4),Ib=Ks(5),zb=Ks(6),Ob=Sb.range,Db=Pb.range,Rb=Ab.range,jb=Eb.range,Bb=Nb.range,$b=Ib.range,Fb=zb.range,qb=Js(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Zb=qb.range,Ub=Js(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Ub.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Js(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Hb,Wb=Ub.range,Gb={"-":"",_:" ",0:"0"},Vb=/^\s*\d+/,Yb=/^%/,Xb=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Ja({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Jb=Date.prototype.toISOString?Qa:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Qb=+new Date("2000-01-01T00:00:00.000Z")?Ka:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Kb=1e3,tx=60*Kb,ex=60*tx,nx=24*ex,ix=7*nx,ox=30*nx,rx=365*nx,sx=function(){return nu(bb,_b,ob,nb,tb,Qy,Xy,Wy,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},ax=function(){return nu(Ub,qb,Sb,Lb,Cb,wb,Xy,Wy,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},ux=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},lx=ux("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),cx=ux("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),hx=ux("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),fx=ux("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),dx=Yf(Vt(300,.5,0),Vt(-240,.5,1)),px=Yf(Vt(-100,.75,.35),Vt(80,1.5,.8)),mx=Yf(Vt(260,.75,.35),Vt(80,1.5,.8)),gx=Vt(),vx=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return gx.h=360*t-100,gx.s=1.5-1.5*e,gx.l=.8-.9*e,gx+""},_x=iu(ux("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),yx=iu(ux("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),bx=iu(ux("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),xx=iu(ux("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),wx=function(t){return function(){return t}},Tx=Math.abs,Cx=Math.atan2,Mx=Math.cos,Lx=Math.max,kx=Math.min,Sx=Math.sin,Px=Math.sqrt,Ax=1e-12,Ex=Math.PI,Nx=Ex/2,Ix=2*Ex,zx=function(){function t(){var t,l,c=+e.apply(this,arguments),h=+n.apply(this,arguments),f=r.apply(this,arguments)-Nx,d=s.apply(this,arguments)-Nx,p=Tx(d-f),m=d>f;if(u||(u=t=Dn()),h<c&&(l=h,h=c,c=l),h>Ax)if(p>Ix-Ax)u.moveTo(h*Mx(f),h*Sx(f)),u.arc(0,0,h,f,d,!m),c>Ax&&(u.moveTo(c*Mx(d),c*Sx(d)),u.arc(0,0,c,d,f,m));else{
var g,v,_=f,y=d,b=f,x=d,w=p,T=p,C=a.apply(this,arguments)/2,M=C>Ax&&(o?+o.apply(this,arguments):Px(c*c+h*h)),L=kx(Tx(h-c)/2,+i.apply(this,arguments)),k=L,S=L;if(M>Ax){var P=su(M/c*Sx(C)),A=su(M/h*Sx(C));(w-=2*P)>Ax?(P*=m?1:-1,b+=P,x-=P):(w=0,b=x=(f+d)/2),(T-=2*A)>Ax?(A*=m?1:-1,_+=A,y-=A):(T=0,_=y=(f+d)/2)}var E=h*Mx(_),N=h*Sx(_),I=c*Mx(x),z=c*Sx(x);if(L>Ax){var O=h*Mx(y),D=h*Sx(y),R=c*Mx(b),j=c*Sx(b);if(p<Ex){var B=w>Ax?fu(E,N,R,j,O,D,I,z):[I,z],$=E-B[0],F=N-B[1],q=O-B[0],Z=D-B[1],U=1/Sx(ru(($*q+F*Z)/(Px($*$+F*F)*Px(q*q+Z*Z)))/2),H=Px(B[0]*B[0]+B[1]*B[1]);k=kx(L,(c-H)/(U-1)),S=kx(L,(h-H)/(U+1))}}T>Ax?S>Ax?(g=du(R,j,E,N,h,S,m),v=du(O,D,I,z,h,S,m),u.moveTo(g.cx+g.x01,g.cy+g.y01),S<L?u.arc(g.cx,g.cy,S,Cx(g.y01,g.x01),Cx(v.y01,v.x01),!m):(u.arc(g.cx,g.cy,S,Cx(g.y01,g.x01),Cx(g.y11,g.x11),!m),u.arc(0,0,h,Cx(g.cy+g.y11,g.cx+g.x11),Cx(v.cy+v.y11,v.cx+v.x11),!m),u.arc(v.cx,v.cy,S,Cx(v.y11,v.x11),Cx(v.y01,v.x01),!m))):(u.moveTo(E,N),u.arc(0,0,h,_,y,!m)):u.moveTo(E,N),c>Ax&&w>Ax?k>Ax?(g=du(I,z,O,D,c,-k,m),v=du(E,N,R,j,c,-k,m),u.lineTo(g.cx+g.x01,g.cy+g.y01),k<L?u.arc(g.cx,g.cy,k,Cx(g.y01,g.x01),Cx(v.y01,v.x01),!m):(u.arc(g.cx,g.cy,k,Cx(g.y01,g.x01),Cx(g.y11,g.x11),!m),u.arc(0,0,c,Cx(g.cy+g.y11,g.cx+g.x11),Cx(v.cy+v.y11,v.cx+v.x11),m),u.arc(v.cx,v.cy,k,Cx(v.y11,v.x11),Cx(v.y01,v.x01),!m))):u.arc(0,0,c,x,b,m):u.lineTo(I,z)}else u.moveTo(0,0);if(u.closePath(),t)return u=null,t+""||null}var e=au,n=uu,i=wx(0),o=null,r=lu,s=cu,a=hu,u=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Ex/2;return[Mx(i)*t,Sx(i)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:wx(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:wx(+e),t):n},t.cornerRadius=function(e){return arguments.length?(i="function"==typeof e?e:wx(+e),t):i},t.padRadius=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:wx(+e),t):o},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:wx(+e),t):r},t.endAngle=function(e){return arguments.length?(s="function"==typeof e?e:wx(+e),t):s},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:wx(+e),t):a},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t};pu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Ox=function(t){return new pu(t)},Dx=function(){function t(t){var a,u,l,c=t.length,h=!1;for(null==o&&(s=r(l=Dn())),a=0;a<=c;++a)!(a<c&&i(u=t[a],a,t))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(u,a,t),+n(u,a,t));if(l)return s=null,l+""||null}var e=mu,n=gu,i=wx(!0),o=null,r=Ox,s=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:wx(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:wx(+e),t):n},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:wx(!!e),t):i},t.curve=function(e){return arguments.length?(r=e,null!=o&&(s=r(o)),t):r},t.context=function(e){return arguments.length?(null==e?o=s=null:s=r(o=e),t):o},t},Rx=function(){function t(t){var e,c,h,f,d,p=t.length,m=!1,g=new Array(p),v=new Array(p);for(null==a&&(l=u(d=Dn())),e=0;e<=p;++e){if(!(e<p&&s(f=t[e],e,t))===m)if(m=!m)c=e,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=e-1;h>=c;--h)l.point(g[h],v[h]);l.lineEnd(),l.areaEnd()}m&&(g[e]=+n(f,e,t),v[e]=+o(f,e,t),l.point(i?+i(f,e,t):g[e],r?+r(f,e,t):v[e]))}if(d)return l=null,d+""||null}function e(){return Dx().defined(s).curve(u).context(a)}var n=mu,i=null,o=wx(0),r=gu,s=wx(!0),a=null,u=Ox,l=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:wx(+e),i=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:wx(+e),t):n},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:wx(+e),t):i},t.y=function(e){return arguments.length?(o="function"==typeof e?e:wx(+e),r=null,t):o},t.y0=function(e){return arguments.length?(o="function"==typeof e?e:wx(+e),t):o},t.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:wx(+e),t):r},t.lineX0=t.lineY0=function(){return e().x(n).y(o)},t.lineY1=function(){return e().x(n).y(r)},t.lineX1=function(){return e().x(i).y(o)},t.defined=function(e){return arguments.length?(s="function"==typeof e?e:wx(!!e),t):s},t.curve=function(e){return arguments.length?(u=e,null!=a&&(l=u(a)),t):u},t.context=function(e){return arguments.length?(null==e?a=l=null:l=u(a=e),t):a},t},jx=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Bx=function(t){return t},$x=function(){function t(t){var a,u,l,c,h,f=t.length,d=0,p=new Array(f),m=new Array(f),g=+o.apply(this,arguments),v=Math.min(Ix,Math.max(-Ix,r.apply(this,arguments)-g)),_=Math.min(Math.abs(v)/f,s.apply(this,arguments)),y=_*(v<0?-1:1);for(a=0;a<f;++a)(h=m[p[a]=a]=+e(t[a],a,t))>0&&(d+=h);for(null!=n?p.sort(function(t,e){return n(m[t],m[e])}):null!=i&&p.sort(function(e,n){return i(t[e],t[n])}),a=0,l=d?(v-f*y)/d:0;a<f;++a,g=c)u=p[a],h=m[u],c=g+(h>0?h*l:0)+y,m[u]={data:t[u],index:a,value:h,startAngle:g,endAngle:c,padAngle:_};return m}var e=Bx,n=jx,i=null,o=wx(0),r=wx(Ix),s=wx(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:wx(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,i=null,t):n},t.sort=function(e){return arguments.length?(i=e,n=null,t):i},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:wx(+e),t):o},t.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:wx(+e),t):r},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:wx(+e),t):s},t},Fx=_u(Ox);vu.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var qx=function(){return yu(Dx().curve(Fx))},Zx=function(){var t=Rx().curve(Fx),e=t.curve,n=t.lineX0,i=t.lineX1,o=t.lineY0,r=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return yu(n())},delete t.lineX0,t.lineEndAngle=function(){return yu(i())},delete t.lineX1,t.lineInnerRadius=function(){return yu(o())},delete t.lineY0,t.lineOuterRadius=function(){return yu(r())},delete t.lineY1,t.curve=function(t){return arguments.length?e(_u(t)):e()._curve},t},Ux=Array.prototype.slice,Hx=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Wx={draw:function(t,e){var n=Math.sqrt(e/Ex);t.moveTo(n,0),t.arc(0,0,n,0,Ix)}},Gx={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Vx=Math.sqrt(1/3),Yx=2*Vx,Xx={draw:function(t,e){var n=Math.sqrt(e/Yx),i=n*Vx;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Jx=Math.sin(Ex/10)/Math.sin(7*Ex/10),Qx=Math.sin(Ix/10)*Jx,Kx=-Math.cos(Ix/10)*Jx,tw={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=Qx*n,o=Kx*n;t.moveTo(0,-n),t.lineTo(i,o);for(var r=1;r<5;++r){var s=Ix*r/5,a=Math.cos(s),u=Math.sin(s);t.lineTo(u*n,-a*n),t.lineTo(a*i-u*o,u*i+a*o)}t.closePath()}},ew={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},nw=Math.sqrt(3),iw={draw:function(t,e){var n=-Math.sqrt(e/(3*nw));t.moveTo(0,2*n),t.lineTo(-nw*n,-n),t.lineTo(nw*n,-n),t.closePath()}},ow=-.5,rw=Math.sqrt(3)/2,sw=1/Math.sqrt(12),aw=3*(sw/2+1),uw={draw:function(t,e){var n=Math.sqrt(e/aw),i=n/2,o=n*sw,r=i,s=n*sw+n,a=-r,u=s;t.moveTo(i,o),t.lineTo(r,s),t.lineTo(a,u),t.lineTo(ow*i-rw*o,rw*i+ow*o),t.lineTo(ow*r-rw*s,rw*r+ow*s),t.lineTo(ow*a-rw*u,rw*a+ow*u),t.lineTo(ow*i+rw*o,ow*o-rw*i),t.lineTo(ow*r+rw*s,ow*s-rw*r),t.lineTo(ow*a+rw*u,ow*u-rw*a),t.closePath()}},lw=[Wx,Gx,Xx,ew,tw,iw,uw],cw=function(){function t(){var t;if(i||(i=t=Dn()),e.apply(this,arguments).draw(i,+n.apply(this,arguments)),t)return i=null,t+""||null}var e=wx(Wx),n=wx(64),i=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:wx(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:wx(+e),t):n},t.context=function(e){return arguments.length?(i=null==e?null:e,t):i},t},hw=function(){};Au.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var fw=function(t){return new Au(t)};Eu.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Pu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var dw=function(t){return new Eu(t)};Nu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Pu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var pw=function(t){return new Nu(t)};Iu.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,o=t[0],r=e[0],s=t[n]-o,a=e[n]-r,u=-1;++u<=n;)i=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(o+i*s),this._beta*e[u]+(1-this._beta)*(r+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var mw=function t(e){function n(t){return 1===e?new Au(t):new Iu(t,e)}return n.beta=function(e){return t(+e)},n}(.85);Ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:zu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:zu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var gw=function t(e){function n(t){return new Ou(t,e)}return n.tension=function(e){return t(+e)},n}(0);Du.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:zu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vw=function t(e){function n(t){return new Du(t,e)}return n.tension=function(e){return t(+e)},n}(0);Ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var _w=function t(e){function n(t){return new Ru(t,e)}return n.tension=function(e){return t(+e)},n}(0);Bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ju(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var yw=function t(e){function n(t){return e?new Bu(t,e):new Ou(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);$u.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ju(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var bw=function t(e){function n(t){return e?new $u(t,e):new Du(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);Fu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ju(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var xw=function t(e){function n(t){return e?new Fu(t,e):new Ru(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);qu.prototype={areaStart:hw,areaEnd:hw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var ww=function(t){return new qu(t)};Gu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wu(this,this._t0,Hu(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Wu(this,Hu(this,n=Uu(this,t,e)),n);break;default:Wu(this,this._t0,n=Uu(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Vu.prototype=Object.create(Gu.prototype)).point=function(t,e){Gu.prototype.point.call(this,e,t)},Yu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,o,r){this._context.bezierCurveTo(e,t,i,n,r,o)}},Qu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Ku(t),o=Ku(e),r=0,s=1;s<n;++r,++s)this._context.bezierCurveTo(i[0][r],o[0][r],i[1][r],o[1][r],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Tw=function(t){return new Qu(t)};tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Cw=function(t){return new tl(t,.5)},Mw=function(t,e){if((o=t.length)>1)for(var n,i,o,r=1,s=t[e[0]],a=s.length;r<o;++r)for(i=s,s=t[e[r]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]},Lw=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},kw=function(){function t(t){var r,s,a=e.apply(this,arguments),u=t.length,l=a.length,c=new Array(l);for(r=0;r<l;++r){for(var h,f=a[r],d=c[r]=new Array(u),p=0;p<u;++p)d[p]=h=[0,+o(t[p],f,p,t)],h.data=t[p];d.key=f}for(r=0,s=n(c);r<l;++r)c[s[r]].index=r;return i(c,s),c}var e=wx([]),n=Lw,i=Mw,o=il;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:wx(Ux.call(n)),t):e},t.value=function(e){return arguments.length?(o="function"==typeof e?e:wx(+e),t):o},t.order=function(e){return arguments.length?(n=null==e?Lw:"function"==typeof e?e:wx(Ux.call(e)),t):n},t.offset=function(e){return arguments.length?(i=null==e?Mw:e,t):i},t},Sw=function(t,e){if((i=t.length)>0){for(var n,i,o,r=0,s=t[0].length;r<s;++r){for(o=n=0;n<i;++n)o+=t[n][r][1]||0;if(o)for(n=0;n<i;++n)t[n][r][1]/=o}Mw(t,e)}},Pw=function(t,e){if((a=t.length)>1)for(var n,i,o,r,s,a,u=0,l=t[e[0]].length;u<l;++u)for(r=s=0,n=0;n<a;++n)(o=(i=t[e[n]][u])[1]-i[0])>=0?(i[0]=r,i[1]=r+=o):o<0?(i[1]=s,i[0]=s+=o):i[0]=r},Aw=function(t,e){if((n=t.length)>0){for(var n,i=0,o=t[e[0]],r=o.length;i<r;++i){for(var s=0,a=0;s<n;++s)a+=t[s][i][1]||0;o[i][1]+=o[i][0]=-a/2}Mw(t,e)}},Ew=function(t,e){if((o=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,o,r=0,s=1;s<i;++s){for(var a=0,u=0,l=0;a<o;++a){for(var c=t[e[a]],h=c[s][1]||0,f=c[s-1][1]||0,d=(h-f)/2,p=0;p<a;++p){var m=t[e[p]];d+=(m[s][1]||0)-(m[s-1][1]||0)}u+=h,l+=d*h}n[s-1][1]+=n[s-1][0]=r,u&&(r-=l/u)}n[s-1][1]+=n[s-1][0]=r,Mw(t,e)}},Nw=function(t){var e=t.map(ol);return Lw(t).sort(function(t,n){return e[t]-e[n]})},Iw=function(t){return Nw(t).reverse()},zw=function(t){var e,n,i=t.length,o=t.map(ol),r=Lw(t).sort(function(t,e){return o[e]-o[t]}),s=0,a=0,u=[],l=[];for(e=0;e<i;++e)n=r[e],s<a?(s+=o[n],u.push(n)):(a+=o[n],l.push(n));return l.reverse().concat(u)},Ow=function(t){return Lw(t).reverse()},Dw=function(t){return function(){return t}};al.prototype={constructor:al,insert:function(t,e){var n,i,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=hl(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(o=i.R,o&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.R&&(ll(this,n),t=n,n=t.U),n.C=!1,i.C=!0,cl(this,i))):(o=i.L,o&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.L&&(cl(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ll(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,o=t.U,r=t.L,s=t.R;if(n=r?s?hl(s):r:s,o?o.L===t?o.L=n:o.R=n:this._=n,r&&s?(i=n.C,n.C=t.C,n.L=r,r.U=n,n!==s?(o=n.U,n.U=t.U,t=n.R,o.L=t,n.R=s,s.U=n):(n.U=o,o=n,t=n.R)):(i=t.C,t=n),t&&(t.U=o),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===o.L){if(e=o.R,e.C&&(e.C=!1,o.C=!0,ll(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,cl(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,ll(this,o),t=this._;break}}else if(e=o.L,e.C&&(e.C=!1,o.C=!0,cl(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ll(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,cl(this,o),t=this._;break}e.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}};var Rw,jw,Bw,$w,Fw,qw=[],Zw=[],Uw=1e-6,Hw=1e-12;Dl.prototype={constructor:Dl,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return bl(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(r=(o=n.halfedges).length)for(var o,r,s,a=n.site,u=-1,l=e[o[r-1]],c=l.left===a?l.right:l.left;++u<r;)s=c,l=e[o[u]],c=l.left===a?l.right:l.left,s&&c&&i<s.index&&i<c.index&&zl(a,s,c)<0&&t.push([a.data,s.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,o,r=this,s=r._found||0,a=r.cells.length;!(o=r.cells[s]);)if(++s>=a)return null;var u=t-o.site[0],l=e-o.site[1],c=u*u+l*l;do{o=r.cells[i=s],s=null,o.halfedges.forEach(function(n){var i=r.edges[n],a=i.left;if(a!==o.site&&a||(a=i.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return r._found=i,null==n||c<=n*n?o.site:null}};var Ww=function(){function t(t){return new Dl(t.map(function(i,o){var r=[Math.round(e(i,o,t)/Uw)*Uw,Math.round(n(i,o,t)/Uw)*Uw];return r.index=o,r.data=i,r}),i)}var e=rl,n=sl,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Dw(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Dw(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t},Gw=function(t){return function(){return t}};jl.prototype={constructor:jl,scale:function(t){return 1===t?this:new jl(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new jl(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vw=new jl(1,0,0);Bl.prototype=jl.prototype;var Yw=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},Xw=function(){function e(t){t.on("wheel.zoom",l).on("mousedown.zoom",c).on("dblclick.zoom",h).on("touchstart.zoom",f).on("touchmove.zoom",d).on("touchend.zoom touchcancel.zoom",p).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",Zl)}function n(t,e){return e=Math.max(b,Math.min(x,e)),e===t.k?t:new jl(e,t.x,t.y)}function i(t,e,n){var i=e[0]-n[0]*t.k,o=e[1]-n[1]*t.k;return i===t.x&&o===t.y?t:new jl(t.k,i,o)}function o(t,e){var n=t.invertX(e[0][0])-w,i=t.invertX(e[1][0])-T,o=t.invertY(e[0][1])-C,r=t.invertY(e[1][1])-M;return t.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r))}function r(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function s(t,e,n){t.on("start.zoom",function(){a(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){a(this,arguments).end()}).tween("zoom",function(){var t=this,i=arguments,o=a(t,i),s=y.apply(t,i),u=n||r(s),l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,i):e,f=k(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=l/e[2];t=new jl(n,u[0]-e[0]*n,u[1]-e[1]*n)}o.zoom(null,t)}})}function a(t,e){for(var n,i=0,o=S.length;i<o;++i)if((n=S[i]).that===t)return n;return new u(t,e)}function u(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=y.apply(t,e)}function l(){function e(){r.wheel=null,r.end()}if(_.apply(this,arguments)){var r=a(this,arguments),s=this.__zoom,u=Math.max(b,Math.min(x,s.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),l=Yc(this);if(r.wheel)r.mouse[0][0]===l[0]&&r.mouse[0][1]===l[1]||(r.mouse[1]=s.invert(r.mouse[0]=l)),clearTimeout(r.wheel);else{if(s.k===u)return;r.mouse=[l,s.invert(l)],_d(this),r.start()}Yw(),r.wheel=setTimeout(e,N),r.zoom("mouse",o(i(n(s,u),r.mouse[0],r.mouse[1]),r.extent))}}function c(){function e(){if(Yw(),!r.moved){var e=t.event.clientX-l,n=t.event.clientY-c;r.moved=e*e+n*n>I}r.zoom("mouse",o(i(r.that.__zoom,r.mouse[0]=Yc(r.that),r.mouse[1]),r.extent))}function n(){s.on("mousemove.zoom mouseup.zoom",null),yt(t.event.view,r.moved),Yw(),r.end()}if(!v&&_.apply(this,arguments)){var r=a(this,arguments),s=Eh(t.event.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",n,!0),u=Yc(this),l=t.event.clientX,c=t.event.clientY;Dh(t.event.view),$l(),r.mouse=[u,this.__zoom.invert(u)],_d(this),r.start()}}function h(){if(_.apply(this,arguments)){var r=this.__zoom,a=Yc(this),u=r.invert(a),l=r.k*(t.event.shiftKey?.5:2),c=o(i(n(r,l),a,u),y.apply(this,arguments));Yw(),L>0?Eh(this).transition().duration(L).call(s,c,a):Eh(this).call(e.transform,c)}}function f(){if(_.apply(this,arguments)){var e,n,i,o,r=a(this,arguments),s=t.event.changedTouches,u=s.length;for($l(),n=0;n<u;++n)i=s[n],o=Ih(this,s,i.identifier),o=[o,this.__zoom.invert(o),i.identifier],r.touch0?r.touch1||(r.touch1=o):(r.touch0=o,e=!0);if(g&&(g=clearTimeout(g),!r.touch1))return r.end(),void((o=Eh(this).on("dblclick.zoom"))&&o.apply(this,arguments));e&&(g=setTimeout(function(){g=null},E),_d(this),r.start())}}function d(){var e,r,s,u,l=a(this,arguments),c=t.event.changedTouches,h=c.length;for(Yw(),g&&(g=clearTimeout(g)),e=0;e<h;++e)r=c[e],s=Ih(this,c,r.identifier),l.touch0&&l.touch0[2]===r.identifier?l.touch0[0]=s:l.touch1&&l.touch1[2]===r.identifier&&(l.touch1[0]=s);if(r=l.that.__zoom,l.touch1){var f=l.touch0[0],d=l.touch0[1],p=l.touch1[0],m=l.touch1[1],v=(v=p[0]-f[0])*v+(v=p[1]-f[1])*v,_=(_=m[0]-d[0])*_+(_=m[1]-d[1])*_;r=n(r,Math.sqrt(v/_)),s=[(f[0]+p[0])/2,(f[1]+p[1])/2],u=[(d[0]+m[0])/2,(d[1]+m[1])/2]}else{if(!l.touch0)return;s=l.touch0[0],u=l.touch0[1]}l.zoom("touch",o(i(r,s,u),l.extent))}function p(){var e,n,i=a(this,arguments),o=t.event.changedTouches,r=o.length;for($l(),v&&clearTimeout(v),v=setTimeout(function(){v=null},E),e=0;e<r;++e)n=o[e],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}var g,v,_=Fl,y=ql,b=0,x=1/0,w=-x,T=x,C=w,M=T,L=250,k=Zf,S=[],A=m("start","zoom","end"),E=500,N=150,I=0;return e.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Zl),t!==n?s(t,e):n.interrupt().each(function(){a(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},e.scaleTo=function(t,s){e.transform(t,function(){var t=y.apply(this,arguments),e=this.__zoom,a=r(t),u=e.invert(a);return o(i(n(e,"function"==typeof s?s.apply(this,arguments):s),a,u),t)})},e.translateBy=function(t,n,i){e.transform(t,function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),y.apply(this,arguments))})},u.prototype={start:function(){return 1==++this.active&&(this.index=S.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(S.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){P(new Rl(e,t,this.that.__zoom),A.apply,A,[t,this.that,this.args])}},e.filter=function(t){
return arguments.length?(_="function"==typeof t?t:Gw(!!t),e):_},e.extent=function(t){return arguments.length?(y="function"==typeof t?t:Gw([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):y},e.scaleExtent=function(t){return arguments.length?(b=+t[0],x=+t[1],e):[b,x]},e.translateExtent=function(t){return arguments.length?(w=+t[0][0],T=+t[1][0],C=+t[0][1],M=+t[1][1],e):[[w,C],[T,M]]},e.duration=function(t){return arguments.length?(L=+t,e):L},e.interpolate=function(t){return arguments.length?(k=t,e):k},e.on=function(){var t=A.on.apply(A,arguments);return t===A?e:t},e.clickDistance=function(t){return arguments.length?(I=(t=+t)*t,e):Math.sqrt(I)},e};t.version="4.9.1",t.bisect=Gl,t.bisectRight=Gl,t.bisectLeft=Vl,t.ascending=Ul,t.bisector=Hl,t.cross=Xl,t.descending=Jl,t.deviation=tc,t.extent=ec,t.histogram=dc,t.thresholdFreedmanDiaconis=mc,t.thresholdScott=gc,t.thresholdSturges=fc,t.max=vc,t.mean=_c,t.median=yc,t.merge=bc,t.min=xc,t.pairs=Yl,t.permute=wc,t.quantile=pc,t.range=ac,t.scan=Tc,t.shuffle=Cc,t.sum=Mc,t.ticks=hc,t.tickIncrement=i,t.tickStep=o,t.transpose=Lc,t.variance=Kl,t.zip=kc,t.axisTop=h,t.axisRight=f,t.axisBottom=d,t.axisLeft=p,t.brush=Sp,t.brushX=En,t.brushY=Nn,t.brushSelection=An,t.chord=Op,t.ribbon=Fp,t.nest=qp,t.set=Yn,t.map=Zn,t.keys=Up,t.values=Hp,t.entries=Wp,t.color=Lt,t.rgb=At,t.hsl=zt,t.lab=jt,t.hcl=Ht,t.cubehelix=Vt,t.dispatch=m,t.drag=jh,t.dragDisable=Dh,t.dragEnable=yt,t.dsvFormat=Gp,t.csvParse=Yp,t.csvParseRows=Xp,t.csvFormat=Jp,t.csvFormatRows=Qp,t.tsvParse=tm,t.tsvParseRows=em,t.tsvFormat=nm,t.tsvFormatRows=im,t.easeLinear=on,t.easeQuad=an,t.easeQuadIn=rn,t.easeQuadOut=sn,t.easeQuadInOut=an,t.easeCubic=cn,t.easeCubicIn=un,t.easeCubicOut=ln,t.easeCubicInOut=cn,t.easePoly=Zd,t.easePolyIn=Fd,t.easePolyOut=qd,t.easePolyInOut=Zd,t.easeSin=dn,t.easeSinIn=hn,t.easeSinOut=fn,t.easeSinInOut=dn,t.easeExp=gn,t.easeExpIn=pn,t.easeExpOut=mn,t.easeExpInOut=gn,t.easeCircle=yn,t.easeCircleIn=vn,t.easeCircleOut=_n,t.easeCircleInOut=yn,t.easeBounce=xn,t.easeBounceIn=bn,t.easeBounceOut=xn,t.easeBounceInOut=wn,t.easeBack=op,t.easeBackIn=np,t.easeBackOut=ip,t.easeBackInOut=op,t.easeElastic=ap,t.easeElasticIn=sp,t.easeElasticOut=ap,t.easeElasticInOut=up,t.forceCenter=om,t.forceCollide=wm,t.forceLink=Tm,t.forceManyBody=km,t.forceSimulation=Lm,t.forceX=Sm,t.forceY=Pm,t.formatDefaultLocale=mi,t.formatLocale=qm,t.formatSpecifier=di,t.precisionFixed=Zm,t.precisionPrefix=Um,t.precisionRound=Hm,t.geoArea=Xg,t.geoBounds=Kg,t.geoCentroid=ev,t.geoCircle=gv,t.geoClipExtent=Tv,t.geoContains=zv,t.geoDistance=Ev,t.geoGraticule=Mo,t.geoGraticule10=Lo,t.geoInterpolate=Ov,t.geoLength=Sv,t.geoPath=u_,t.geoAlbers=__,t.geoAlbersUsa=y_,t.geoAzimuthalEqualArea=x_,t.geoAzimuthalEqualAreaRaw=b_,t.geoAzimuthalEquidistant=T_,t.geoAzimuthalEquidistantRaw=w_,t.geoConicConformal=M_,t.geoConicConformalRaw=pr,t.geoConicEqualArea=v_,t.geoConicEqualAreaRaw=ar,t.geoConicEquidistant=k_,t.geoConicEquidistantRaw=gr,t.geoEquirectangular=L_,t.geoEquirectangularRaw=mr,t.geoGnomonic=S_,t.geoGnomonicRaw=vr,t.geoIdentity=P_,t.geoProjection=ir,t.geoProjectionMutator=or,t.geoMercator=C_,t.geoMercatorRaw=hr,t.geoOrthographic=A_,t.geoOrthographicRaw=yr,t.geoStereographic=E_,t.geoStereographicRaw=br,t.geoTransverseMercator=N_,t.geoTransverseMercatorRaw=xr,t.geoRotation=mv,t.geoStream=Wg,t.geoTransform=f_,t.cluster=I_,t.hierarchy=Er,t.pack=Y_,t.packSiblings=G_,t.packEnclose=W_,t.partition=Q_,t.stratify=ny,t.tree=iy,t.treemap=ay,t.treemapBinary=uy,t.treemapDice=J_,t.treemapSlice=oy,t.treemapSliceDice=ly,t.treemapSquarify=sy,t.treemapResquarify=cy,t.interpolate=Of,t.interpolateArray=Sf,t.interpolateBasis=wf,t.interpolateBasisClosed=Tf,t.interpolateDate=Pf,t.interpolateNumber=Af,t.interpolateObject=Ef,t.interpolateRound=Df,t.interpolateString=zf,t.interpolateTransformCss=$f,t.interpolateTransformSvg=Ff,t.interpolateZoom=Zf,t.interpolateRgb=Mf,t.interpolateRgbBasis=Lf,t.interpolateRgbBasisClosed=kf,t.interpolateHsl=Uf,t.interpolateHslLong=Hf,t.interpolateLab=fe,t.interpolateHcl=Wf,t.interpolateHclLong=Gf,t.interpolateCubehelix=Vf,t.interpolateCubehelixLong=Yf,t.quantize=Xf,t.path=Dn,t.polygonArea=hy,t.polygonCentroid=fy;t.polygonHull=py,t.polygonContains=my,t.polygonLength=gy,t.quadtree=oi,t.queue=bs,t.randomUniform=by,t.randomNormal=xy,t.randomLogNormal=wy,t.randomBates=Cy,t.randomIrwinHall=Ty,t.randomExponential=My,t.request=Ly,t.html=Sy,t.json=Py,t.text=Ay,t.xml=Ey,t.csv=Iy,t.tsv=zy,t.scaleBand=Ms,t.scalePoint=ks,t.scaleIdentity=Rs,t.scaleLinear=Ds,t.scaleLog=Us,t.scaleOrdinal=Cs,t.scaleImplicit=jy,t.scalePow=Ws,t.scaleSqrt=Gs,t.scaleQuantile=Vs,t.scaleQuantize=Ys,t.scaleThreshold=Xs,t.scaleTime=sx,t.scaleUtc=ax,t.schemeCategory10=lx,t.schemeCategory20b=cx,t.schemeCategory20c=hx,t.schemeCategory20=fx,t.interpolateCubehelixDefault=dx,t.interpolateRainbow=vx,t.interpolateWarm=px,t.interpolateCool=mx,t.interpolateViridis=_x,t.interpolateMagma=yx,t.interpolateInferno=bx,t.interpolatePlasma=xx,t.scaleSequential=ou,t.creator=Bc,t.local=w,t.matcher=Uc,t.mouse=Yc,t.namespace=jc,t.namespaces=Rc,t.select=Eh,t.selectAll=Nh,t.selection=vt,t.selector=Xc,t.selectorAll=Qc,t.style=H,t.touch=Ih,t.touches=zh,t.window=vh,t.customEvent=P,t.arc=zx,t.area=Rx,t.line=Dx,t.pie=$x,t.radialArea=Zx,t.radialLine=qx,t.linkHorizontal=Lu,t.linkVertical=ku,t.linkRadial=Su,t.symbol=cw,t.symbols=lw,t.symbolCircle=Wx,t.symbolCross=Gx,t.symbolDiamond=Xx,t.symbolSquare=ew,t.symbolStar=tw,t.symbolTriangle=iw,t.symbolWye=uw,t.curveBasisClosed=dw,t.curveBasisOpen=pw,t.curveBasis=fw,t.curveBundle=mw,t.curveCardinalClosed=vw,t.curveCardinalOpen=_w,t.curveCardinal=gw,t.curveCatmullRomClosed=bw,t.curveCatmullRomOpen=xw,t.curveCatmullRom=yw,t.curveLinearClosed=ww,t.curveLinear=Ox,t.curveMonotoneX=Xu,t.curveMonotoneY=Ju,t.curveNatural=Tw,t.curveStep=Cw,t.curveStepAfter=nl,t.curveStepBefore=el,t.stack=kw,t.stackOffsetExpand=Sw,t.stackOffsetDiverging=Pw,t.stackOffsetNone=Mw,t.stackOffsetSilhouette=Aw,t.stackOffsetWiggle=Ew,t.stackOrderAscending=Nw,t.stackOrderDescending=Iw,t.stackOrderInsideOut=zw,t.stackOrderNone=Lw,t.stackOrderReverse=Ow,t.timeInterval=Js,t.timeMillisecond=Wy,t.timeMilliseconds=Gy,t.utcMillisecond=Wy,t.utcMilliseconds=Gy,t.timeSecond=Xy,t.timeSeconds=Jy,t.utcSecond=Xy,t.utcSeconds=Jy,t.timeMinute=Qy,t.timeMinutes=Ky,t.timeHour=tb,t.timeHours=eb,t.timeDay=nb,t.timeDays=ib,t.timeWeek=ob,t.timeWeeks=hb,t.timeSunday=ob,t.timeSundays=hb,t.timeMonday=rb,t.timeMondays=fb,t.timeTuesday=sb,t.timeTuesdays=db,t.timeWednesday=ab,t.timeWednesdays=pb,t.timeThursday=ub,t.timeThursdays=mb,t.timeFriday=lb,t.timeFridays=gb,t.timeSaturday=cb,t.timeSaturdays=vb,t.timeMonth=_b,t.timeMonths=yb,t.timeYear=bb,t.timeYears=xb,t.utcMinute=wb,t.utcMinutes=Tb,t.utcHour=Cb,t.utcHours=Mb,t.utcDay=Lb,t.utcDays=kb,t.utcWeek=Sb,t.utcWeeks=Ob,t.utcSunday=Sb,t.utcSundays=Ob,t.utcMonday=Pb,t.utcMondays=Db,t.utcTuesday=Ab,t.utcTuesdays=Rb,t.utcWednesday=Eb,t.utcWednesdays=jb,t.utcThursday=Nb,t.utcThursdays=Bb,t.utcFriday=Ib,t.utcFridays=$b,t.utcSaturday=zb,t.utcSaturdays=Fb,t.utcMonth=qb,t.utcMonths=Zb,t.utcYear=Ub,t.utcYears=Wb,t.timeFormatDefaultLocale=Ja,t.timeFormatLocale=ia,t.isoFormat=Jb,t.isoParse=Qb,t.now=me,t.timer=_e,t.timerFlush=ye,t.timeout=sd,t.interval=ad,t.transition=en,t.active=fp,t.interrupt=_d,t.voronoi=Ww,t.zoom=Xw,t.zoomTransform=Bl,t.zoomIdentity=Vw,Object.defineProperty(t,"__esModule",{value:!0})}),define("modules/d3-cluster-icon",["config","d3","jquery","leaflet"],function(t,e,n,i){var o=function(t){return t.__impl4cf1e782hg__&&(t=t.__impl4cf1e782hg__),void 0!==window.XMLSerializer?(new window.XMLSerializer).serializeToString(t):void 0!==t.xml?t.xml:""},r=function(t){if(!t.data||!t.valueFunc)return"";var n=t.data,i=t.valueFunc,r=t.outerRadius?t.outerRadius:28,s=t.innerRadius?t.innerRadius:r-10,a=t.strokeWidth?t.strokeWidth:1,u=t.pieFilling?t.pieFilling:function(){return""},l=t.pieCrust?t.pieCrust:function(){return""},c=t.pathTitleFunc?t.pathTitleFunc:function(){return""},h=t.pieClass?t.pieClass:"marker-cluster-pie",f=t.pieLabel?t.pieLabel:e.sum(n,i),d=t.pieLabelClass?t.pieLabelClass:"marker-cluster-pie-label",p=r+a,m=2*p,g=m,v=e.pie(),_=e.arc().innerRadius(s).outerRadius(r),y=document.createElementNS(e.namespaces.svg,"svg"),b=e.select(y).data([n]).attr("class",h).attr("width",m).attr("height",g);return b.selectAll("g.arc").data(v.value(i)).enter().append("svg:g").attr("class","arc").attr("transform","translate("+p+","+p+")").append("svg:path").attr("stroke",l).attr("fill",u).attr("stroke-width",a).attr("d",_).append("svg:title").text(c),b.append("text").attr("x",p).attr("y",p).attr("class",d).attr("text-anchor","middle").attr("dy",".3em").text(f),o(y)};return{defineClusterIcon:function(n){var o=n.getAllChildMarkers(),s=o.length,a=33-(s<10?12:s<100?8:s<1e3?4:0),u=2*(a+1),l=e.nest().key(function(t){return t.options.feature.properties.program_type}).entries(o,e.map),c=r({data:l,valueFunc:function(t){return t.values.length},strokeWidth:1,outerRadius:a,innerRadius:-1,pieClass:"cluster-pie",pieLabel:s,pieLabelClass:"marker-cluster-pie-label",pieFilling:function(e){return t.program_types.display.types[e.data.key].pie.filling},pieCrust:function(e){return t.program_types.display.types[e.data.key].pie.crust},pathTitleFunc:function(t){return t.data.key+" ("+t.data.values.length+" Program"+(1!==t.data.values.length?"s":"")+")"}});return new i.DivIcon({html:c,className:"marker-cluster",iconSize:new i.Point(u,u)})}}}),define("modules/programPopup",["config","jquery","leaflet"],function(t,e,n){function i(t){t.sort(function(t,e){return t.order-e.order})}function o(n){var o=[],r=[];return e.each(t.program_types.yes_no_fields,function(t,n){r.push(e.extend({fieldname:t},n))}),i(r),e.each(r,function(t,e){var i=n[e.fieldname];i&&"yes"==i.toLowerCase()&&o.push(e.label)}),o}function r(n){var o=[],r=!0,s=[];return e.each(t.target_groups.yes_no_na_fields,function(t,n){s.push(e.extend({fieldname:t},n))}),i(s),e.each(s,function(e,i){var s=n[i.fieldname],u=!1;s&&("yes"==s.toLowerCase()&&(u=i.label),r=r&&a(["na","n/a","yes"],s.toLowerCase())),u&&"tg_other"==i.fieldname&&n[t.target_groups.explain_other_field]&&(u=u+" <em>("+n[t.target_groups.explain_other_field]+")</em>"),u&&o.push(u)}),r?[t.target_groups.everyone_label]:o}function s(t){var e=t.continuing;return e&&a(["no","unknown"],e)&&t.why_not&&(e=e+" <em>("+t.why_not+")</em>"),e}function a(t,e){return!!e&&-1!=t.indexOf(e.toLowerCase())}function u(i){var u=["na","n/a"],l=[],c=[],h=i.options.feature.properties,f=o(h),d=r(h),p=s(h),m=h.community,g=h.contact_name,v=h.contact_email,_=h.contact_tel,y=h.contact_website,b=h.contact_org,x=h.program,w=h.host,T=h.location,C=h.description,M=h.time_frame,L=h.season,k=(h.cost,h.volunteer_run,h.duration),S=h.funding,P=h.partners,A=h.success_factors;l.push('<h2 class="popup-title">'+x+"</h2>"),l.push('<div class="popup-body">'),w&&!a(u,w)&&l.push('<p><i class="fa fa-user fa-fw"></i>'+w+"</p>"),m&&!a(u,m)&&l.push("<p><i class='fa fa-home fa-fw'></i>"+m+"</p>"),f.length>0&&(f.length<=3?l.push('<p><i class="fa fa-list fa-fw"></i><b>'+(f.length>1?t.labels.programtypes:t.labels.programtype)+":</b></p><ul><li>"+f.join("</li><li>")+"</li></ul>"):l.push('<p><i class="fa fa-list fa-fw"></i><b>'+(f.length>1?t.labels.programtypes:t.labels.programtype)+":</b></p><ul><li>"+f.slice(0,2).join("</li><li>")+'</li><li class="extra-hint"><a class="popup-info"> '+n.Util.template(t.labels.morelink,{n:f.length-2})+'</a></li><li class="extra-item">'+f.slice(2).join('</li><li class="extra-item">')+"</li></ul>")),d.length>0&&(d.length<=3?l.push('<p><i class="fa fa-users fa-fw"></i><b>'+(d.length,t.labels.targetgroups)+":</b></p><ul><li>"+d.join("</li><li>")+"</li></ul>"):l.push('<p><i class="fa fa-users fa-fw"></i><b>'+(d.length,t.labels.targetgroups)+":</b></p><ul><li>"+d.slice(0,2).join("</li><li>")+'</li><li class="extra-hint"><a class="popup-info"> '+n.Util.template(t.labels.morelink,{n:d.length-2})+'</a></li><li class="extra-item">'+d.slice(2).join('</li><li class="extra-item">')+"</li></ul>")),L&&!a(u,L)&&l.push('<p><i class="fa fa-calendar fa-fw"></i>'+L+"</p>"),M&&!a(u,M)&&l.push('<p><i class="fa fa-clock-o fa-fw"></i>'+M+"</p>"),C&&!a(u,C)&&l.push('<p class="description">'+C+"</p>"),p&&!a(u,p)&&c.push("<p><b>"+t.display_fields.continuing+":</b> "+p+"</p>"),k&&!a(u,k)&&c.push("<p><b>"+t.display_fields.duration+":</b> "+k+"</p>"),S&&!a(u,S)&&c.push("<p><b>"+t.display_fields.funding+":</b> "+S+"</p>"),P&&!a(u,P)&&c.push("<p><b>"+t.display_fields.partners+":</b> "+P+"</p>"),A&&!a(u,A)&&c.push("<p><b>"+t.display_fields.success_factors+":</b> "+A+"</p>");var E=[];return g&&!a(u,g)?(E.push("<p><b>"+g+"</b>"),b&&!a(u,b)&&E.push(", <em>"+b+"</em></p>")):b&&!a(u,b)&&E.push("<p><em>"+b+"</em></p>"),T&&!a(u,T)&&E.push('<p><i class="fa fa-location-arrow fa-fw"></i>'+T+"</p>"),_&&!a(u,_)&&E.push('<p><i class="fa fa-phone fa-fw"></i>'+_+"</p>"),v&&!a(u,v)&&E.push('<p><i class="fa fa-envelope fa-fw"></i><a href="mailto:'+v+'">'+v.split(";")[0]+"</a></p>"),y&&!a(u,y)&&E.push('<p><i class="fa fa-globe fa-fw"></i><a target="_blank" href="'+y+'">'+y+"</a></p>"),E.length>0&&c.push('<h3 class="contact-details">'+t.labels.contactdetails+"</h3>"),c=c.concat(E),c.length>0&&(c=l.slice(2).concat((c.length>E.length+1?['<h3 class="program-details">'+t.labels.additionaldetails+" </h3>"]:[]).concat(c)),l.push('<p class="popup-info"><a class="popup-info">'+t.labels.moreinfo+"</a></p>")),l.push("</div>"),e("#program-modal .modal-title").html(x),e("#program-modal .modal-body").html("<div>"+c.join("")+"</div>"),l.join("")}function l(t){d=t,h()}function c(t){d=!1}function h(t){if(d&&(t=t||d.popup._map)){var e=t.project(d.popup._latlng);e.y-=d.popup.getElement().clientHeight/2,t.panTo(t.unproject(e),{animate:!0})}}function f(t){e("#program-modal").modal("show")}var d=!1;return{bindPopup:u,programPopupOpened:l,programPopupClosed:c,showMorePopupInfo:f}}),define("modules/programFilters",["config","jquery","leaflet"],function(t,e,n){function i(t){t.sort(function(t,e){return t.order-e.order})}function o(n,o,r,c){s=o,a=r,u=c,programTypeFilters=[],programTypes=[],targetGroupFilters=[],targetGroups=[],communityFilters=[],communities=[],_lowercaseCommunities=[],e.each(n.fields,function(n,i){t.program_types.yes_no_fields[i.name]&&programTypes.push(e.extend({fieldname:i.name},t.program_types.yes_no_fields[i.name])),t.target_groups.yes_no_na_fields[i.name]&&targetGroups.push(e.extend({fieldname:i.name},t.target_groups.yes_no_na_fields[i.name]))}),e.each(o,function(e,n){var i=n.options.feature.properties[t.communities.name_field];i&&"na"!=i.toLowerCase()&&-1==_lowercaseCommunities.indexOf(i.toLowerCase())&&(_lowercaseCommunities.push(i.toLowerCase()),communities.push(i))}),i(programTypes),i(targetGroups),communities.sort();var h=e("ul.pt-filters");e("li",h).remove(),h.append('<li><a class="label reset">Reset</a></li>'),e.each(programTypes,function(t,n){var i=e(l);e("input",i).data("programType",n),e(".slider",i).css({"background-color":n.colour||"inherit"}),e(".label",i).html(n.label),h.append(i)});var f=e("ul.tg-filters");e("li",f).remove(),f.append('<li><a class="label reset">Reset</a></li>'),e.each(targetGroups,function(t,n){var i=e(l);e("input",i).data("targetGroup",n),e(".label",i).html(n.label),f.append(i)});var d=e("ul.com-filters");e("li",d).remove(),d.append('<li><a class="label reset">Reset</a></li>'),e.each(communities,function(t,n){var i=e(l);e("input",i).data("community",n),e(".label",i).html(n),d.append(i)})}function r(n){if(!n||e(n.target).hasClass("program-filter")){var i={},o={},r={},l=e("ul.pt-filters input"),c=l.filter(":checked"),h=e("ul.tg-filters input"),f=h.filter(":checked"),d=e("ul.com-filters input"),p=d.filter(":checked"),m=s;c.length>0&&c.length<l.length&&(c.each(function(){i[e(this).data().programType.fieldname]=!0}),m=e.grep(m,function(t){for(programTypeField in i){var e=t.options.feature.properties[programTypeField];if(e&&"yes"==e.toLowerCase())return!0}})),c.length>0?e("ul.pt-filters .reset").addClass("enabled"):e("ul.pt-filters .reset").removeClass("enabled"),f.length>0&&f.length<h.length&&(f.each(function(){o[e(this).data().targetGroup.fieldname]=!0}),m=e.grep(m,function(t){for(targetGroupField in o){var e=t.options.feature.properties[targetGroupField];if(e&&"yes"==e.toLowerCase())return!0}})),f.length>0?e("ul.tg-filters .reset").addClass("enabled"):e("ul.tg-filters .reset").removeClass("enabled"),p.length>0&&p.length<d.length&&(p.each(function(){r[e(this).data().community.toLowerCase()]=!0}),m=e.grep(m,function(e){var n=e.options.feature.properties[t.communities.name_field];if(n&&r[n.toLowerCase()])return!0})),p.length>0?e("ul.com-filters .reset").addClass("enabled"):e("ul.com-filters .reset").removeClass("enabled"),a.clearLayers(),a.addLayers(m),n&&e(n.target).closest("ul").hasClass("com-filters")&&u.fitBounds(a.getBounds(),{maxZoom:14}),e("#menu").css("opacity",.4).delay(300).fadeTo(300,1)}}var s,a,u,l='<li><span class="label"></span>  <label class="switch">    <input type="checkbox" class="program-filter">      <span class="slider round">    </span>  </label></li>';return e("#menu").on("change",".program-filter",r),e("#menu").on("click",".filter-menu .reset.enabled",function(t){e(t.target).closest(".filter-menu").find(".program-filter").prop("checked",!1),r()}),{loadFilters:o}}),function(t,e){"function"==typeof define&&define.amd?define("leaflet-default-extent",["leaflet"],e):"object"==typeof exports?module.exports=e(require("leaflet")):t.L.Control.DefaultExtent=e(t.L)}(this,function(t){return function(){"use strict";return t.Control.DefaultExtent=t.Control.extend({options:{position:"topleft",text:"Default Extent",title:"Zoom to default extent",className:"leaflet-control-defaultextent"},onAdd:function(t){return this._map=t,this._initLayout()},setCenter:function(t){return this._center=t,this},setZoom:function(t){return this._zoom=t,this},_initLayout:function(){var e=t.DomUtil.create("div","leaflet-bar "+this.options.className);return this._container=e,this._fullExtentButton=this._createExtentButton(e),t.DomEvent.disableClickPropagation(e),this._map.whenReady(this._whenReady,this),this._container},_createExtentButton:function(){var e=t.DomUtil.create("a",this.options.className+"-toggle",this._container);return e.href="#",e.innerHTML=this.options.text,e.title=this.options.title,t.DomEvent.on(e,"mousedown dblclick",t.DomEvent.stopPropagation).on(e,"click",t.DomEvent.stop).on(e,"click",this._zoomToDefault,this),e},_whenReady:function(){return this._center||(this._center=this._map.getCenter()),this._zoom||(this._zoom=this._map.getZoom()),this},_zoomToDefault:function(){this._map.setView(this._center,this._zoom)}}),t.Map.addInitHook(function(){this.options.defaultExtentControl&&this.addControl(new t.Control.DefaultExtent)}),t.control.defaultExtent=function(e){return new t.Control.DefaultExtent(e)},t.Control.DefaultExtent}()}),function(t,e){"function"==typeof define&&define.amd?define("mmenu",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.jquery_mmenu_all_js=e(t.jQuery)}(this,function(t){return function(t){function e(){t[n].glbl||(a={$wndw:t(window),$docu:t(document),$html:t("html"),$body:t("body")},o={},r={},s={},t.each([o,r,s],function(t,e){e.add=function(t){t=t.split(" ");for(var n=0,i=t.length;n<i;n++)e[t[n]]=e.mm(t[n])}}),o.mm=function(t){return"mm-"+t},o.add("wrapper menu panels panel nopanel highest opened subopened navbar hasnavbar title btn prev next listview nolistview inset vertical selected divider spacer hidden fullsubopen noanimation"),o.umm=function(t){return"mm-"==t.slice(0,3)&&(t=t.slice(3)),t},r.mm=function(t){return"mm-"+t},r.add("parent child"),s.mm=function(t){return t+".mm"},s.add("transitionend webkitTransitionEnd click scroll resize keydown mousedown mouseup touchstart touchmove touchend orientationchange"),t[n]._c=o,t[n]._d=r,t[n]._e=s,t[n].glbl=a)}var n="mmenu",i="6.1.0";if(!(t[n]&&t[n].version>i)){t[n]=function(t,e,n){return this.$menu=t,this._api=["bind","getInstance","initPanels","openPanel","closePanel","closeAllPanels","setSelected"],this.opts=e,this.conf=n,this.vars={},this.cbck={},this.mtch={},"function"==typeof this.___deprecated&&this.___deprecated(),this._initAddons(),this._initExtensions(),this._initMenu(),this._initPanels(),this._initOpened(),this._initAnchors(),this._initMatchMedia(),"function"==typeof this.___debug&&this.___debug(),this},t[n].version=i,t[n].addons={},t[n].uniqueId=0,t[n].defaults={extensions:[],initMenu:function(){},initPanels:function(){},navbar:{add:!0,title:"Menu",titleLink:"parent"},onClick:{setSelected:!0},slidingSubmenus:!0},t[n].configuration={classNames:{divider:"Divider",inset:"Inset",nolistview:"NoListview",nopanel:"NoPanel",panel:"Panel",selected:"Selected",spacer:"Spacer",vertical:"Vertical"},clone:!1,openingInterval:25,panelNodetype:"ul, ol, div",transitionDuration:400},t[n].prototype={getInstance:function(){return this},initPanels:function(t){this._initPanels(t)},openPanel:function(e,i){if(this.trigger("openPanel:before",e),e&&e.length&&(e.is("."+o.panel)||(e=e.closest("."+o.panel)),e.is("."+o.panel))){var s=this;if("boolean"!=typeof i&&(i=!0),e.hasClass(o.vertical))e.add(e.parents("."+o.vertical)).removeClass(o.hidden).parent("li").addClass(o.opened),this.openPanel(e.parents("."+o.panel).not("."+o.vertical).first()),this.trigger("openPanel:start",e),this.trigger("openPanel:finish",e);else{if(e.hasClass(o.opened))return;var a=this.$pnls.children("."+o.panel),u=a.filter("."+o.opened);if(!t[n].support.csstransitions)return u.addClass(o.hidden).removeClass(o.opened),e.removeClass(o.hidden).addClass(o.opened),this.trigger("openPanel:start",e),void this.trigger("openPanel:finish",e);a.not(e).removeClass(o.subopened);for(var l=e.data(r.parent);l;)l=l.closest("."+o.panel),l.is("."+o.vertical)||l.addClass(o.subopened),l=l.data(r.parent);a.removeClass(o.highest).not(u).not(e).addClass(o.hidden),e.removeClass(o.hidden);var c=function(){u.removeClass(o.opened),e.addClass(o.opened),e.hasClass(o.subopened)?(u.addClass(o.highest),e.removeClass(o.subopened)):(u.addClass(o.subopened),e.addClass(o.highest)),this.trigger("openPanel:start",e)},h=function(){u.removeClass(o.highest).addClass(o.hidden),e.removeClass(o.highest),this.trigger("openPanel:finish",e)};i&&!e.hasClass(o.noanimation)?setTimeout(function(){s.__transitionend(e,function(){h.call(s)},s.conf.transitionDuration),c.call(s)},this.conf.openingInterval):(c.call(this),h.call(this))}this.trigger("openPanel:after",e)}},closePanel:function(t){this.trigger("closePanel:before",t);var e=t.parent();e.hasClass(o.vertical)&&(e.removeClass(o.opened),this.trigger("closePanel",t)),this.trigger("closePanel:after",t)},closeAllPanels:function(){this.trigger("closeAllPanels:before"),this.$pnls.find("."+o.listview).children().removeClass(o.selected).filter("."+o.vertical).removeClass(o.opened);var t=this.$pnls.children("."+o.panel),e=t.first();this.$pnls.children("."+o.panel).not(e).removeClass(o.subopened).removeClass(o.opened).removeClass(o.highest).addClass(o.hidden),this.openPanel(e),this.trigger("closeAllPanels:after")},togglePanel:function(t){var e=t.parent();e.hasClass(o.vertical)&&this[e.hasClass(o.opened)?"closePanel":"openPanel"](t)},setSelected:function(t){this.trigger("setSelected:before",t),this.$menu.find("."+o.listview).children("."+o.selected).removeClass(o.selected),t.addClass(o.selected),this.trigger("setSelected:after",t)},bind:function(t,e){this.cbck[t]=this.cbck[t]||[],this.cbck[t].push(e)},trigger:function(){var t=this,e=Array.prototype.slice.call(arguments),n=e.shift();if(this.cbck[n])for(var i=0,o=this.cbck[n].length;i<o;i++)this.cbck[n][i].apply(t,e)},matchMedia:function(t,e,n){var i={yes:e,no:n};this.mtch[t]=this.mtch[t]||[],this.mtch[t].push(i)},_initAddons:function(){this.trigger("initAddons:before");var e;for(e in t[n].addons)t[n].addons[e].add.call(this),t[n].addons[e].add=function(){};for(e in t[n].addons)t[n].addons[e].setup.call(this);this.trigger("initAddons:after")},_initExtensions:function(){this.trigger("initExtensions:before");var t=this;this.opts.extensions.constructor===Array&&(this.opts.extensions={all:this.opts.extensions});for(var e in this.opts.extensions)this.opts.extensions[e]=this.opts.extensions[e].length?"mm-"+this.opts.extensions[e].join(" mm-"):"",this.opts.extensions[e]&&function(e){t.matchMedia(e,function(){this.$menu.addClass(this.opts.extensions[e])},function(){this.$menu.removeClass(this.opts.extensions[e])})}(e);this.trigger("initExtensions:after")},_initMenu:function(){this.trigger("initMenu:before"),this.conf.clone&&(this.$orig=this.$menu,this.$menu=this.$orig.clone(),this.$menu.add(this.$menu.find("[id]")).filter("[id]").each(function(){t(this).attr("id",o.mm(t(this).attr("id")))})),this.opts.initMenu.call(this,this.$menu,this.$orig),this.$menu.attr("id",this.$menu.attr("id")||this.__getUniqueId()),this.$pnls=t('<div class="'+o.panels+'" />').append(this.$menu.children(this.conf.panelNodetype)).prependTo(this.$menu);var e=[o.menu];this.opts.slidingSubmenus||e.push(o.vertical),this.$menu.addClass(e.join(" ")).parent().addClass(o.wrapper),this.trigger("initMenu:after")},_initPanels:function(e){this.trigger("initPanels:before",e),e=e||this.$pnls.children(this.conf.panelNodetype);var n=t(),i=this,r=function(e){e.filter(this.conf.panelNodetype).each(function(){var e=i._initPanel(t(this));if(e){i._initNavbar(e),i._initListview(e),n=n.add(e);var s=e.children("."+o.listview).children("li").children(i.conf.panelNodeType).add(e.children("."+i.conf.classNames.panel));s.length&&r.call(i,s)}})};r.call(this,e),this.opts.initPanels.call(this,n),this.trigger("initPanels:after",n)},_initPanel:function(t){if(this.trigger("initPanel:before",t),this.__refactorClass(t,this.conf.classNames.panel,"panel"),this.__refactorClass(t,this.conf.classNames.nopanel,"nopanel"),this.__refactorClass(t,this.conf.classNames.vertical,"vertical"),this.__refactorClass(t,this.conf.classNames.inset,"inset"),t.filter("."+o.inset).addClass(o.nopanel),t.hasClass(o.nopanel))return!1;if(t.hasClass(o.panel))return t;var e=t.hasClass(o.vertical)||!this.opts.slidingSubmenus;t.removeClass(o.vertical);var n=t.attr("id")||this.__getUniqueId();t.removeAttr("id"),t.is("ul, ol")&&(t.wrap("<div />"),t=t.parent()),t.addClass(o.panel+" "+o.hidden).attr("id",n);var i=t.parent("li");return e?t.add(i).addClass(o.vertical):t.appendTo(this.$pnls),i.length&&(i.data(r.child,t),t.data(r.parent,i)),this.trigger("initPanel:after",t),t},_initNavbar:function(e){if(this.trigger("initNavbar:before",e),!e.children("."+o.navbar).length){var i=e.data(r.parent),s=t('<div class="'+o.navbar+'" />'),a=t[n].i18n(this.opts.navbar.title),u="";if(i&&i.length){if(i.hasClass(o.vertical))return;if(i.parent().is("."+o.listview))var l=i.children("a, span").not("."+o.next);else var l=i.closest("."+o.panel).find('a[href="#'+e.attr("id")+'"]');l=l.first(),i=l.closest("."+o.panel);var c=i.attr("id");switch(a=l.text(),this.opts.navbar.titleLink){case"anchor":u=l.attr("href");break;case"parent":u="#"+c}s.append('<a class="'+o.btn+" "+o.prev+'" href="#'+c+'" />')}else if(!this.opts.navbar.title)return;this.opts.navbar.add&&e.addClass(o.hasnavbar),s.append('<a class="'+o.title+'"'+(u.length?' href="'+u+'"':"")+">"+a+"</a>").prependTo(e),this.trigger("initNavbar:after",e)}},_initListview:function(e){this.trigger("initListview:before",e);var n=this.__childAddBack(e,"ul, ol");this.__refactorClass(n,this.conf.classNames.nolistview,"nolistview"),n.filter("."+this.conf.classNames.inset).addClass(o.nolistview);var i=n.not("."+o.nolistview).addClass(o.listview).children();this.__refactorClass(i,this.conf.classNames.selected,"selected"),this.__refactorClass(i,this.conf.classNames.divider,"divider"),this.__refactorClass(i,this.conf.classNames.spacer,"spacer");var s=e.data(r.parent);if(s&&s.parent().is("."+o.listview)&&!s.children("."+o.next).length){var a=s.children("a, span").first(),u=t('<a class="'+o.next+'" href="#'+e.attr("id")+'" />').insertBefore(a);a.is("span")&&u.addClass(o.fullsubopen)}this.trigger("initListview:after",e)},_initOpened:function(){this.trigger("initOpened:before");var t=this.$pnls.find("."+o.listview).children("."+o.selected).removeClass(o.selected).last().addClass(o.selected),e=t.length?t.closest("."+o.panel):this.$pnls.children("."+o.panel).first();this.openPanel(e,!1),this.trigger("initOpened:after")},_initAnchors:function(){var e=this;a.$body.on(s.click+"-oncanvas","a[href]",function(i){var r=t(this),s=!1,a=e.$menu.find(r).length;for(var u in t[n].addons)if(t[n].addons[u].clickAnchor.call(e,r,a)){s=!0;break}var l=r.attr("href");if(!s&&a&&l.length>1&&"#"==l.slice(0,1))try{var c=t(l,e.$menu);c.is("."+o.panel)&&(s=!0,e[r.parent().hasClass(o.vertical)?"togglePanel":"openPanel"](c))}catch(t){}if(s&&i.preventDefault(),!s&&a&&r.is("."+o.listview+" > li > a")&&!r.is('[rel="external"]')&&!r.is('[target="_blank"]')){e.__valueOrFn(e.opts.onClick.setSelected,r)&&e.setSelected(t(i.target).parent());var h=e.__valueOrFn(e.opts.onClick.preventDefault,r,"#"==l.slice(0,1));h&&i.preventDefault(),e.__valueOrFn(e.opts.onClick.close,r,h)&&e.close()}})},_initMatchMedia:function(){var t=this;this._fireMatchMedia(),a.$wndw.on(s.resize,function(e){t._fireMatchMedia()})},_fireMatchMedia:function(){for(var t in this.mtch)for(var e=window.matchMedia&&window.matchMedia(t).matches?"yes":"no",n=0;n<this.mtch[t].length;n++)this.mtch[t][n][e].call(this)},_getOriginalMenuId:function(){var t=this.$menu.attr("id");return this.conf.clone&&t&&t.length&&(t=o.umm(t)),t},__api:function(){var e=this,n={};return t.each(this._api,function(t){var i=this;n[i]=function(){var t=e[i].apply(e,arguments);return void 0===t?n:t}}),n},__valueOrFn:function(t,e,n){return"function"==typeof t?t.call(e[0]):void 0===t&&void 0!==n?n:t},__refactorClass:function(t,e,n){return t.filter("."+e).removeClass(e).addClass(o[n])},__findAddBack:function(t,e){return t.find(e).add(t.filter(e))},__childAddBack:function(t,e){return t.children(e).add(t.filter(e))},__filterListItems:function(t){return t.not("."+o.divider).not("."+o.hidden)},__filterListItemAnchors:function(t){return this.__filterListItems(t).children("a").not("."+o.next)},__transitionend:function(t,e,n){var i=!1,o=function(n){void 0!==n&&n.target!=t[0]||(i||(t.unbind(s.transitionend),t.unbind(s.webkitTransitionEnd),e.call(t[0])),i=!0)};t.on(s.transitionend,o),t.on(s.webkitTransitionEnd,o),setTimeout(o,1.1*n)},__getUniqueId:function(){return o.mm(t[n].uniqueId++)}},t.fn[n]=function(i,o){e(),i=t.extend(!0,{},t[n].defaults,i),o=t.extend(!0,{},t[n].configuration,o);var r=t();return this.each(function(){var e=t(this);if(!e.data(n)){var s=new t[n](e,i,o);s.$menu.data(n,s.__api()),r=r.add(s.$menu)}}),r},t[n].i18n=function(){var e={};return function(n){switch(typeof n){case"object":return t.extend(e,n),e;case"string":return e[n]||n;case"undefined":default:return e}}}(),t[n].support={touch:"ontouchstart"in window||navigator.msMaxTouchPoints||!1,csstransitions:function(){return"undefined"==typeof Modernizr||void 0===Modernizr.csstransitions||Modernizr.csstransitions}(),csstransforms:function(){return"undefined"==typeof Modernizr||void 0===Modernizr.csstransforms||Modernizr.csstransforms}(),csstransforms3d:function(){return"undefined"==typeof Modernizr||void 0===Modernizr.csstransforms3d||Modernizr.csstransforms3d}()};var o,r,s,a}}(t),function(t){var e="mmenu",n="offCanvas";t[e].addons[n]={setup:function(){if(this.opts[n]){var o=this,r=this.opts[n],a=this.conf[n];s=t[e].glbl,this._api=t.merge(this._api,["open","close","setPage"]),"object"!=typeof r&&(r={}),"top"!=r.position&&"bottom"!=r.position||(r.zposition="front"),r=this.opts[n]=t.extend(!0,{},t[e].defaults[n],r),"string"!=typeof a.pageSelector&&(a.pageSelector="> "+a.pageNodetype),s.$allMenus=(s.$allMenus||t()).add(this.$menu),this.vars.opened=!1;var u=[i.offcanvas];"left"!=r.position&&u.push(i.mm(r.position)),"back"!=r.zposition&&u.push(i.mm(r.zposition)),t[e].support.csstransforms||u.push(i["no-csstransforms"]),t[e].support.csstransforms3d||u.push(i["no-csstransforms3d"]),
this.bind("initMenu:after",function(){this.setPage(s.$page),this._initBlocker(),this["_initWindow_"+n](),this.$menu.addClass(u.join(" ")).parent("."+i.wrapper).removeClass(i.wrapper),this.$menu[a.menuInsertMethod](a.menuInsertSelector);var t=window.location.hash;if(t){var e=this._getOriginalMenuId();e&&e==t.slice(1)&&this.open()}}),this.bind("initExtensions:after",function(){for(var t=[i.mm("widescreen"),i.mm("iconbar")],e=0;e<t.length;e++)for(var n in this.opts.extensions)if(this.opts.extensions[n].indexOf(t[e])>-1){!function(e,n){o.matchMedia(e,function(){s.$html.addClass(t[n])},function(){s.$html.removeClass(t[n])})}(n,e);break}}),this.bind("open:start:sr-aria",function(){this.__sr_aria(this.$menu,"hidden",!1)}),this.bind("close:finish:sr-aria",function(){this.__sr_aria(this.$menu,"hidden",!0)}),this.bind("initMenu:after:sr-aria",function(){this.__sr_aria(this.$menu,"hidden",!0)})}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("offcanvas slideout blocking modal background opening blocker page no-csstransforms3d"),o.add("style")},clickAnchor:function(t,e){var o=this;if(this.opts[n]){var r=this._getOriginalMenuId();if(r&&t.is('[href="#'+r+'"]')){if(e)return!0;var a=t.closest("."+i.menu);if(a.length){var u=a.data("mmenu");if(u&&u.close)return u.close(),o.__transitionend(a,function(){o.open()},o.conf.transitionDuration),!0}return this.open(),!0}if(s.$page)return r=s.$page.first().attr("id"),r&&t.is('[href="#'+r+'"]')?(this.close(),!0):void 0}}},t[e].defaults[n]={position:"left",zposition:"back",blockUI:!0,moveBackground:!0},t[e].configuration[n]={pageNodetype:"div",pageSelector:null,noPageSelector:[],wrapPageIfNeeded:!0,menuInsertMethod:"prependTo",menuInsertSelector:"body"},t[e].prototype.open=function(){if(this.trigger("open:before"),!this.vars.opened){var t=this;this._openSetup(),setTimeout(function(){t._openFinish()},this.conf.openingInterval),this.trigger("open:after")}},t[e].prototype._openSetup=function(){var e=this,a=this.opts[n];this.closeAllOthers(),s.$page.each(function(){t(this).data(o.style,t(this).attr("style")||"")}),s.$wndw.trigger(r.resize+"-"+n,[!0]);var u=[i.opened];a.blockUI&&u.push(i.blocking),"modal"==a.blockUI&&u.push(i.modal),a.moveBackground&&u.push(i.background),"left"!=a.position&&u.push(i.mm(this.opts[n].position)),"back"!=a.zposition&&u.push(i.mm(this.opts[n].zposition)),s.$html.addClass(u.join(" ")),setTimeout(function(){e.vars.opened=!0},this.conf.openingInterval),this.$menu.addClass(i.opened)},t[e].prototype._openFinish=function(){var t=this;this.__transitionend(s.$page.first(),function(){t.trigger("open:finish")},this.conf.transitionDuration),this.trigger("open:start"),s.$html.addClass(i.opening)},t[e].prototype.close=function(){if(this.trigger("close:before"),this.vars.opened){var e=this;this.__transitionend(s.$page.first(),function(){e.$menu.removeClass(i.opened);var r=[i.opened,i.blocking,i.modal,i.background,i.mm(e.opts[n].position),i.mm(e.opts[n].zposition)];s.$html.removeClass(r.join(" ")),s.$page.each(function(){t(this).attr("style",t(this).data(o.style))}),e.vars.opened=!1,e.trigger("close:finish")},this.conf.transitionDuration),this.trigger("close:start"),s.$html.removeClass(i.opening),this.trigger("close:after")}},t[e].prototype.closeAllOthers=function(){s.$allMenus.not(this.$menu).each(function(){var n=t(this).data(e);n&&n.close&&n.close()})},t[e].prototype.setPage=function(e){this.trigger("setPage:before",e);var o=this,r=this.conf[n];e&&e.length||(e=s.$body.find(r.pageSelector),r.noPageSelector.length&&(e=e.not(r.noPageSelector.join(", "))),e.length>1&&r.wrapPageIfNeeded&&(e=e.wrapAll("<"+this.conf[n].pageNodetype+" />").parent())),e.each(function(){t(this).attr("id",t(this).attr("id")||o.__getUniqueId())}),e.addClass(i.page+" "+i.slideout),s.$page=e,this.trigger("setPage:after",e)},t[e].prototype["_initWindow_"+n]=function(){s.$wndw.off(r.keydown+"-"+n).on(r.keydown+"-"+n,function(t){if(s.$html.hasClass(i.opened)&&9==t.keyCode)return t.preventDefault(),!1});var t=0;s.$wndw.off(r.resize+"-"+n).on(r.resize+"-"+n,function(e,n){if(1==s.$page.length&&(n||s.$html.hasClass(i.opened))){var o=s.$wndw.height();(n||o!=t)&&(t=o,s.$page.css("minHeight",o))}})},t[e].prototype._initBlocker=function(){var e=this;this.opts[n].blockUI&&(s.$blck||(s.$blck=t('<div id="'+i.blocker+'" class="'+i.slideout+'" />')),s.$blck.appendTo(s.$body).off(r.touchstart+"-"+n+" "+r.touchmove+"-"+n).on(r.touchstart+"-"+n+" "+r.touchmove+"-"+n,function(t){t.preventDefault(),t.stopPropagation(),s.$blck.trigger(r.mousedown+"-"+n)}).off(r.mousedown+"-"+n).on(r.mousedown+"-"+n,function(t){t.preventDefault(),s.$html.hasClass(i.modal)||(e.closeAllOthers(),e.close())}))};var i,o,r,s}(t),function(t){var e="mmenu",n="scrollBugFix";t[e].addons[n]={setup:function(){var o=this.opts[n];this.conf[n],s=t[e].glbl,t[e].support.touch&&this.opts.offCanvas&&this.opts.offCanvas.blockUI&&("boolean"==typeof o&&(o={fix:o}),"object"!=typeof o&&(o={}),o=this.opts[n]=t.extend(!0,{},t[e].defaults[n],o),o.fix&&(this.bind("open:start",function(){this.$pnls.children("."+i.opened).scrollTop(0)}),this.bind("initMenu:after",function(){this["_initWindow_"+n]()})))},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e},clickAnchor:function(t,e){}},t[e].defaults[n]={fix:!0},t[e].prototype["_initWindow_"+n]=function(){var e=this;s.$docu.off(r.touchmove+"-"+n).on(r.touchmove+"-"+n,function(t){s.$html.hasClass(i.opened)&&t.preventDefault()});var o=!1;s.$body.off(r.touchstart+"-"+n).on(r.touchstart+"-"+n,"."+i.panels+"> ."+i.opened,function(t){s.$html.hasClass(i.opened)&&(o||(o=!0,0===t.currentTarget.scrollTop?t.currentTarget.scrollTop=1:t.currentTarget.scrollHeight===t.currentTarget.scrollTop+t.currentTarget.offsetHeight&&(t.currentTarget.scrollTop-=1),o=!1))}).off(r.touchmove+"-"+n).on(r.touchmove+"-"+n,"."+i.panels+"> ."+i.opened,function(e){s.$html.hasClass(i.opened)&&t(this)[0].scrollHeight>t(this).innerHeight()&&e.stopPropagation()}),s.$wndw.off(r.orientationchange+"-"+n).on(r.orientationchange+"-"+n,function(){e.$pnls.children("."+i.opened).scrollTop(0).css({"-webkit-overflow-scrolling":"auto"}).css({"-webkit-overflow-scrolling":"touch"})})};var i,o,r,s}(t),function(t){var e="mmenu",n="screenReader";t[e].addons[n]={setup:function(){var r=this,a=this.opts[n],u=this.conf[n];s=t[e].glbl,"boolean"==typeof a&&(a={aria:a,text:a}),"object"!=typeof a&&(a={}),a=this.opts[n]=t.extend(!0,{},t[e].defaults[n],a),a.aria&&(this.bind("initAddons:after",function(){this.bind("initMenu:after",function(){this.trigger("initMenu:after:sr-aria")}),this.bind("initNavbar:after",function(){this.trigger("initNavbar:after:sr-aria",arguments[0])}),this.bind("openPanel:start",function(){this.trigger("openPanel:start:sr-aria",arguments[0])}),this.bind("close:start",function(){this.trigger("close:start:sr-aria")}),this.bind("close:finish",function(){this.trigger("close:finish:sr-aria")}),this.bind("open:start",function(){this.trigger("open:start:sr-aria")}),this.bind("open:finish",function(){this.trigger("open:finish:sr-aria")})}),this.bind("updateListview",function(){this.$pnls.find("."+i.listview).children().each(function(){r.__sr_aria(t(this),"hidden",t(this).is("."+i.hidden))})}),this.bind("openPanel:start",function(t){var e=this.$menu.find("."+i.panel).not(t).not(t.parents("."+i.panel)),n=t.add(t.find("."+i.vertical+"."+i.opened).children("."+i.panel));this.__sr_aria(e,"hidden",!0),this.__sr_aria(n,"hidden",!1)}),this.bind("closePanel",function(t){this.__sr_aria(t,"hidden",!0)}),this.bind("initPanels:after",function(e){var n=e.find("."+i.prev+", ."+i.next).each(function(){r.__sr_aria(t(this),"owns",t(this).attr("href").replace("#",""))});this.__sr_aria(n,"haspopup",!0)}),this.bind("initNavbar:after",function(t){var e=t.children("."+i.navbar);this.__sr_aria(e,"hidden",!t.hasClass(i.hasnavbar))}),a.text&&(this.bind("initlistview:after",function(t){var e=t.find("."+i.listview).find("."+i.fullsubopen).parent().children("span");this.__sr_aria(e,"hidden",!0)}),"parent"==this.opts.navbar.titleLink&&this.bind("initNavbar:after",function(t){var e=t.children("."+i.navbar),n=!!e.children("."+i.prev).length;this.__sr_aria(e.children("."+i.title),"hidden",n)}))),a.text&&(this.bind("initAddons:after",function(){this.bind("setPage:after",function(){this.trigger("setPage:after:sr-text",arguments[0])})}),this.bind("initNavbar:after",function(n){var o=n.children("."+i.navbar),r=o.children("."+i.title).text(),s=t[e].i18n(u.text.closeSubmenu);r&&(s+=" ("+r+")"),o.children("."+i.prev).html(this.__sr_text(s))}),this.bind("initListview:after",function(n){var s=n.data(o.parent);if(s&&s.length){var a=s.children("."+i.next),l=a.nextAll("span, a").first().text(),c=t[e].i18n(u.text[a.parent().is("."+i.vertical)?"toggleSubmenu":"openSubmenu"]);l&&(c+=" ("+l+")"),a.html(r.__sr_text(c))}}))},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("sronly")},clickAnchor:function(t,e){}},t[e].defaults[n]={aria:!0,text:!0},t[e].configuration[n]={text:{closeMenu:"Close menu",closeSubmenu:"Close submenu",openSubmenu:"Open submenu",toggleSubmenu:"Toggle submenu"}},t[e].prototype.__sr_aria=function(t,e,n){t.prop("aria-"+e,n)[n?"attr":"removeAttr"]("aria-"+e,n)},t[e].prototype.__sr_text=function(t){return'<span class="'+i.sronly+'">'+t+"</span>"};var i,o,r,s}(t),function(t){var e="mmenu",n="autoHeight";t[e].addons[n]={setup:function(){var o=this.opts[n];if(this.conf[n],s=t[e].glbl,"boolean"==typeof o&&o&&(o={height:"auto"}),"string"==typeof o&&(o={height:o}),"object"!=typeof o&&(o={}),o=this.opts[n]=t.extend(!0,{},t[e].defaults[n],o),"auto"==o.height||"highest"==o.height){this.bind("initMenu:after",function(){this.$menu.addClass(i.autoheight)});var r=function(e){if(!this.opts.offCanvas||this.vars.opened){var n=Math.max(parseInt(this.$pnls.css("top"),10),0)||0,r=Math.max(parseInt(this.$pnls.css("bottom"),10),0)||0,s=0;this.$menu.addClass(i.measureheight),"auto"==o.height?(e=e||this.$pnls.children("."+i.opened),e.is("."+i.vertical)&&(e=e.parents("."+i.panel).not("."+i.vertical)),e.length||(e=this.$pnls.children("."+i.panel)),s=e.first().outerHeight()):"highest"==o.height&&this.$pnls.children().each(function(){var e=t(this);e.is("."+i.vertical)&&(e=e.parents("."+i.panel).not("."+i.vertical).first()),s=Math.max(s,e.outerHeight())}),this.$menu.height(s+n+r).removeClass(i.measureheight)}};this.opts.offCanvas&&this.bind("open:start",r),"highest"==o.height&&this.bind("initPanels:after",r),"auto"==o.height&&(this.bind("updateListview",r),this.bind("openPanel:start",r),this.bind("closePanel",r))}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("autoheight measureheight"),r.add("resize")},clickAnchor:function(t,e){}},t[e].defaults[n]={height:"default"};var i,o,r,s}(t),function(t){var e="mmenu",n="backButton";t[e].addons[n]={setup:function(){if(this.opts.offCanvas){var o=this,r=this.opts[n];if(this.conf[n],s=t[e].glbl,"boolean"==typeof r&&(r={close:r}),"object"!=typeof r&&(r={}),r=t.extend(!0,{},t[e].defaults[n],r),r.close){var a="#"+o.$menu.attr("id");this.bind("open:finish",function(t){location.hash!=a&&history.pushState(null,document.title,a)}),t(window).on("popstate",function(t){s.$html.hasClass(i.opened)?(t.stopPropagation(),o.close()):location.hash==a&&(t.stopPropagation(),o.open())})}}},add:function(){return window.history&&window.history.pushState?(i=t[e]._c,o=t[e]._d,void(r=t[e]._e)):void(t[e].addons[n].setup=function(){})},clickAnchor:function(t,e){}},t[e].defaults[n]={close:!1};var i,o,r,s}(t),function(t){var e="mmenu",n="columns";t[e].addons[n]={setup:function(){var o=this.opts[n];if(this.conf[n],s=t[e].glbl,"boolean"==typeof o&&(o={add:o}),"number"==typeof o&&(o={add:!0,visible:o}),"object"!=typeof o&&(o={}),"number"==typeof o.visible&&(o.visible={min:o.visible,max:o.visible}),o=this.opts[n]=t.extend(!0,{},t[e].defaults[n],o),o.add){o.visible.min=Math.max(1,Math.min(6,o.visible.min)),o.visible.max=Math.max(o.visible.min,Math.min(6,o.visible.max));for(var r=this.opts.offCanvas?this.$menu.add(s.$html):this.$menu,a="",u=0;u<=o.visible.max;u++)a+=" "+i.columns+"-"+u;a.length&&(a=a.slice(1));var l=function(t){var e=this.$pnls.children("."+i.subopened).length;t&&!t.hasClass(i.subopened)&&e++,e=Math.min(o.visible.max,Math.max(o.visible.min,e)),r.removeClass(a).addClass(i.columns+"-"+e)},c=function(){r.removeClass(a)},h=function(e){this.$pnls.children("."+i.panel).removeClass(a).filter("."+i.subopened).add(e).slice(-o.visible.max).each(function(e){t(this).addClass(i.columns+"-"+e)})};this.bind("initMenu:after",function(){this.$menu.addClass(i.columns)}),this.bind("initPanels:after",function(t){h.call(this,this.$pnls.children("."+i.opened))}),this.bind("open:start",l),this.bind("openPanel:start",l),this.bind("openPanel:start",h),this.bind("close:finish",c),this.opts.offCanvas||l.call(this)}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("columns")},clickAnchor:function(e,o){if(!this.opts[n].add)return!1;if(o){var r=e.attr("href");if(r.length>1&&"#"==r.slice(0,1))try{if(t(r,this.$menu).is("."+i.panel))for(var s=parseInt(e.closest("."+i.panel).attr("class").split(i.columns+"-")[1].split(" ")[0],10)+1;s>0;){var a=this.$pnls.children("."+i.columns+"-"+s);if(!a.length){s=-1;break}s++,a.removeClass(i.subopened).removeClass(i.opened).removeClass(i.highest).addClass(i.hidden)}}catch(t){}}}},t[e].defaults[n]={add:!1,visible:{min:1,max:3}};var i,o,r,s}(t),function(t){var e="mmenu",n="counters";t[e].addons[n]={setup:function(){var r=this,a=this.opts[n];if(this.conf[n],s=t[e].glbl,"boolean"==typeof a&&(a={add:a,update:a}),"object"!=typeof a&&(a={}),a=this.opts[n]=t.extend(!0,{},t[e].defaults[n],a),this.bind("initListview:after",function(e){this.__refactorClass(t("em",e),this.conf.classNames[n].counter,"counter")}),a.add&&this.bind("initListview:after",function(e){var n;switch(a.addTo){case"panels":n=e;break;default:n=e.filter(a.addTo)}n.each(function(){var e=t(this).data(o.parent);e&&(e.children("em."+i.counter).length||e.prepend(t('<em class="'+i.counter+'" />')))})}),a.update){var u=function(e){e=e||this.$pnls.children("."+i.panel),e.each(function(){var e=t(this),n=e.data(o.parent);if(n){var s=n.children("em."+i.counter);s.length&&(e=e.children("."+i.listview),e.length&&s.html(r.__filterListItems(e.children()).length))}})};this.bind("initListview:after",u),this.bind("updateListview",u)}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("counter search noresultsmsg")},clickAnchor:function(t,e){}},t[e].defaults[n]={add:!1,addTo:"panels",count:!1},t[e].configuration.classNames[n]={counter:"Counter"};var i,o,r,s}(t),function(t){var e="mmenu",n="dividers";t[e].addons[n]={setup:function(){var o=this,a=this.opts[n];if(this.conf[n],s=t[e].glbl,"boolean"==typeof a&&(a={add:a,fixed:a}),"object"!=typeof a&&(a={}),a=this.opts[n]=t.extend(!0,{},t[e].defaults[n],a),this.bind("initListview:after",function(t){this.__refactorClass(t.find("li"),this.conf.classNames[n].collapsed,"collapsed")}),a.add&&this.bind("initListview:after",function(e){var n;switch(a.addTo){case"panels":n=e;break;default:n=e.filter(a.addTo)}n.length&&n.find("."+i.listview).find("."+i.divider).remove().end().each(function(){var e="";o.__filterListItems(t(this).children()).each(function(){var n=t.trim(t(this).children("a, span").text()).slice(0,1).toLowerCase();n!=e&&n.length&&(e=n,t('<li class="'+i.divider+'">'+n+"</li>").insertBefore(this))})})}),a.collapse&&this.bind("initListview:after",function(e){e.find("."+i.divider).each(function(){var e=t(this);e.nextUntil("."+i.divider,"."+i.collapsed).length&&(e.children("."+i.next).length||(e.wrapInner("<span />"),e.prepend('<a href="#" class="'+i.next+" "+i.fullsubopen+'" />')))})}),a.fixed){this.bind("initPanels:after",function(){void 0===this.$fixeddivider&&(this.$fixeddivider=t('<ul class="'+i.listview+" "+i.fixeddivider+'"><li class="'+i.divider+'"></li></ul>').prependTo(this.$pnls).children())});var u=function(e){if(e=e||this.$pnls.children("."+i.opened),!e.is(":hidden")){var n=e.children("."+i.listview).children("."+i.divider).not("."+i.hidden),o=e.scrollTop()||0,r="";n.each(function(){t(this).position().top+o<o+1&&(r=t(this).text())}),this.$fixeddivider.text(r),this.$pnls[r.length?"addClass":"removeClass"](i.hasdividers)}};this.bind("open:start",u),this.bind("openPanel:start",u),this.bind("updateListview",u),this.bind("initPanel:after",function(t){t.off(r.scroll+"-"+n+" "+r.touchmove+"-"+n).on(r.scroll+"-"+n+" "+r.touchmove+"-"+n,function(e){u.call(o,t)})})}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("collapsed uncollapsed fixeddivider hasdividers"),r.add("scroll")},clickAnchor:function(t,e){if(this.opts[n].collapse&&e){var o=t.parent();if(o.is("."+i.divider)){var r=o.nextUntil("."+i.divider,"."+i.collapsed);return o.toggleClass(i.opened),r[o.hasClass(i.opened)?"addClass":"removeClass"](i.uncollapsed),!0}}return!1}},t[e].defaults[n]={add:!1,addTo:"panels",fixed:!1,collapse:!1},t[e].configuration.classNames[n]={collapsed:"Collapsed"};var i,o,r,s}(t),function(t){function e(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function n(n,i,o){var a,u,l,c=this,h={events:"panleft panright",typeLower:"x",typeUpper:"X",open_dir:"right",close_dir:"left",negative:!1},f="width",d=h.open_dir,p=function(t){t<=n.maxStartPos&&(g=1)},m=function(){return t("."+s.slideout)},g=0,v=0,_=0;switch(this.opts.offCanvas.position){case"top":case"bottom":h.events="panup pandown",h.typeLower="y",h.typeUpper="Y",f="height"}switch(this.opts.offCanvas.position){case"right":case"bottom":h.negative=!0,p=function(t){t>=o.$wndw[f]()-n.maxStartPos&&(g=1)}}switch(this.opts.offCanvas.position){case"left":break;case"right":h.open_dir="left",h.close_dir="right";break;case"top":h.open_dir="down",h.close_dir="up";break;case"bottom":h.open_dir="up",h.close_dir="down"}switch(this.opts.offCanvas.zposition){case"front":m=function(){return this.$menu}}var y=this.__valueOrFn(n.node,this.$menu,o.$page);"string"==typeof y&&(y=t(y));var b=new Hammer(y[0],this.opts[r].vendors.hammer);b.on("panstart",function(t){p(t.center[h.typeLower]),o.$slideOutNodes=m(),d=h.open_dir}),b.on(h.events+" panend",function(t){g>0&&t.preventDefault()}),b.on(h.events,function(t){if(a=t["delta"+h.typeUpper],h.negative&&(a=-a),a!=v&&(d=a>=v?h.open_dir:h.close_dir),(v=a)>n.threshold&&1==g){if(o.$html.hasClass(s.opened))return;g=2,c._openSetup(),c.trigger("open:start"),o.$html.addClass(s.dragging),_=e(o.$wndw[f]()*i[f].perc,i[f].min,i[f].max)}2==g&&(u=e(v,10,_)-("front"==c.opts.offCanvas.zposition?_:0),h.negative&&(u=-u),l="translate"+h.typeUpper+"("+u+"px )",o.$slideOutNodes.css({"-webkit-transform":"-webkit-"+l,transform:l}))}),b.on("panend",function(t){2==g&&(o.$html.removeClass(s.dragging),o.$slideOutNodes.css("transform",""),c[d==h.open_dir?"_openFinish":"close"]()),g=0})}function i(t,e,n,i){var o=this,u=t.data(a.parent);if(u){u=u.closest("."+s.panel);var l=new Hammer(t[0],o.opts[r].vendors.hammer),c=null;l.on("panright",function(t){c||(o.openPanel(u),c=setTimeout(function(){clearTimeout(c),c=null},o.conf.openingInterval+o.conf.transitionDuration))})}}var o="mmenu",r="drag";t[o].addons[r]={setup:function(){if(this.opts.offCanvas){var e=this.opts[r],s=this.conf[r];l=t[o].glbl,"boolean"==typeof e&&(e={menu:e,panels:e}),"object"!=typeof e&&(e={}),"boolean"==typeof e.menu&&(e.menu={open:e.menu}),"object"!=typeof e.menu&&(e.menu={}),"boolean"==typeof e.panels&&(e.panels={close:e.panels}),"object"!=typeof e.panels&&(e.panels={}),e=this.opts[r]=t.extend(!0,{},t[o].defaults[r],e),e.menu.open&&this.bind("setPage:after",function(){n.call(this,e.menu,s.menu,l)}),e.panels.close&&this.bind("initPanel:after",function(t){i.call(this,t,e.panels,s.panels,l)})}},add:function(){return"function"!=typeof Hammer||Hammer.VERSION<2?(t[o].addons[r].add=function(){},void(t[o].addons[r].setup=function(){})):(s=t[o]._c,a=t[o]._d,u=t[o]._e,void s.add("dragging"))},clickAnchor:function(t,e){}},t[o].defaults[r]={menu:{open:!1,maxStartPos:100,threshold:50},panels:{close:!1},vendors:{hammer:{}}},t[o].configuration[r]={menu:{width:{perc:.8,min:140,max:440},height:{perc:.8,min:140,max:880}},panels:{}};var s,a,u,l}(t),function(t){var e="mmenu",n="dropdown";t[e].addons[n]={setup:function(){if(this.opts.offCanvas){var a=this,u=this.opts[n],l=this.conf[n];if(s=t[e].glbl,"boolean"==typeof u&&u&&(u={drop:u}),"object"!=typeof u&&(u={}),"string"==typeof u.position&&(u.position={of:u.position}),u=this.opts[n]=t.extend(!0,{},t[e].defaults[n],u),u.drop){var c;this.bind("initMenu:after",function(){if(this.$menu.addClass(i.dropdown),u.tip&&this.$menu.addClass(i.tip),"string"!=typeof u.position.of){var e=this._getOriginalMenuId();e&&e.length&&(u.position.of='[href="#'+e+'"]')}"string"==typeof u.position.of&&(c=t(u.position.of),u.event=u.event.split(" "),1==u.event.length&&(u.event[1]=u.event[0]),"hover"==u.event[0]&&c.on(r.mouseenter+"-"+n,function(){a.open()}),"hover"==u.event[1]&&this.$menu.on(r.mouseleave+"-"+n,function(){a.close()}))}),this.bind("open:start",function(){this.$menu.data(o.style,this.$menu.attr("style")||""),s.$html.addClass(i.dropdown)}),this.bind("close:finish",function(){this.$menu.attr("style",this.$menu.data(o.style)),s.$html.removeClass(i.dropdown)});var h=function(t,e){var n=e[0],o=e[1],r="x"==t?"scrollLeft":"scrollTop",a="x"==t?"outerWidth":"outerHeight",h="x"==t?"left":"top",f="x"==t?"right":"bottom",d="x"==t?"width":"height",p="x"==t?"maxWidth":"maxHeight",m=null,g=s.$wndw[r](),v=c.offset()[h]-=g,_=v+c[a](),y=s.$wndw[d](),b=l.offset.button[t]+l.offset.viewport[t];if(u.position[t])switch(u.position[t]){case"left":case"bottom":m="after";break;case"right":case"top":m="before"}null===m&&(m=v+(_-v)/2<y/2?"after":"before");var x,w;return"after"==m?(x="x"==t?v:_,w=y-(x+b),n[h]=x+l.offset.button[t],n[f]="auto",o.push(i["x"==t?"tipleft":"tiptop"])):(x="x"==t?_:v,w=x-b,n[f]="calc( 100% - "+(x-l.offset.button[t])+"px )",n[h]="auto",o.push(i["x"==t?"tipright":"tipbottom"])),n[p]=Math.min(l[d].max,w),[n,o]},f=function(t){if(this.vars.opened){this.$menu.attr("style",this.$menu.data(o.style));var e=[{},[]];e=h.call(this,"y",e),e=h.call(this,"x",e),this.$menu.css(e[0]),u.tip&&this.$menu.removeClass(i.tipleft+" "+i.tipright+" "+i.tiptop+" "+i.tipbottom).addClass(e[1].join(" "))}};this.bind("open:start",f),s.$wndw.on(r.resize+"-"+n,function(t){f.call(a)}),this.opts.offCanvas.blockUI||s.$wndw.on(r.scroll+"-"+n,function(t){f.call(a)})}}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("dropdown tip tipleft tipright tiptop tipbottom"),r.add("mouseenter mouseleave resize scroll")},clickAnchor:function(t,e){}},t[e].defaults[n]={drop:!1,event:"click",position:{},tip:!0},t[e].configuration[n]={offset:{button:{x:-10,y:10},viewport:{x:20,y:20}},height:{max:880},width:{max:440}};var i,o,r,s}(t),function(t){var e="mmenu",n="fixedElements";t[e].addons[n]={setup:function(){if(this.opts.offCanvas){var i=this.opts[n],o=this.conf[n];s=t[e].glbl,i=this.opts[n]=t.extend(!0,{},t[e].defaults[n],i);var r=function(t){var e=this.conf.classNames[n].fixed;this.__refactorClass(t.find("."+e),e,"slideout")[o.elemInsertMethod](o.elemInsertSelector)};this.bind("setPage:after",r)}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("fixed")},clickAnchor:function(t,e){}},t[e].configuration[n]={elemInsertMethod:"appendTo",elemInsertSelector:"body"},t[e].configuration.classNames[n]={fixed:"Fixed"};var i,o,r,s}(t),function(t){var e="mmenu",n="iconPanels";t[e].addons[n]={setup:function(){var o=this,r=this.opts[n];if(this.conf[n],s=t[e].glbl,"boolean"==typeof r&&(r={add:r}),"number"==typeof r&&(r={add:!0,visible:r}),"object"!=typeof r&&(r={}),r=this.opts[n]=t.extend(!0,{},t[e].defaults[n],r),r.visible++,r.add){for(var a="",u=0;u<=r.visible;u++)a+=" "+i.iconpanel+"-"+u;a.length&&(a=a.slice(1));var l=function(e){e.hasClass(i.vertical)||o.$pnls.children("."+i.panel).removeClass(a).filter("."+i.subopened).removeClass(i.hidden).add(e).not("."+i.vertical).slice(-r.visible).each(function(e){t(this).addClass(i.iconpanel+"-"+e)})};this.bind("initMenu:after",function(){this.$menu.addClass(i.iconpanel)}),this.bind("openPanel:start",l),this.bind("initPanels:after",function(t){l.call(o,o.$pnls.children("."+i.opened))}),this.bind("initListview:after",function(t){t.hasClass(i.vertical)||t.children("."+i.subblocker).length||t.prepend('<a href="#'+t.closest("."+i.panel).attr("id")+'" class="'+i.subblocker+'" />')})}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("iconpanel subblocker")},clickAnchor:function(t,e){}},t[e].defaults[n]={add:!1,visible:3};var i,o,r,s}(t),function(t){function e(e,n){e=e||this.$pnls.children("."+r.opened);var i=t(),o=this.$menu.children("."+r.mm("navbars-top")+", ."+r.mm("navbars-bottom")).children("."+r.navbar);o.find(l).filter(":focus").length||("default"==n&&(i=e.children("."+r.listview).find("a[href]").not("."+r.hidden),i.length||(i=e.find(l).not("."+r.hidden)),i.length||(i=o.find(l).not("."+r.hidden))),i.length||(i=this.$menu.children("."+r.tabstart)),i.first().focus())}function n(t){t||(t=this.$pnls.children("."+r.opened)),this.$pnls.children("."+r.panel).not(t).find(l).attr("tabindex",-1),t.find(l).attr("tabindex",0),t.find("."+r.mm("toggle")+", ."+r.mm("check")).attr("tabindex",-1),t.children("."+r.navbar).children("."+r.title).attr("tabindex",-1)}var i="mmenu",o="keyboardNavigation";t[i].addons[o]={setup:function(){var s=this.opts[o];if(this.conf[o],u=t[i].glbl,"boolean"!=typeof s&&"string"!=typeof s||(s={enable:s}),"object"!=typeof s&&(s={}),s=this.opts[o]=t.extend(!0,{},t[i].defaults[o],s),s.enable){var a=t('<button class="'+r.tabstart+'" tabindex="0" type="button" />'),l=t('<button class="'+r.tabend+'" tabindex="0" type="button" />');this.bind("initMenu:after",function(){s.enhance&&this.$menu.addClass(r.keyboardfocus),this["_initWindow_"+o](s.enhance)}),this.bind("initOpened:before",function(){this.$menu.prepend(a).append(l).children("."+r.mm("navbars-top")+", ."+r.mm("navbars-bottom")).children("."+r.navbar).children("a."+r.title).attr("tabindex",-1)}),this.bind("open:start",function(){n.call(this)}),this.bind("open:finish",function(){e.call(this,null,s.enable)}),this.bind("openPanel:start",function(t){n.call(this,t)}),this.bind("openPanel:finish",function(t){e.call(this,t,s.enable)}),this.bind("initOpened:after",function(){this.__sr_aria(this.$menu.children("."+r.mm("tabstart")+", ."+r.mm("tabend")),"hidden",!0)})}},add:function(){r=t[i]._c,s=t[i]._d,a=t[i]._e,r.add("tabstart tabend keyboardfocus"),a.add("focusin keydown")},clickAnchor:function(t,e){}},t[i].defaults[o]={enable:!1,enhance:!1},t[i].configuration[o]={},t[i].prototype["_initWindow_"+o]=function(e){u.$wndw.off(a.keydown+"-offCanvas"),u.$wndw.off(a.focusin+"-"+o).on(a.focusin+"-"+o,function(e){if(u.$html.hasClass(r.opened)){var n=t(e.target);n.is("."+r.tabend)&&n.parent().find("."+r.tabstart).focus()}}),u.$wndw.off(a.keydown+"-"+o).on(a.keydown+"-"+o,function(e){var n=t(e.target),i=n.closest("."+r.menu);if(i.length)if(i.data("mmenu"),n.is("input, textarea"));else switch(e.keyCode){case 13:(n.is(".mm-toggle")||n.is(".mm-check"))&&n.trigger(a.click);break;case 32:case 37:case 38:case 39:case 40:e.preventDefault()}}),e&&u.$wndw.off(a.keydown+"-"+o).on(a.keydown+"-"+o,function(e){var n=t(e.target),i=n.closest("."+r.menu);if(i.length){var o=i.data("mmenu");if(n.is("input, textarea"))switch(e.keyCode){case 27:n.val("")}else switch(e.keyCode){case 8:var a=n.closest("."+r.panel).data(s.parent);a&&a.length&&o.openPanel(a.closest("."+r.panel));break;case 27:i.hasClass(r.offcanvas)&&o.close()}}})};var r,s,a,u,l="input, select, textarea, button, label, a[href]"}(t),function(t){var e="mmenu",n="lazySubmenus";t[e].addons[n]={setup:function(){var o=this.opts[n];this.conf[n],s=t[e].glbl,"boolean"==typeof o&&(o={load:o}),"object"!=typeof o&&(o={}),o=this.opts[n]=t.extend(!0,{},t[e].defaults[n],o),o.load&&(this.bind("initMenu:after",function(){this.$pnls.find("li").children(this.conf.panelNodetype).not("."+i.inset).not("."+i.nolistview).not("."+i.nopanel).addClass(i.lazysubmenu+" "+i.nolistview+" "+i.nopanel)}),this.bind("initPanels:before",function(t){t=t||this.$pnls.children(this.conf.panelNodetype),this.__findAddBack(t,"."+i.lazysubmenu).not("."+i.lazysubmenu+" ."+i.lazysubmenu).removeClass(i.lazysubmenu+" "+i.nolistview+" "+i.nopanel)}),this.bind("initOpened:before",function(){var t=this.$pnls.find("."+this.conf.classNames.selected).parents("."+i.lazysubmenu);t.length&&(t.removeClass(i.lazysubmenu+" "+i.nolistview+" "+i.nopanel),this.initPanels(t.last()))}),this.bind("openPanel:before",function(t){var e=this.__findAddBack(t,"."+i.lazysubmenu).not("."+i.lazysubmenu+" ."+i.lazysubmenu);e.length&&this.initPanels(e)}))},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("lazysubmenu"),o.add("lazysubmenu")},clickAnchor:function(t,e){}},t[e].defaults[n]={load:!1},t[e].configuration[n]={};var i,o,r,s}(t),function(t){var e="mmenu",n="navbars";t[e].addons[n]={setup:function(){var o=this,r=this.opts[n],a=this.conf[n];if(s=t[e].glbl,void 0!==r){r instanceof Array||(r=[r]);var u={},l={};r.length&&(t.each(r,function(s){var c=r[s];"boolean"==typeof c&&c&&(c={}),"object"!=typeof c&&(c={}),void 0===c.content&&(c.content=["prev","title"]),c.content instanceof Array||(c.content=[c.content]),c=t.extend(!0,{},o.opts.navbar,c);var h=t('<div class="'+i.navbar+'" />'),f=c.height;"number"!=typeof f&&(f=1),f=Math.min(4,Math.max(1,f)),h.addClass(i.navbar+"-size-"+f);var d=c.position;"bottom"!=d&&(d="top"),u[d]||(u[d]=0),u[d]+=f,l[d]||(l[d]=t('<div class="'+i.navbars+"-"+d+'" />')),l[d].append(h);for(var p=0,m=0,g=c.content.length;m<g;m++){var v=t[e].addons[n][c.content[m]]||!1;v?p+=v.call(o,h,c,a):(v=c.content[m],v instanceof t||(v=t(c.content[m])),h.append(v))}p+=Math.ceil(h.children().not("."+i.btn).length/f),p>1&&h.addClass(i.navbar+"-content-"+p),h.children("."+i.btn).length&&h.addClass(i.hasbtns)}),this.bind("initMenu:after",function(){for(var t in u)this.$menu.addClass(i.hasnavbar+"-"+t+"-"+u[t]),this.$menu["bottom"==t?"append":"prepend"](l[t])}))}},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("navbars close hasbtns")},clickAnchor:function(t,e){}},t[e].configuration[n]={breadcrumbSeparator:"/"},t[e].configuration.classNames[n]={};var i,o,r,s}(t),function(t){var e="mmenu";t[e].addons.navbars.breadcrumbs=function(n,i,o){var r=this,s=t[e]._c,a=t[e]._d;s.add("breadcrumbs separator");var u=t('<span class="'+s.breadcrumbs+'" />').appendTo(n);return this.bind("initNavbar:after",function(e){e.removeClass(s.hasnavbar);for(var n=[],i=t('<span class="'+s.breadcrumbs+'"></span>'),r=e,u=!0;r&&r.length;){if(r.is("."+s.panel)||(r=r.closest("."+s.panel)),!r.hasClass(s.vertical)){var l=r.children("."+s.navbar).children("."+s.title).text();n.unshift(u?"<span>"+l+"</span>":'<a href="#'+r.attr("id")+'">'+l+"</a>"),u=!1}r=r.data(a.parent)}i.append(n.join('<span class="'+s.separator+'">'+o.breadcrumbSeparator+"</span>")).appendTo(e.children("."+s.navbar))}),this.bind("openPanel:start",function(t){u.html(t.children("."+s.navbar).children("."+s.breadcrumbs).html()||"")}),this.bind("initNavbar:after:sr-aria",function(e){e.children("."+s.navbar).children("."+s.breadcrumbs).children("a").each(function(){r.__sr_aria(t(this),"owns",t(this).attr("href").slice(1))})}),0}}(t),function(t){var e="mmenu";t[e].addons.navbars.close=function(n,i){var o=t[e]._c,r=(t[e].glbl,t('<a class="'+o.close+" "+o.btn+'" href="#" />').appendTo(n));return this.bind("setPage:after",function(t){r.attr("href","#"+t.attr("id"))}),this.bind("setPage:after:sr-text",function(n){r.html(this.__sr_text(t[e].i18n(this.conf.screenReader.text.closeMenu))),this.__sr_aria(r,"owns",r.attr("href").slice(1))}),-1}}(t),function(t){var e="mmenu",n="navbars";t[e].addons[n].next=function(i,o){var r,s,a,u=t[e]._c,l=t('<a class="'+u.next+" "+u.btn+'" href="#" />').appendTo(i);return this.bind("openPanel:start",function(t){r=t.find("."+this.conf.classNames[n].panelNext),s=r.attr("href"),a=r.html(),s?l.attr("href",s):l.removeAttr("href"),l[s||a?"removeClass":"addClass"](u.hidden),l.html(a)}),this.bind("openPanel:start:sr-aria",function(t){this.__sr_aria(l,"hidden",l.hasClass(u.hidden)),this.__sr_aria(l,"owns",(l.attr("href")||"").slice(1))
}),-1},t[e].configuration.classNames[n].panelNext="Next"}(t),function(t){var e="mmenu",n="navbars";t[e].addons[n].prev=function(i,o){var r=t[e]._c,s=t('<a class="'+r.prev+" "+r.btn+'" href="#" />').appendTo(i);this.bind("initNavbar:after",function(t){t.removeClass(r.hasnavbar)});var a,u,l;return this.bind("openPanel:start",function(t){t.hasClass(r.vertical)||(a=t.find("."+this.conf.classNames[n].panelPrev),a.length||(a=t.children("."+r.navbar).children("."+r.prev)),u=a.attr("href"),l=a.html(),u?s.attr("href",u):s.removeAttr("href"),s[u||l?"removeClass":"addClass"](r.hidden),s.html(l))}),this.bind("initNavbar:after:sr-aria",function(t){var e=t.children("."+r.navbar);this.__sr_aria(e,"hidden",!0)}),this.bind("openPanel:start:sr-aria",function(t){this.__sr_aria(s,"hidden",s.hasClass(r.hidden)),this.__sr_aria(s,"owns",(s.attr("href")||"").slice(1))}),-1},t[e].configuration.classNames[n].panelPrev="Prev"}(t),function(t){var e="mmenu";t[e].addons.navbars.searchfield=function(n,i){var o=t[e]._c,r=t('<div class="'+o.search+'" />').appendTo(n);return"object"!=typeof this.opts.searchfield&&(this.opts.searchfield={}),this.opts.searchfield.add=!0,this.opts.searchfield.addTo=r,0}}(t),function(t){var e="mmenu",n="navbars";t[e].addons[n].title=function(i,o){var r,s,a,u=t[e]._c,l=t('<a class="'+u.title+'" />').appendTo(i);this.bind("openPanel:start",function(t){t.hasClass(u.vertical)||(a=t.find("."+this.conf.classNames[n].panelTitle),a.length||(a=t.children("."+u.navbar).children("."+u.title)),r=a.attr("href"),s=a.html()||o.title,r?l.attr("href",r):l.removeAttr("href"),l[r||s?"removeClass":"addClass"](u.hidden),l.html(s))});var c;return this.bind("openPanel:start:sr-aria",function(t){if(this.opts.screenReader.text&&(c||(c=this.$menu.children("."+u.navbars+"-top, ."+u.navbars+"-bottom").children("."+u.navbar).children("."+u.prev)),c.length)){var e=!0;"parent"==this.opts.navbar.titleLink&&(e=!c.hasClass(u.hidden)),this.__sr_aria(l,"hidden",e)}}),0},t[e].configuration.classNames[n].panelTitle="Title"}(t),function(t){function e(t){l&&l.length&&l.is(":visible")&&u.$html.add(u.$body).animate({scrollTop:l.offset().top+t}),l=!1}function n(t){try{return!("#"==t||"#"!=t.slice(0,1)||!u.$page.find(t).length)}catch(t){return!1}}var i="mmenu",o="pageScroll";t[i].addons[o]={setup:function(){var s=this,l=this.opts[o],c=this.conf[o];if(u=t[i].glbl,"boolean"==typeof l&&(l={scroll:l}),l=this.opts[o]=t.extend(!0,{},t[i].defaults[o],l),l.scroll&&this.bind("close:finish",function(){e(c.scrollOffset)}),l.update){var s=this,h=[],f=[];s.bind("initListview:after",function(e){s.__filterListItemAnchors(e.find("."+r.listview).children("li")).each(function(){var e=t(this).attr("href");n(e)&&h.push(e)}),f=h.reverse()});var d=-1;u.$wndw.on(a.scroll+"-"+o,function(e){for(var n=u.$wndw.scrollTop(),i=0;i<f.length;i++)if(t(f[i]).offset().top<n+c.updateOffset){d!==i&&(d=i,s.setSelected(s.__filterListItemAnchors(s.$pnls.children("."+r.opened).find("."+r.listview).children("li")).filter('[href="'+f[i]+'"]').parent()));break}})}},add:function(){r=t[i]._c,s=t[i]._d,a=t[i]._e},clickAnchor:function(i,s){if(l=!1,s&&this.opts[o].scroll&&this.opts.offCanvas&&u.$page&&u.$page.length){var a=i.attr("href");n(a)&&(l=t(a),u.$html.hasClass(r.mm("widescreen"))&&e(this.conf[o].scrollOffset))}}},t[i].defaults[o]={scroll:!1,update:!1},t[i].configuration[o]={scrollOffset:0,updateOffset:50};var r,s,a,u,l=!1}(t),function(t){var e="mmenu",n="rtl";t[e].addons[n]={setup:function(){var o=this.opts[n];this.conf[n],s=t[e].glbl,"object"!=typeof o&&(o={use:o}),o=this.opts[n]=t.extend(!0,{},t[e].defaults[n],o),"boolean"!=typeof o.use&&(o.use="rtl"==(s.$html.attr("dir")||"").toLowerCase()),o.use&&this.bind("initMenu:after",function(){this.$menu.addClass(i.rtl)})},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("rtl")},clickAnchor:function(t,e){}},t[e].defaults[n]={use:"detect"};var i,o,r,s}(t),function(t){function e(t){switch(t){case 9:case 16:case 17:case 18:case 37:case 38:case 39:case 40:return!0}return!1}var n="mmenu",i="searchfield";t[n].addons[i]={setup:function(){var u=this,l=this.opts[i],c=this.conf[i];a=t[n].glbl,"boolean"==typeof l&&(l={add:l}),"object"!=typeof l&&(l={}),"boolean"==typeof l.resultsPanel&&(l.resultsPanel={add:l.resultsPanel}),l=this.opts[i]=t.extend(!0,{},t[n].defaults[i],l),c=this.conf[i]=t.extend(!0,{},t[n].configuration[i],c),this.bind("close:start",function(){this.$menu.find("."+o.search).find("input").blur()}),this.bind("initPanels:after",function(a){if(l.add){var h;switch(l.addTo){case"panels":h=a;break;default:h=this.$menu.find(l.addTo)}if(h.each(function(){var e=t(this);if(!e.is("."+o.panel)||!e.is("."+o.vertical)){if(!e.children("."+o.search).length){var i=u.__valueOrFn(c.clear,e),r=u.__valueOrFn(c.form,e),a=u.__valueOrFn(c.input,e),h=u.__valueOrFn(c.submit,e),f=t("<"+(r?"form":"div")+' class="'+o.search+'" />'),d=t('<input placeholder="'+t[n].i18n(l.placeholder)+'" type="text" autocomplete="off" />');f.append(d);var p;if(a)for(p in a)d.attr(p,a[p]);if(i&&t('<a class="'+o.btn+" "+o.clear+'" href="#" />').appendTo(f).on(s.click+"-searchfield",function(t){t.preventDefault(),d.val("").trigger(s.keyup+"-searchfield")}),r){for(p in r)f.attr(p,r[p]);h&&!i&&t('<a class="'+o.btn+" "+o.next+'" href="#" />').appendTo(f).on(s.click+"-searchfield",function(t){t.preventDefault(),f.submit()})}e.hasClass(o.search)?e.replaceWith(f):e.prepend(f).addClass(o.hassearch)}if(l.noResults){if(e.closest("."+o.panel).length||(e=u.$pnls.children("."+o.panel).first()),!e.children("."+o.noresultsmsg).length){var m=e.children("."+o.listview).first();t('<div class="'+o.noresultsmsg+" "+o.hidden+'" />').append(t[n].i18n(l.noResults))[m.length?"insertAfter":"prependTo"](m.length?m:e)}}}}),l.search){if(l.resultsPanel.add){l.showSubPanels=!1;var f=this.$pnls.children("."+o.resultspanel);f.length||(f=t('<div class="'+o.panel+" "+o.resultspanel+" "+o.noanimation+" "+o.hidden+'" />').appendTo(this.$pnls).append('<div class="'+o.navbar+" "+o.hidden+'"><a class="'+o.title+'">'+t[n].i18n(l.resultsPanel.title)+"</a></div>").append('<ul class="'+o.listview+'" />').append(this.$pnls.find("."+o.noresultsmsg).first().clone()),this.initPanels(f))}this.$menu.find("."+o.search).each(function(){var n,a,c=t(this),h=c.closest("."+o.panel).length;h?(n=c.closest("."+o.panel),a=n):(n=t("."+o.panel,u.pnls),a=u.$menu),l.resultsPanel.add&&(n=n.not(f));var d=c.children("input"),p=u.__findAddBack(n,"."+o.listview).children("li"),m=p.filter("."+o.divider),g=u.__filterListItems(p),v="",_=function(){var e=d.val().toLowerCase();if(e!=v){if(v=e,l.resultsPanel.add&&f.children("."+o.listview).empty(),n.scrollTop(0),g.add(m).addClass(o.hidden).find("."+o.fullsubopensearch).removeClass(o.fullsubopen+" "+o.fullsubopensearch),g.each(function(){var e=t(this),n="a";(l.showTextItems||l.showSubPanels&&e.find("."+o.next))&&(n="a, span"),(e.data(r.searchtext)||e.children(n).not("."+o.next).text()).toLowerCase().indexOf(v)>-1&&e.add(e.prevAll("."+o.divider).first()).removeClass(o.hidden)}),l.showSubPanels&&n.each(function(e){var n=t(this);u.__filterListItems(n.find("."+o.listview).children()).each(function(){var e=t(this),n=e.data(r.child);e.removeClass(o.nosubresults),n&&n.find("."+o.listview).children().removeClass(o.hidden)})}),l.resultsPanel.add)if(""===v)this.closeAllPanels(),this.openPanel(this.$pnls.children("."+o.subopened).last());else{var i=t();n.each(function(){var e=u.__filterListItems(t(this).find("."+o.listview).children()).not("."+o.hidden).clone(!0);e.length&&(l.resultsPanel.dividers&&(i=i.add('<li class="'+o.divider+'">'+t(this).children("."+o.navbar).children("."+o.title).text()+"</li>")),e.children("."+o.mm("toggle")+", ."+o.mm("check")).remove(),i=i.add(e))}),i.find("."+o.next).remove(),f.children("."+o.listview).append(i),this.openPanel(f)}else t(n.get().reverse()).each(function(e){var n=t(this),i=n.data(r.parent);i&&(u.__filterListItems(n.find("."+o.listview).children()).length?(i.hasClass(o.hidden)&&i.children("."+o.next).not("."+o.fullsubopen).addClass(o.fullsubopen).addClass(o.fullsubopensearch),i.removeClass(o.hidden).removeClass(o.nosubresults).prevAll("."+o.divider).first().removeClass(o.hidden)):h||(n.hasClass(o.opened)&&setTimeout(function(){u.openPanel(i.closest("."+o.panel))},(e+1)*(1.5*u.conf.openingInterval)),i.addClass(o.nosubresults)))});a.find("."+o.noresultsmsg)[g.not("."+o.hidden).length?"addClass":"removeClass"](o.hidden),this.trigger("updateListview")}};d.off(s.keyup+"-"+i+" "+s.change+"-"+i).on(s.keyup+"-"+i,function(t){e(t.keyCode)||_.call(u)}).on(s.change+"-"+i,function(t){_.call(u)});var y=c.children("."+o.btn);y.length&&d.on(s.keyup+"-"+i,function(t){y[d.val().length?"removeClass":"addClass"](o.hidden)}),d.trigger(s.keyup+"-"+i)})}}})},add:function(){o=t[n]._c,r=t[n]._d,s=t[n]._e,o.add("clear search hassearch resultspanel noresultsmsg noresults nosubresults fullsubopensearch"),r.add("searchtext"),s.add("change keyup")},clickAnchor:function(t,e){}},t[n].defaults[i]={add:!1,addTo:"panels",placeholder:"Search",noResults:"No results found.",resultsPanel:{add:!1,dividers:!0,title:"Search results"},search:!0,showTextItems:!1,showSubPanels:!0},t[n].configuration[i]={clear:!1,form:!1,input:!1,submit:!1};var o,r,s,a}(t),function(t){var e="mmenu",n="sectionIndexer";t[e].addons[n]={setup:function(){var o=this,a=this.opts[n];this.conf[n],s=t[e].glbl,"boolean"==typeof a&&(a={add:a}),"object"!=typeof a&&(a={}),a=this.opts[n]=t.extend(!0,{},t[e].defaults[n],a),this.bind("initPanels:after",function(e){if(a.add){var s;switch(a.addTo){case"panels":s=e;break;default:s=t(a.addTo,this.$menu).filter("."+i.panel)}s.find("."+i.divider).closest("."+i.panel).addClass(i.hasindexer),this.$indexer||(this.$indexer=t('<div class="'+i.indexer+'" />').prependTo(this.$pnls).append('<a href="#a">a</a><a href="#b">b</a><a href="#c">c</a><a href="#d">d</a><a href="#e">e</a><a href="#f">f</a><a href="#g">g</a><a href="#h">h</a><a href="#i">i</a><a href="#j">j</a><a href="#k">k</a><a href="#l">l</a><a href="#m">m</a><a href="#n">n</a><a href="#o">o</a><a href="#p">p</a><a href="#q">q</a><a href="#r">r</a><a href="#s">s</a><a href="#t">t</a><a href="#u">u</a><a href="#v">v</a><a href="#w">w</a><a href="#x">x</a><a href="#y">y</a><a href="#z">z</a>'),this.$indexer.children().on(r.mouseover+"-"+n+" "+i.touchstart+"-"+n,function(e){var n=t(this).attr("href").slice(1),r=o.$pnls.children("."+i.opened),s=r.find("."+i.listview),a=-1,u=r.scrollTop();r.scrollTop(0),s.children("."+i.divider).not("."+i.hidden).each(function(){a<0&&n==t(this).text().slice(0,1).toLowerCase()&&(a=t(this).position().top)}),r.scrollTop(a>-1?a:u)}));var u=function(t){t=t||this.$pnls.children("."+i.opened),this.$menu[(t.hasClass(i.hasindexer)?"add":"remove")+"Class"](i.hasindexer)};this.bind("openPanel:start",u),this.bind("initPanels:after",u)}})},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("indexer hasindexer"),r.add("mouseover touchstart")},clickAnchor:function(t,e){if(t.parent().is("."+i.indexer))return!0}},t[e].defaults[n]={add:!1,addTo:"panels"};var i,o,r,s}(t),function(t){var e="mmenu",n="setSelected";t[e].addons[n]={setup:function(){var r=this,a=this.opts[n];if(this.conf[n],s=t[e].glbl,"boolean"==typeof a&&(a={hover:a,parent:a}),"object"!=typeof a&&(a={}),a=this.opts[n]=t.extend(!0,{},t[e].defaults[n],a),"detect"==a.current){var u=function(t){t=t.split("?")[0].split("#")[0];var e=r.$menu.find('a[href="'+t+'"], a[href="'+t+'/"]');e.length?r.setSelected(e.parent(),!0):(t=t.split("/").slice(0,-1),t.length&&u(t.join("/")))};this.bind("initMenu:after",function(){u(window.location.href)})}else a.current||this.bind("initListview:after",function(t){this.$pnls.find("."+i.listview).children("."+i.selected).removeClass(i.selected)});a.hover&&this.bind("initMenu:after",function(){this.$menu.addClass(i.hoverselected)}),a.parent&&(this.bind("openPanel:finish",function(t){this.$pnls.find("."+i.listview).find("."+i.next).removeClass(i.selected);for(var e=t.data(o.parent);e;)e.not("."+i.vertical).children("."+i.next).addClass(i.selected),e=e.closest("."+i.panel).data(o.parent)}),this.bind("initMenu:after",function(){this.$menu.addClass(i.parentselected)}))},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("hoverselected parentselected")},clickAnchor:function(t,e){}},t[e].defaults[n]={current:!0,hover:!1,parent:!1};var i,o,r,s}(t),function(t){var e="mmenu",n="toggles";t[e].addons[n]={setup:function(){var o=this;this.opts[n],this.conf[n],s=t[e].glbl,this.bind("initListview:after",function(e){this.__refactorClass(e.find("input"),this.conf.classNames[n].toggle,"toggle"),this.__refactorClass(e.find("input"),this.conf.classNames[n].check,"check"),e.find("input."+i.toggle+", input."+i.check).each(function(){var e=t(this),n=e.closest("li"),r=e.hasClass(i.toggle)?"toggle":"check",s=e.attr("id")||o.__getUniqueId();n.children('label[for="'+s+'"]').length||(e.attr("id",s),n.prepend(e),t('<label for="'+s+'" class="'+i[r]+'"></label>').insertBefore(n.children("a, span").last()))})})},add:function(){i=t[e]._c,o=t[e]._d,r=t[e]._e,i.add("toggle check")},clickAnchor:function(t,e){}},t[e].configuration.classNames[n]={toggle:"Toggle",check:"Check"};var i,o,r,s}(t),!0}),define("controllers/app",["config","jquery","leaflet","esri-leaflet","esri-leaflet-geocoder","modules/d3-cluster-icon","modules/programPopup","modules/programFilters","leaflet-marker-cluster","leaflet-locate","leaflet-default-extent","leaflet-markers","mmenu"],function(t,e,n,i,o,r,s,a){function u(t){g&&d.removeLayer(g),g="OpenStreetMap"===t?n.tileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"):i.basemapLayer(t),d.addLayer(g),v&&d.removeLayer(v),-1!=["ShadedRelief","Oceans","Gray","DarkGray","Imagery","Terrain"].indexOf(t)&&(v=i.basemapLayer(t+"Labels"),d.addLayer(v)),"Imagery"===t&&_?_.addTo(d):d.hasLayer(_)&&d.removeLayer(_),e('ul.basemaps input:not([value="'+t+'"])').prop("checked",!1),e('ul.basemaps input[value="'+t+'"]:not(:checked)').prop("checked",!0)}function l(){var t=e(".geocoder-control").parent().attr("id"),n=e(".geocoder-control"),i=e(window).width();i<=767&&"geocodeMobile"!==t?(n.detach(),e("#geocodeMobile").append(n)):i>767&&"geocode"!==t&&(n.detach(),e("#geocode").append(n))}function c(o){f=o,document.location.hash="#"+o,e('ul.territories input:not([value="'+o+'"])').prop("checked",!1),e('ul.territories input[value="'+o+'"]:not(:checked)').prop("checked",!0),e("#location-title").html(t.territories[o].label),p=i.featureLayer({url:t.territories[o].layer}),x=[],w.clearLayers(),p.metadata(function(t,i){m=i,p.query().where("1=1").run(function(t,i){e.each(i.features,function(t,e){x.push(n.marker([e.geometry.coordinates[1],e.geometry.coordinates[0]],{icon:b[e.properties.program_type]||b.Other,feature:e}).bindPopup(s.bindPopup).on("popupopen",s.programPopupOpened).on("popupclose",s.programPopupClosed))}),w.addLayers(x),a.loadFilters(m,x,w,d),y.setCenter(w.getBounds().getCenter()),d.once("zoomend",function(){y.setZoom(d.getZoom())}),d.fitBounds(w.getBounds())})})}function h(e){e&&(e=e.toLowerCase(),t.territories[e]&&e!=f&&c(e))}var f,d,p,m,g,v,_,y,b={},x=[],w=n.markerClusterGroup({showCoverageOnHover:!1,spiderfyOnMaxZoom:!0,zoomToBoundsOnClick:!0,iconCreateFunction:r.defineClusterIcon});return e.each(t.program_types.display.types,function(t,e){b[t]=n.ExtraMarkers.icon(e)}),function(){e.each(t.text,function(t,n){e(t).html(n)});var r=e("ul.basemaps");r.find("li").remove(),e.each(t.basemaps,function(t,e){e.enabled&&r.append('<li><a href="#'+t+'" class="'+e.code+'">'+e.label+'</a> <input type="checkbox" class="Check" value="'+t+'" /></li>')}),r.click(function(t){u(e(t.target).closest("li").find("input").val())});var a=e("ul.territories");a.find("li").remove(),e.each(t.territories,function(t,e){a.append('<li><a href="#'+t+'">'+e.label+'</a> <input type="checkbox" class="Check" value="'+t+'" /></li>')}),a.click(function(t){var n=e(t.target).closest("li").find("input").val();n!=f&&(e("#menu").css("opacity",.4).delay(300).fadeTo(300,1),h(n))}),d=n.map("map",{zoomControl:!1}).setView([64.5,-110],4),_=i.basemapLayer("ImageryTransportation"),u("Topographic"),d.attributionControl.setPrefix(d.attributionControl.options.prefix+t.labels.appattribution),d.addLayer(w),n.control.zoom({position:"topright",zoomInTitle:t.labels.zoomInTitle,zoomOutTitle:t.labels.zoomOutTitle}).addTo(d),y=n.control.defaultExtent({position:"topright",title:t.labels.defaultexstent}).addTo(d),"https:"==document.location.protocol&&n.control.locate({position:"topright",strings:{title:t.labels.locatetitle,popup:t.labels.locatepopup}}).addTo(d),o.geosearch({expanded:!0,collapseAfterResult:!1,zoomToResult:!1,useMapBounds:!1,placeholder:t.labels.searchplaceholder}).addTo(d).on("results",function(t){t.results.length>0&&(n.popup().setLatLng(t.results[0].latlng).setContent(t.results[0].text).openOn(d),d.setView(t.results[0].latlng))}),e("#selectStandardBasemap").on("change",function(t){u(e(this).val())});var p=e(".geocoder-control-input");p.focus(function(){e("#panelSearch .panel-body").css("height","150px")}),p.blur(function(){e("#panelSearch .panel-body").css("height","auto")}),e(window).resize(function(){l()}),l(),c(document.location.href.toLowerCase().indexOf("nwt")>-1?"nwt":"yt"),e("#map").on("click",".popup-info",{map:d},s.showMorePopupInfo),e(".modal-close").click(function(){e("#about-modal").modal("hide"),e("#program-modal").modal("hide")}),e.each(t.program_types.display.types,function(t,n){e("."+n.text.classname,"#about-modal").css({color:n.text.colour}).html(n.text.colourname)}),e(".calcite-map").off("touchmove").on("touchmove",function(t){var n=e(t.target).closest(".more-info .description");n.length&&n.get(0).scrollHeight>n.get(0).clientHeight||t.preventDefault()}),e("#menu").mmenu({offCanvas:!1,navbar:{title:""},navbars:[{position:"bottom",content:['<a class="fa fa-lg fa-envelope" href="//www.aicbr.ca/contact-us/" target="_blank"></a>','<a class="fa fa-lg fa-twitter" href="https://twitter.com/AicbrYukon" target="_blank"></a>','<a class="fa fa-lg fa-facebook" href="https://www.facebook.com/Arctic-Institute-of-Community-Based-Research-947539015291917/?fref=ts" target="_blank"></a>','<a class="fa fa-lg fa-linkedin-square" href="https://www.linkedin.com/company/arctic-institute-of-community-based-research?trk=biz-companies-cym" target="_blank"></a>','<a class="fa fa-lg fa-youtube-play" href="https://www.youtube.com/channel/UC0vT-yLsTKZMlX2iBmibEgQ" target="_blank"></a>']}]}),e("#menu .about-item").click(function(){d.closePopup(),w.unspiderfy(),e(".calcite-dropdown.open .dropdown-toggle").click(),e("#about-modal").modal("show")}),e(window).on("hashchange",function(){var t=document.location.hash;t&&"#"!=t&&h(t.substr(1))})}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){s.detach().trigger("closed.bs.alert").remove()}var o=t(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=t("#"===r?[]:r);e&&e.preventDefault(),s.length||(s=o.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.button"),r="object"==typeof e&&e;o||i.data("bs.button",o=new n(this,r)),"toggle"==e?o.toggle():e&&o.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target).closest(".btn");e.call(i,"toggle"),t(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),i.is("input,button")?i.trigger("focus"):i.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;o||i.data("bs.carousel",o=new n(this,r)),"number"==typeof e?o.to(e):s?o[s]():r.interval&&o.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i="prev"==t?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),r=i||this.getItemForDirection(e,o),s=this.interval,a="next"==e?"left":"right",u=this;if(r.hasClass("active"))return this.sliding=!1;var l=r[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(r)]);h&&h.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:l,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,o.addClass(a),r.addClass(a),o.one("bsTransitionEnd",function(){r.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(f)),s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(n){var i,o=t(this),r=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),o.data()),a=o.attr("data-slide-to");a&&(s.interval=!1),e.call(r,s),a&&r.data("bs.carousel").to(a),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||n.data("bs.collapse",o=new i(this,r)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.7",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"))&&e.transitioning)){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var u=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][u])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var r=e(o),s=r.data("bs.collapse"),a=s?"toggle":o.data();n.call(r,a)})}(jQuery),function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(o).remove(),t(r).each(function(){var i=t(this),o=e(i),r={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(o[0],n.target)||(o.trigger(n=t.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r)))))}))}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.7",s.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var r=e(o),s=r.hasClass("open");if(n(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var a={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},s.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=e(i),s=o.hasClass("open");if(!s&&27!=n.which||s&&27==n.which)return 27==n.which&&o.find(r).trigger("focus"),i.trigger("click");var a=o.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var u=a.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<a.length-1&&u++,~u||(u=0),a.eq(u).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=s,
t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);r||o.data("bs.modal",r=new n(this,s)),"string"==typeof e?r[e](i):s.show&&r.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),o=i.attr("href"),r=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(r,s,this)})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),r="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.tooltip",o=new n(this,r)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",u="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,l=u.test(a);l&&(a=a.replace(u,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=r[0].offsetWidth,f=r[0].offsetHeight;if(l){var d=a,p=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+f>p.bottom?"top":"top"==a&&c.top-f<p.top?"bottom":"right"==a&&c.right+h>p.width?"left":"left"==a&&c.left-h<p.left?"right":a,r.removeClass(d).addClass(a)}var m=this.getCalculatedOffset(a,c,h,f);this.applyPlacement(m,a);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var u=i[0].offsetWidth,l=i[0].offsetHeight;"top"==n&&l!=r&&(e.top=e.top+r-l);var c=this.getViewportAdjustedDelta(n,e,u,l);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),f=h?2*c.left-o+u:2*c.top-r+l,d=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(f,i[0][d],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=o.hoverState&&r.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,r=t(this.$tip),s=t.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=window.SVGElement&&n instanceof window.SVGElement,s=i?{top:0,left:0}:r?null:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},u=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,u,s)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,u=e.top+r-s.scroll+i;a<s.top?o.top=s.top-a:u>s.top+s.height&&(o.top=s.top+s.height-u)}else{var l=e.left-r,c=e.left+r+n;l<s.left?o.left=s.left-l:c>s.right&&(o.left=s.left+s.width-c)}return o},n.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},n.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.popover"),r="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||i.data("bs.popover",o=new n(this,r)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,r)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(e,i,o){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var s=i.find("> .active"),a=o&&t.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.affix"),r="object"==typeof e&&e;o||i.data("bs.affix",o=new n(this,r)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return o<n&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=r.top)&&"bottom":!(o+s<=t-i)&&"bottom";var a=null==this.affixed,u=a?o:r.top,l=a?s:e;return null!=n&&o<=n?"top":null!=i&&u+l>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,r=i.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof i&&(r=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var a=this.getState(s,e,o,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var u="affix"+(a?"-"+a:""),l=t.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-r})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(t,e,n){t.navbarSelector=".calcite-navbar .calcite-dropdown li > a",t.navbarToggleTarget="toggleNavbar",t.preventOverscrolling=!0,t.stickyDropdownDesktop=!1,t.stickyDropdownMobile=!1,_stickyDropdownBreakpoint=768,e(t.navbarSelector).on("click",function(n){var i=!1,o=null,r=null,s=null;if(n.currentTarget.dataset.target&&(o=e(n.currentTarget.dataset.target),i=o.hasClass("panel")),i){r=o.children(".panel-collapse"),o.hasClass("in")?(o.removeClass("in"),r.removeClass("in"),o.collapse("show"),r.collapse("show")):(s=e(".calcite-panels .panel.in"),s.collapse("hide"),s.children(".panel-collapse").collapse("hide"),o.collapse("show"),r.collapse("show"));var a=window.innerWidth<t._stickyDropdownBreakpoint;if(a&&!t.stickyDropdownMobile||!a&&!t.stickyDropdownDesktop){e(".calcite-dropdown .dropdown-toggle").trigger("click")}}}),e(".calcite-dropdown .dropdown-toggle").on("click",function(t){e(this).parent().toggleClass("open"),e(".calcite-dropdown-toggle").toggleClass("open")}),e(".calcite-dropdown").on("hide.bs.dropdown",function(){e(".calcite-dropdown-toggle").removeClass("open")}),e("#calciteToggleNavbar").on("click",function(){var t=e("body");t.hasClass("calcite-nav-hidden")?t.removeClass("calcite-nav-hidden"):t.addClass("calcite-nav-hidden"),e(".calcite-dropdown .dropdown-toggle").trigger("click")}),e(window).on("click",function(t){var n=e(".calcite-dropdown.open")[0];n&&0===e(t.target).closest(".calcite-dropdown").length&&(e(n).removeClass("open"),e(".calcite-dropdown-toggle").removeClass("open"))}),e(".calcite-panels .panel .panel-collapse").on("hide.bs.collapse",function(t){e(t.target.parentNode).find(".panel-label").addClass("visible-xs-inline-block"),e(t.target.parentNode).find(".panel-close").addClass("visible-xs-flex")}),e(".calcite-panels .panel .panel-collapse").on("show.bs.collapse",function(t){e(t.target.parentNode).find(".panel-label").removeClass("visible-xs-inline-block"),e(t.target.parentNode).find(".panel-close").removeClass("visible-xs-flex")}),e(".calcite-map").on("touchmove",function(e){t.preventOverscrolling&&e.preventDefault()}),e(".calcite-dropdown").on("show.bs.dropdown",function(){e(".calcite-dropdown-toggle").addClass("open")}),e(".calcite-dropdown").on("hide.bs.dropdown",function(){e(".calcite-dropdown-toggle").removeClass("open")})}(window.calciteMaps=window.calciteMaps||{},jQuery),define("calcite",["bootstrap","esri-leaflet","esri-leaflet-geocoder"],function(){}),require.config({waitSeconds:200,paths:{d3:"../vendor/d3/d3","esri-leaflet":"../vendor/esri-leaflet/dist/esri-leaflet","esri-leaflet-geocoder":"../vendor/esri-leaflet-geocoder/dist/esri-leaflet-geocoder",jquery:"../vendor/jquery/dist/jquery",leaflet:"../vendor/leaflet/dist/leaflet","leaflet-default-extent":"../vendor/leaflet-default-extent/dist/leaflet.defaultextent","leaflet-markers":"../vendor/Leaflet.extra-markers/dist/js/leaflet.extra-markers.min","leaflet-locate":"../vendor/leaflet.locatecontrol/src/L.Control.Locate","leaflet-marker-cluster":"../vendor/leaflet.markercluster/dist/leaflet.markercluster",mmenu:"../vendor/jQuery.mmenu/dist/jquery.mmenu.all",bootstrap:"../vendor/bootstrap/dist/js/bootstrap.min",calcite:"../vendor/calcite-maps/js/jquery/calcitemaps-v0.3",controllers:"controllers",modules:"modules",services:"services",views:"views",config:"config"},shim:{jquery:{exports:"$"},mmenu:{deps:["jquery"]},leaflet:{exports:"L"},"leaflet-default-extent":{deps:["leaflet"]},"leaflet-locate":{deps:["leaflet"]},"leaflet-marker-cluster":{deps:["leaflet"]},"esri-leaflet":{deps:["leaflet"]},"esri-leaflet-geocoder":{deps:["leaflet","esri-leaflet"]},"leaflet-markers":{deps:["leaflet"]},bootstrap:{deps:["jquery"]},calcite:{deps:["bootstrap","esri-leaflet","esri-leaflet-geocoder"]}}}),require(["controllers/app","calcite"],function(t){t()}),define("rjs-config",function(){});